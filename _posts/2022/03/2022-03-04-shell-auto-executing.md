---
layout: post
modified: 2022-03-14 00:09:35 +0900
date:   2022-03-04 19:56:07 +0900
title:  "[SHELL] Shell Scriptë¡œ íŒŒì¼ ë³€í™˜ì„ ê°ì§€í•´ë³´ì"
author: Kimson
categories: [ shell ]
image: assets/images/post/covers/TIL-shell.png
tags: [ bash, shell, sh, til ]
description: "íŒŒì¼ ë³€í™˜ ê°ì§€

íŒŒì´ì¬ì„ ì‚¬ìš©í•˜ë©´ì„œ ë¶ˆí¸í–ˆë˜ ì ì´ ì‹¤í–‰í•  ë•Œë§ˆë‹¤ ì…ë ¥í•˜ëŠ”ê²Œ ë²ˆê±°ë¡­ê¸°ë„ í•˜ê³  live-serverì˜ ì €ì¥ì‹œ ìƒˆë¡œê³ ì¹¨ ë˜ëŠ” ê¸°ëŠ¥ì„ ë§Œë“¤ ìˆ˜ ìˆì„ê¹Œ ì‹¶ì—ˆìŠµë‹ˆë‹¤.

ì—¬ëŸ¬ ì»¤ë®¤ë‹ˆí‹°ë¥¼ ì°¾ë‹¤ê°€ ê·¸ ë‚´ìš©ì´ ì—­ì‹œ ê°“ì˜¤ë²„í”Œë¡œìš°ì— ìˆì—ˆìŠµë‹ˆë‹¤."
featured: true
hidden: false
rating: 4.5
toc: true
profile: false
istop: true
keysum: false
keywords: ""
published: true
---

# íŒŒì¼ ë³€í™˜ ê°ì§€

íŒŒì´ì¬ì„ ì‚¬ìš©í•˜ë©´ì„œ ë¶ˆí¸í–ˆë˜ ì ì´ ì‹¤í–‰í•  ë•Œë§ˆë‹¤ ì…ë ¥í•˜ëŠ”ê²Œ ë²ˆê±°ë¡­ê¸°ë„ í•˜ê³  live-serverì˜ ì €ì¥ì‹œ ìƒˆë¡œê³ ì¹¨ ë˜ëŠ” ê¸°ëŠ¥ì„ ë§Œë“¤ ìˆ˜ ìˆì„ê¹Œ ì‹¶ì—ˆìŠµë‹ˆë‹¤.

ì—¬ëŸ¬ ì»¤ë®¤ë‹ˆí‹°ë¥¼ ì°¾ë‹¤ê°€ ê·¸ ë‚´ìš©ì´ ì—­ì‹œ ê°“ì˜¤ë²„í”Œë¡œìš°ì— ìˆì—ˆìŠµë‹ˆë‹¤. ğŸ‘

## shíŒŒì¼ ë§Œë“¤ê¸°

```sh
LEDIT=$(stat -c %Z /path/filename.extension)
while true
do
  CEDIT=$(stat -c %Z /path/filename.extension)
  if [[ "$CEDIT" != "$LEDIT" ]]; then
      echo "===== RUN PYTHON COMMNAD ====="
      python test01.py
      LEDIT=$CEDIT
  fi
  sleep 0.5
done
```

### stat ëª…ë ¹ì–´

`stat`ëª…ë ¹ì–´ëŠ” íŒŒì¼ì´ë‚˜ íŒŒì¼ ì‹œìŠ¤í…œ ìƒíƒœë¥¼ í‘œì‹œí•˜ëŠ” ëª…ë ¹ì–´ ì…ë‹ˆë‹¤. ë’¤ì— ë”°ë¥´ëŠ” ì˜µì…˜ì„ í•˜ë‚˜í•˜ë‚˜ ì•Œì•„ë´…ì‹œë‹¤.

`-c`ëŠ” í¬ë§·ì„ ì‚¬ìš©í•  ë•Œë§ˆë‹¤ ê°œí–‰ ì¶œë ¥ì„ í•´ì¤ë‹ˆë‹¤. ê·¸ë¦¬ê³  ê·¸ ë’¤ì— ë”°ë¥´ëŠ” `%Z`ëŠ” í•´ë‹¹ ê²½ë¡œ íŒŒì¼ì˜ ë§ˆì§€ë§‰ ìƒíƒœë³€ê²½ ì‹œê°„ì„ ì´ˆë‹¨ìœ„ë¡œ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.

ì¦‰, ì „ì²´ êµ¬ë¬¸ì„ ë³´ë©´ `LEDIT`ì— í•´ë‹¹ íŒŒì¼ì˜ ë§ˆì§€ë§‰ ë³€ê²½ ì‹œê°„ì´ ë‹´ê¸°ê²Œ ë˜ê³ , `while`ë¬¸ì„ ëŒë©´ì„œ `CEDIT`ë³€ìˆ˜ì— `sleep`ì„ ê±¸ì–´ `0.5`ì´ˆ ê°„ê²©ìœ¼ë¡œ ì ìê²Œ í•©ë‹ˆë‹¤. ê·¸ëƒ¥ `0.5`ì´ˆ ë”œë ˆì´ ì£¼ê³  `while`ë¬¸ ëŒë¦¬ëŠ” ê²ë‹ˆë‹¤.

ê·¸ëŸ¬ë©´ `if`ë¬¸ì—ì„œ `CEDIT`ê³¼ `LEDIT`ì´ ë‹¤ë¥´ë‹¤ë©´ `python test01.py`ë¥¼ `command`ë¡œ `execute`í•©ë‹ˆë‹¤.

`if`ë¬¸ ë‚˜ì˜¤ê¸° ì „ì— `LEDIT`ì„ `CEDIT`ìœ¼ë¡œ ì´ˆê¸°í™” í•´ì¤ë‹ˆë‹¤.

íŒŒì´ì¬ì´ë‚˜ cì–¸ì–´ë¥¼ ì»´íŒŒì¼í•˜ê³  ì‹¤í–‰í•˜ëŠ”ë° ê³„ì† ëª…ë ¹ì¤„ì— ì…ë ¥í•˜ê¸°ê°€ ë²ˆê±°ë¡œì› ëŠ”ë° ë§Œë“¤ì–´ ë‘ê³  ì‚¬ìš©í•˜ë©´ ì°¸ í¸ë¦¬í•©ë‹ˆë‹¤. ğŸ˜ğŸ‘

> statì˜ ì˜µì…˜ ì •ë³´ëŠ” stat --helpì— ì˜ ë‚˜ì™€ ìˆìŠµë‹ˆë‹¤. ğŸ˜®

### ì¶”ê°€

ë§Œì¼ íŒŒì¼ í•˜ë‚˜ë¥¼ ëŒ€ìƒìœ¼ë¡œ í•˜ëŠ”ê²Œ ì•„ë‹Œ í´ë” ë‚´ì— ìˆëŠ” íŒŒì¼ ì–´ëŠ í•˜ë‚˜ë¼ë„ ë³€ê²½ë˜ë©´ `command`ë¥¼ ì‹¤í–‰í•˜ê³  ì‹¶ì„ ë•ŒëŠ” ì•„ë˜ì™€ ê°™ì´ ì¡°ê¸ˆë§Œ ë°”ê¿”ì£¼ë©´ ë©ë‹ˆë‹¤.

```sh
LEDIT=$(stat -c %Z *)
while true
do
  CEDIT=$(stat -c %Z *)
  if [[ "$CEDIT" != "$LEDIT" ]]; then
      echo "===== RUN PYTHON COMMNAD ====="
      python test01.py
      LEDIT=$CEDIT
  fi
  sleep 0.5
done
```

ì¦‰, `sh`íŒŒì¼ì´ ìˆëŠ” ìœ„ì¹˜ì—ì„œ `stat *`ì„ í•˜ë©´ ë””ë ‰í† ë¦¬ ë‚´ ëª¨ë“  íŒŒì¼ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° -cë¡œ ì‹œìŠ¤í…œ ì •ë³´ì— ì ‘ê·¼í•˜ê³  %Zë¡œ ë§ˆì§€ë§‰ ë³€ê²½ ì‹œê°„ë§Œì„ ê°€ì ¸ì™€ ë¹„êµí•˜ê²Œ ë˜ë¯€ë¡œ ì–´ëŠ íŒŒì¼ì´ë˜ ë³€ê²½ë˜ë©´ ì§€ì •í•œ ëª…ë ¹ì¤„ì´ ì‹¤í–‰ë©ë‹ˆë‹¤. ğŸ˜‰

-----

ğŸ“š í•¨ê»˜ ë³´ë©´ ì¢‹ì€ ë‚´ìš©

[DAVE MCKAY :: How to Use the stat Command on Linux](https://www.howtogeek.com/451022/how-to-use-the-stat-command-on-linux/){:target="_blank"}

[StackOverflow :: How to execute a shell script when a file changes?](https://stackoverflow.com/questions/66857291/how-to-execute-a-shell-script-when-a-file-changes#answers-header){:target="_blank"}