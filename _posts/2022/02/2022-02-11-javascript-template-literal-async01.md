---
layout: post
date:   2022-02-11 15:17:59 +0900
title:  "[JAVASCRIPT] í…œí”Œë¦¿ ë¦¬í„°ëŸ´ì—ì„œ ë¹„ë™ê¸°ë¡œ ë‚´ìš©ì„ ë„£ì–´ë³´ì"
author: Kimson
categories: [ JAVASCRIPT, TIL ]
image: assets/images/post/covers/TIL-javascript.png
tags: [ async, template literal, injection ]
description: "í…œí”Œë¦¿ ë¦¬í„°ëŸ´

í…œí”Œë¦¿ ë¦¬í„°ëŸ´ì€ ë‚´ì¥ëœ í‘œí˜„ì‹ì„ í—ˆìš©í•˜ëŠ” ë¬¸ìì—´ ë¦¬í„°ëŸ´ì…ë‹ˆë‹¤. ì—¬ëŸ¬ ì¤„ë¡œ ì´ë¤„ì§„ ë¬¸ìì—´ê³¼ ë¬¸ì ë³´ê°„ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì „ ë²„ì „ ES2015ì‚¬ì–‘ ëª…ì„¸ì—ì„œëŠ” `template strings(í…œí”Œë¦¿ ë¬¸ìì—´)`ì´ë¼ ë¶ˆë €ìŠµë‹ˆë‹¤."
featured: true
hidden: false
rating: 4.5
toc: true
profile: false
istop: true
keysum: false
keywords: ""
published: true
---

# í…œí”Œë¦¿ ë¦¬í„°ëŸ´

í…œí”Œë¦¿ ë¦¬í„°ëŸ´ì€ ë‚´ì¥ëœ í‘œí˜„ì‹ì„ í—ˆìš©í•˜ëŠ” ë¬¸ìì—´ ë¦¬í„°ëŸ´ì…ë‹ˆë‹¤. ì—¬ëŸ¬ ì¤„ë¡œ ì´ë¤„ì§„ ë¬¸ìì—´ê³¼ ë¬¸ì ë³´ê°„ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì „ ë²„ì „ ES2015ì‚¬ì–‘ ëª…ì„¸ì—ì„œëŠ” `template strings(í…œí”Œë¦¿ ë¬¸ìì—´)`ì´ë¼ ë¶ˆë €ìŠµë‹ˆë‹¤.

## ê¸°ë³¸ ì‚¬ìš©ë²•

ì‚¬ìš©ë°©ë²•ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.

```javascript
// ë¬¸ìì—´ ì¤„ë°”ê¿ˆ ì‹œ ğŸ˜£
const str = 'ë‚˜ëŠ”'
    + 'í‚´ìŠ¨'
    + 'ì…ë‹ˆë‹¤';

// Template Literal ğŸ˜„
const str = `ë‚˜ëŠ”
í‚´ìŠ¨
ì…ë‹ˆë‹¤.
`;
```

ì‘ì€ ë”°ì˜´í‘œ ë˜ëŠ” ì´ì¤‘ ë”°ì˜´í‘œë¥¼ ì‚¬ìš©í•´ì„œ ë¬¸ìì—´ì„ ê°ìŒŒì§€ë§Œ ëŒ€ì‹ ì— ë°±í‹± (\`)ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

ì´ë•Œ í”Œë ˆì´ìŠ¤ í™€ë”ë¥¼ ì´ìš©í•´ í‘œí˜„ì‹ ì‚¬ìš©ì´ ê°€ëŠ¥í•œë°, í‘œí˜„ì‹ì€ `$`ì™€ ì¤‘ê´„í˜¸(ì½§ìˆ˜ì—¼ ê´„í˜¸)ë¡œ `${ ...exp... }` í‘œê¸°í•©ë‹ˆë‹¤.

```javascript
const str = `ë‚˜ëŠ” ${user.name}ì…ë‹ˆë‹¤.`;
```

## Tagged Templates

í¬ìŠ¤íŒ… ë•Œë¬¸ì— í…œí”Œë¦¿ ë¦¬í„°ëŸ´ì„ ë‹¤ì‹œ ë³´ë‹¤ê°€ ì²˜ìŒë³´ëŠ” ì‚¬ìš©ë²•ì„ ë°œê²¬í–ˆìŠµë‹ˆë‹¤.

í•¨ìˆ˜ì— ë°”ë¡œ ë¶™ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ”ë°ìš”. ê¸°ì¡´ì—ëŠ” `test`ë¼ëŠ” í•¨ìˆ˜ê°€ ìˆìœ¼ë©´ `test()`ë¡œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œ í–ˆìŠµë‹ˆë‹¤. ì•„ë˜ì˜ ì˜ˆì œë¥¼ ë³´ë©´ ê´„í˜¸ ëŒ€ì‹  ë°± í‹±(\`)ìœ¼ë¡œ í˜¸ì¶œí•˜ëŠ”ë° (test\`blah blah...\`) ì´ë¥¼ íƒœê·¸ê°€ ì§€ì •ëœ í…œí”Œë¦¿, íƒœê·¸ í‘œí˜„ì‹ì´ë¼ í•©ë‹ˆë‹¤.

```javascript
const name = 'kimson', age = 30, emoji = 'ğŸ˜';

function test(str, nameExp, ageExp, emojiExp){
    const str0 = str[0];
    const str1 = str[1];
    const str2 = str[2];
    /**
     * 3ê°œì˜ ë³€ìˆ˜ë§Œ ì§€ì •í–ˆì§€ë§Œ
     * ê¸°ìˆ ì ìœ¼ë¡œ strì˜ ê¸¸ì´ëŠ” 4ì…ë‹ˆë‹¤.
     * ì´ìœ ëŠ” ì´ëª¨ì§€ ë‹¤ìŒì—
     * ''ê³µë°±ì´ í•˜ë‚˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
     */

    let validAge;

    if(ageExp>30){
        validAge = '30ì´ìƒ';
    } else {
        validAge = '30ë¯¸ë§Œ';
    }

    return str0 + nameExp + str1 + validAge + str2 + emojiExp;
}

test`ë‚˜ëŠ” ${ name }ì…ë‹ˆë‹¤. ë‚˜ì´ëŠ” ${ age }. ${ emoji }`;

// 'ë‚˜ëŠ” kimsonì…ë‹ˆë‹¤. ë‚˜ì´ëŠ” 30ë¯¸ë§Œ. ğŸ˜'
```

ì¢€ ë” ë‚˜ì•„ê°€ í™œìš©ë²•ì„ ë³´ê² ìŠµë‹ˆë‹¤.

```javascript
function template(str, ...keys){
    console.log(str.raw); // ë¬¸ì ë°°ì—´ì˜ escape ë˜ì§€ ì•Šì€ ì›ì‹œ ë¬¸ìì—´ì„ ì•¡ì„¸ìŠ¤ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    return (function (...values){
        let dict = values[values.length - 1] || {};
        let result = [str[0]];

        keys.forEach(function (key, i){
            let value = Number.isInteger(key) ? values[key] : dict[key];
            result.push(value, str[i+1]);
        });

        return result.join(' ');
    });
}

let test1 = template`${0}${1}${0}${'nation'}${1}${0}`;
test1('kimson', 'wow', {nation: 'korea'});

// ' kimson  wow  kimson  korea  wow  kimson '
```

ê²°ê³¼ëŠ” ìœ„ ì²˜ëŸ¼ ì¸ë±ì‹±ìœ¼ë¡œ ë¦¬í„°ëŸ´ì— í‘œì‹œ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤.

ì²˜ìŒ ì ‘í•˜ëŠ” ë¶„ì„ ìœ„í•´ ê°„ë‹¨í•œ ì„¤ëª…ì„ í•˜ìë©´ `test1` ë³€ìˆ˜ì˜ `test1` í•¨ìˆ˜ê°€ ë¨¼ì € ì‹¤í–‰ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ `test1` ë³€ìˆ˜ ì„¤ì •í•  ë•Œ `template` í•¨ìˆ˜ê°€ ë¨¼ì € ì‹¤í–‰ë©ë‹ˆë‹¤.

ê·¸ ë‹¤ìŒ `test1` ë³€ìˆ˜ëŠ” ì•„ë˜ì™€ ê°™ì´ ë©ë‹ˆë‹¤.

```javascript
// template í•¨ìˆ˜...
let test1 = (function (...values){
    // ë‚´ìš©ë“¤ ...
});

test1('kimson', 'wow', {nation: 'korea'});
```

ì´ ìƒíƒœì—ì„œ í•¨ìˆ˜ë¥¼ ë¦¬í„´ ë°›ì•„ í•¨ìˆ˜ê°€ ëœ `test1`ì„ ì¸ìì™€ í•¨ê»˜ í˜¸ì¶œí•˜ê²Œ ë©ë‹ˆë‹¤.

`values`ì—ì„œ ì¸ì 3ê°€ì§€ë¥¼ ë°›ê³  ìˆ«ìë¼ë©´ ì¸ë±ì‹±, ë¬¸ìë¼ë©´ ê°ì²´ ì†ì„±ì„ ê°€ì ¸ì˜¤ë„ë¡ í•˜ê³  `result`ì— ë„£ìŠµë‹ˆë‹¤. ë°˜ë³µë¬¸ì„ í†µê³¼í•œ ê²°ê³¼ ê°’ì„ ë§ˆì§€ë§‰ì— ë¦¬í„´í•©ë‹ˆë‹¤.

ì—¬ê¸°ì„œ ì¤‘ìš”í•˜ê²Œ ìƒê°í•˜ëŠ” ë¶€ë¶„ì€ í•¨ìˆ˜ë¥¼ ë‘ ë²ˆ í˜¸ì¶œí•˜ëŠ”ë° í˜¸ì¶œí•  ë•Œ ì „ë‹¬ ëœ ë‘ ë¬¶ìŒì˜ ì¸ìë¥¼ ëª¨ë‘ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ì  ì…ë‹ˆë‹¤.

ì§€ê¸ˆ ë‹¹ì¥ì—ëŠ” êµ³ì´ ì“¸ í•„ìš”ê°€ ìˆì„ê¹Œ ì‹¶ì§€ë§Œ ì—°êµ¬í•˜ë‹¤ë³´ë©´ ì¢‹ì€ ì“°ì„ì´ ìˆì§€ ì•Šì„ê¹Œ ìƒê°í•©ë‹ˆë‹¤.

## í…œí”Œë¦¿ ë¦¬í„°ëŸ´ì˜ ì‘ë™

ê·¸ë ‡ë‹¤ë©´ í…œí”Œë¦¿ ë¦¬í„°ëŸ´ì€ ì–´ë–»ê²Œ ì‘ë™í• ê¹Œìš”?

ë¬¸ìì—´ì€ ê·¸ëŒ€ë¡œ ì¶œë ¥ì´ ë©ë‹ˆë‹¤. í•˜ì§€ë§Œ ìœ„ì— ì–¸ê¸‰í•œ í‘œí˜„ì‹ì´ ì„ì¸ë‹¤ë©´ í‘œí˜„ì‹ê³¼ ê·¸ ì‚¬ì´ì˜ í…ìŠ¤íŠ¸ëŠ” í•¨ê»˜ í•¨ìˆ˜ë¡œ ì „ë‹¬ì´ ë©ë‹ˆë‹¤. ê¸°ë³¸ í•¨ìˆ˜ëŠ” ë‹¨ìˆœí•˜ê²Œ í•´ë‹¹ ë¶€ë¶„ì„ ë‹¨ì¼ ë¬¸ìì—´ë¡œ ì—°ê²° ì‹œì¼œì£¼ëŠ” ê¸°ëŠ¥ì„ í•©ë‹ˆë‹¤.

ì´ë•Œ í‘œí˜„ì‹ì—ì„œ ë³€ìˆ˜, ê°ì²´ì˜ ì†ì„±ê°’, ì¦‰ì‹œì‹¤í–‰í•¨ìˆ˜ ë“±ì„ ì‚¬ìš©í•œë‹¤ë©´ í•´ë‹¹ ê°’ì„ ë°›ì•„ ë¬¸ìì—´ë¡œ ì—°ê²°ì‹œí‚¤ê³  ê²°ê³¼ë¥¼ ì¶œë ¥í•´ì¤ë‹ˆë‹¤.

## ë¬¸ìì—´ì— ë¹„ë™ê¸°ë¡œ ë‚´ìš© ë„£ê¸°

ë³¸ê²©ì ìœ¼ë¡œ ì´ë²ˆ í¬ìŠ¤íŒ… ì£¼ì œì— ëŒ€í•´ ë‹¤ë£¨ê² ìŠµë‹ˆë‹¤. ìœ„ì—ì„œ ì„¤ëª…í•œ ë°ë¡œ ì¶œë ¥í•  ë•Œ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ê³  ê²°ê³¼ ê°’ì„ ë¦¬í„´ ë°›ì•„ ë¬¸ìì—´ì„ ë³€í™˜ì‹œì¼œ ì¶œë ¥ ê°€ëŠ¥í•©ë‹ˆë‹¤.

í•˜ì§€ë§Œ ë¦¬í„´ ê°’ì— ì‹œê°„ ì°¨ê°€ ìˆëŠ” `fetch`ë‚˜ `setTimeout` í˜¹ì€ `setInterval`ê³¼ ê°™ì€ ê°’ì˜ ë³€ë™ì´ ì§€ì—°ë˜ëŠ” ê²½ìš° `undefined`ë‚˜ `null` í˜¹ì€ ë¹ˆ ê°’ì„ í•´ë‹¹ ë¶€ë¶„ì— ì¶œë ¥í•˜ê²Œ ë©ë‹ˆë‹¤.

ì´ê²ƒì€ ì›í•˜ëŠ” ê²°ê³¼ê°€ ì•„ë‹ˆë‹ˆ ë‹¤ë¥¸ ë°©ë²•ì„ ì¨ì•¼ í•  ê²ƒ ì…ë‹ˆë‹¤.

ê·¸ë˜ì„œ ìƒê°í•˜ë‹¤ë³´ë‹ˆ ì„ì‹œ íƒœê·¸ë¥¼ ë‘¬ì„œ ë°”ê¿”ì¹˜ê¸°ë¥¼ í•´ë³´ìëŠ” ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤.

ì˜ì‚¬ì½”ë“œë¡œ ë¨¼ì € ë³´ìë©´ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.

1. ë§¤ê°œë³€ìˆ˜ë¥¼ ê°ì²´ë¡œ ë°›ëŠ”ë‹¤.
2. id ë³€ìˆ˜ë¥¼ ìƒì„±í•œë‹¤.
3. tempíƒœê·¸ë¥¼ ë§Œë“ ë‹¤.
4. í˜„ì¬ ì‹œê°„ì„ 36ì§„ìˆ˜ë¡œ ë³€í™˜í•œë‹¤.
5. tempíƒœê·¸ ì•„ì´ë””ì— ë³€í™˜ëœ ì‹œê°„ì„ ë„£ëŠ”ë‹¤.
   1. ë¹„ë™ê¸° í•¨ìˆ˜ë¥¼ ë§Œë“ ë‹¤.
   2. result ë³€ìˆ˜ë¥¼ ìƒì„±í•œë‹¤.
   3. `if` ë¬¸ìì—´ì´ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.
      1. `true` resultì— ì €ì¥í•œë‹¤.
      2. `false` ë„˜ì–´ê°„ë‹¤.
   4. `if` urlì´ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.
      1. `true` fetchë¡œ ë°ì´í„°ë¥¼ ë°›ëŠ”ë‹¤.
         1. resultì— ì €ì¥í•œë‹¤.
      2. `false` ë„˜ì–´ê°„ë‹¤.
   5. setTimeoutë¥¼ ì •ì˜í•œë‹¤. (ë¦¬í„´ í›„ ì‘ë™)
   6. ì €ì¥í–ˆë˜ idë¡œ íƒœê·¸ë¥¼ ì„ íƒí•œë‹¤.
   7. ì„ íƒëœ íƒœê·¸ ë‹¤ìŒìœ¼ë¡œ resultë¥¼ ë„£ëŠ”ë‹¤.
   8. ì„ íƒëœ íƒœê·¸ë¥¼ ì‚­ì œí•œë‹¤.
   9. ë”œë ˆì´ë¥¼ ë„£ëŠ”ë‹¤.
6. tempíƒœê·¸ë¥¼ ë°˜í™˜í•œë‹¤.

ì˜ì‚¬ì½”ë“œë¥¼ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ êµ¬í˜„í•´ë³´ì•˜ìŠµë‹ˆë‹¤.

```javascript
function templateInsertAsync({...options}){
    const id = new Date().getTime().toString().split('').map(x=>String.fromCharCode(65+parseInt(x))).join('');
    
    (async function(){
        let result;

        if(options.string) result = options.string;

        if(options.url){
            let res = await fetch(options.url);
            let data = await res.text();
            result = data;
        }

        setTimeout(() => {
            let target = document.querySelector(`#${id}`);
            target.insertAdjacentHTML('afterend', `<span class="delay-injection">${result}</span>`);
            target.remove();
        }, options.delay);
    })();
    
    return `<temp id="${id}"></temp>`;
}

templateInsertAsync({
    string: 'ì¶œë ¥ í…ŒìŠ¤íŠ¸',
    // url: '',
    delay: 0
});

// <temp id="id"></temp> => <span class="delay-injection">ì¶œë ¥ í…ŒìŠ¤íŠ¸</span>
```

ë‚˜ì¤‘ì— ì£¼ì…ëœ íƒœê·¸ë¥¼ ë³„ë„ë¡œ ì¡°ì‘í•˜ê¸° ìœ„í•´ í´ë˜ìŠ¤ë¥¼ ì£¼ì—ˆìŠµë‹ˆë‹¤. íƒœê·¸ì— íŠ¸ë¦¬ë¡œ ë“¤ì–´ê°„ ìƒíƒœì—¬ë„ ì •í™•í•œ ìœ„ì¹˜ì—ì„œ êµì²´ê°€ ë©ë‹ˆë‹¤. ì €ëŠ” íƒœê·¸ë¡œ êµì²´ë¥¼ í–ˆì§€ë§Œ `result`ë§Œìœ¼ë¡œ êµì²´í•´ë„ ë¬´ë°©í•©ë‹ˆë‹¤.

í˜¹ì€ setTimeoutê³¼ setIntervalì„ í•¨ìˆ˜ í˜¸ì¶œ ë•Œë§ˆë‹¤ ì„ íƒì ìœ¼ë¡œ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ë©´ ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

```javascript
function templateInsertAsync({...options}){
    const id = new Date().getTime().toString().split('').map(x=>String.fromCharCode(65+parseInt(x))).join('');
    
    (async function(){
        let result;

        if(options.string) result = options.string;

        if(options.url){
            let res = await fetch(options.url);
            let data = await res.text();
            result = data;
        }

        window[options.type||'setTimeout'](() => {
            let target = document.querySelector(`#${id}`);
            if(target.tagName == 'TEMP') {
                target.insertAdjacentHTML('afterend', `<span id="${id}" class="delay-injection">${result}</span>`);
                target.remove();
            } else target.textContent = result;
            if(options.increase) result = parseInt(result) + options.increase;
        }, options.delay);
    })();

    return `<temp id="${id}"></temp>`;
}

templateInsertAsync({
    string: 1,
    type: 'setTimeout' // or 'setInterval',
    incease: 1,
    delay: 1000,
    type: 'setInterval',
});
```

ìœ„ì™€ ê°™ì´ ì¡°ê¸ˆ ë³€ê²½í•˜ë©´ `fetch`ì™€ ë”œë ˆì´, ì¸í„°ë²Œ ëª¨ë‘ ì‚¬ìš© ê°€ëŠ¥í•œ í•¨ìˆ˜ê°€ ì™„ì„±ë©ë‹ˆë‹¤. `interval`ì„ ì‚¬ìš©í•˜ë©´ í•´ë‹¹ íƒœê·¸ì˜ ë‚´ìš©ì— `increase` ê°’ ë§Œí¼ 1ì´ˆë§ˆë‹¤ ì¦ê°€í•˜ë©° í™”ë©´ì´ ë°”ë€Œê²Œ ë©ë‹ˆë‹¤.

`css`ì—ì„œ `temp`ë¥¼ `display: none`ìœ¼ë¡œ í•˜ë©´ ë” ì™„ë²½í•˜ê²Œ `temp`ë¥¼ ê°€ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¬¼ë¡  ì´ëŸ´ë°”ì—” `vue`ë¥¼ ì“°ê² ì§€ë§Œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë‚˜ í”„ë ˆì„ì›Œí¬ì˜ ë„ì›€ì„ ìµœì†Œí•œìœ¼ë¡œ í•´ë³´ê³  ì‚¬ìš©í•´ì•¼ ì–¼ë§ˆë‚˜ ì´ ê¸°ëŠ¥ì´ ê°ì‚¬í•œì§€ ì•Œ ìˆ˜ ìˆì„ ê²ƒ ê°™ì•„ ê³„ì†í•´ì„œ ì‹¤í—˜í•´ë³´ê³  ìˆìŠµë‹ˆë‹¤.

ì—„ì²­ë‚œ ë‚´ìš©ì€ ì•„ë‹ˆì§€ë§Œ ëˆ„êµ°ê°€ ì´ëŸ¬í•œ ê¸°ëŠ¥ì´ í•„ìš”í•˜ë‹¤ê±°ë‚˜ ê³ ë¯¼ ì¤‘ì´ë¼ë©´ ìê·¸ë§ˆí•œ ë„ì›€ì´ë¼ë„ ë˜ì—ˆìœ¼ë©´ í•©ë‹ˆë‹¤.

ì•„ë˜ì—ëŠ” ì˜ ì •ë¦¬ëœ `MDN Web Docs`ë§í¬ë¥¼ ì˜¬ë ¸ìŠµë‹ˆë‹¤. ë” ìì„¸í•œ ë‚´ìš©ì€ ì°¸ê³ ë°”ëë‹ˆë‹¤.

-----

ğŸ“š í•¨ê»˜ ë³´ë©´ ì¢‹ì€ ë‚´ìš©

[MDN Web Docs::Template Literals](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Template_literals 'MDN Web Docs::Template Literal')
{:target="_blank"}