I"»è<h1 id="ì†”ë¦¬í…Œì–´ë¥¼-ë§Œë“¤ì–´-ë³´ì-2í¸">ì†”ë¦¬í…Œì–´ë¥¼ ë§Œë“¤ì–´ ë³´ì 2í¸</h1>

<p>ì´ì „ í¸ì— í‹€ì„ ì¡ê³  ëëƒˆìŠµë‹ˆë‹¤. ì´ ë‹¤ìŒì€ ì €ë²ˆ í¸ì—ì„œ ë§ˆì§€ë§‰ ì¤„ì— ì•Œë ¤ë“œë¦° ì¹´ë“œ ì¶œë ¥ê³¼ ë½‘ê¸°, ëª¨ìœ¼ê¸°ë¥¼ êµ¬í˜„í•˜ë ¤í•©ë‹ˆë‹¤.</p>

<p>ì¹´ë“œë¥¼ ë½‘ê³  ëª¨ìœ¼ê³  ì¶œë ¥í•˜ê¸°ë§Œ í•˜ë©´ ì´ì œ ê·œì¹™ì„ ë§Œë“¤ì–´ ì œì–´ë§Œ í•˜ë©´ ì™„ì„±ì´ ë©ë‹ˆë‹¤.</p>

<p>ì´ì „ì— ë§Œë“¤ì—ˆë˜ ì½”ë“œë¥¼ ì •ì œí•˜ë©´ì„œ ê¸°ë¡í•˜ë ¤í•˜ë‹ˆ ì‹œê°„ì´ ë°°ë¡œ ê±¸ë¦¬ëŠ” ëŠë‚Œì´ ë“¤ì§€ë§Œ í•˜ë‚˜í•˜ë‚˜ ë§Œë“¤ì–´ ë´…ì‹œë‹¤.</p>

<h2 id="ì¹´ë“œ-3ê°€ì§€-ê¸°ëŠ¥">ì¹´ë“œ 3ê°€ì§€ ê¸°ëŠ¥</h2>

<blockquote>
  <p>ì´ì „ ì½”ë“œì™€ ë‹¤ë¥¸ ì½”ë“œê°€ ìˆìŠµë‹ˆë‹¤. í‘œì‹œí•´ë‘ì—ˆìœ¼ë‹ˆ ì°¸ê³ ë°”ëë‹ˆë‹¤.</p>
</blockquote>

<p>ì¹´ë“œ ì •ë³´ë¥¼ ì´ì „ì— ì‘ì„± í•´ë‘¬ì„œ ì¶œë ¥í•˜ëŠ”ë°ëŠ” ë¬´ë¦¬ê°€ ì—†ì„ ê²ƒì…ë‹ˆë‹¤. í…œí”Œë¦¿ í˜•íƒœë¡œ <code class="language-plaintext highlighter-rouge">render</code>í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì •ë³´ë§Œ ìˆìœ¼ë©´ ë‹¤ì–‘í•œ í˜•íƒœë¡œ ì¶œë ¥ê°€ëŠ¥í•˜ê²Œ ë©ë‹ˆë‹¤.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// app.js :: Controller</span>
<span class="kd">function</span> <span class="nx">Controller</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">init</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="c1">// ...</span>
    
        <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">click</span><span class="dl">'</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">cardDraw</span><span class="p">);</span> <span class="c1">// ++</span>
        <span class="c1">// ì¹´ë“œ ë½‘ê¸°</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">click</span><span class="dl">'</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">cardCollect</span><span class="p">);</span> <span class="c1">// ++</span>
        <span class="c1">// ì¹´ë“œ ëª¨ìœ¼ê¸°</span>
    <span class="p">}</span>
    
    <span class="k">this</span><span class="p">.</span><span class="nx">cardRender</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="c1">// ++</span>
        <span class="c1">// ì¹´ë“œë¥¼ ë Œë”ë§í•˜ëŠ” ë©”ì„œë“œì…ë‹ˆë‹¤.</span>
        <span class="nx">models</span><span class="p">.</span><span class="nx">cardRender</span><span class="p">();</span>
    <span class="p">}</span>
    
    <span class="k">this</span><span class="p">.</span><span class="nx">cardCollect</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">ev</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// ++</span>
        <span class="c1">// ì¹´ë“œë¥¼ ëª¨ìœ¼ëŠ” ë©”ì„œë“œì…ë‹ˆë‹¤.</span>
        <span class="kd">const</span> <span class="nx">target</span> <span class="o">=</span> <span class="nx">ev</span><span class="p">.</span><span class="nx">target</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">target</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="dl">'</span><span class="s1">front</span><span class="dl">'</span><span class="p">))</span> <span class="k">return</span><span class="p">;</span> <span class="c1">// í´ë˜ìŠ¤ê°€ í”„ë¡ íŠ¸ê°€ ì•„ë‹ˆë©´</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">target</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="dl">'</span><span class="s1">stacking</span><span class="dl">'</span><span class="p">)</span> <span class="o">||</span> <span class="nx">target</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">lastElementChild</span> <span class="o">!=</span> <span class="nx">target</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span> <span class="c1">// ë¶€ëª¨ê°€ stacking í´ë˜ìŠ¤ê°€ ì•„ë‹ˆê±°ë‚˜ ë§ˆì§€ë§‰ ìš”ì†Œê°€ ì•„ë‹ˆë¼ë©´</span>
        <span class="c1">// í•¨ìˆ˜ë¥¼ ë©ˆì¶¥ë‹ˆë‹¤.</span>
    
        <span class="nx">models</span><span class="p">.</span><span class="nx">cardCollect</span><span class="p">(</span><span class="nx">target</span><span class="p">);</span> <span class="c1">// modelì— ìœ„ì„í•©ë‹ˆë‹¤.</span>
    <span class="p">}</span>
    
    <span class="k">this</span><span class="p">.</span><span class="nx">cardDraw</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">ev</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// ++</span>
        <span class="kd">const</span> <span class="nx">target</span> <span class="o">=</span> <span class="nx">ev</span><span class="p">.</span><span class="nx">target</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">target</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="dl">'</span><span class="s1">card</span><span class="dl">'</span><span class="p">)</span> <span class="o">||</span> <span class="o">!</span><span class="nx">target</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="dl">'</span><span class="s1">stock</span><span class="dl">'</span><span class="p">))</span> <span class="k">return</span><span class="p">;</span>
        <span class="c1">// íƒ€ê²Ÿì´ card ë˜ëŠ” íƒ€ê²Ÿì˜ ë¶€ëª¨ê°€ stockí´ë˜ìŠ¤ë¥¼ ê°€ì§€ì§€ ì•Šìœ¼ë©´ ë©ˆì¶¥ë‹ˆë‹¤.</span>
        <span class="c1">// ì¹´ë“œì´ê³  ë¶€ëª¨ê°€ ìŠ¤í†¡ì´ì–´ì•¼ ì‹¤í–‰í•˜ë„ë¡ í•©ë‹ˆë‹¤.</span>
    
        <span class="nx">models</span><span class="p">.</span><span class="nx">cardDraw</span><span class="p">(</span><span class="nx">target</span><span class="p">);</span> <span class="c1">// modelì— ìœ„ì„í•©ë‹ˆë‹¤.</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ì´ë²¤íŠ¸ë¥¼ ë“±ë¡í–ˆìŠµë‹ˆë‹¤. ë‘˜ ë‹¤ í´ë¦­ì´ë²¤íŠ¸ì´ê³ , ì¹´ë“œë¥¼ ë½‘ì„ ë•Œ í•œ ì¥ì”© ì¶œë ¥í•´ì£¼ëŠ” ê¸°ëŠ¥ê³¼ ì•ìœ¼ë¡œ ë‚˜ì—´ëœ ì¹´ë“œ ì¤‘ ê³§ë°”ë¡œ ì¹´ë“œë¥¼ ëª¨ì„ ìˆ˜ ìˆì„ ë•Œ stackì— ì˜¬ë ¤ë²„ë¦¬ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">cardRender</code>ëŠ” ëª¨ë“  ë©”ì„œë“œë“¤ì´ ì‘ë™í•˜ê³ ë‚˜ì„œ ê³µí†µìœ¼ë¡œ ì‹¤í–‰ë˜ë„ë¡ í•¨ìˆ˜ë¥¼ ë³„ë„ ë§Œë“¤ë ¤í•©ë‹ˆë‹¤.</p>

<ol>
  <li><code class="language-plaintext highlighter-rouge">stock</code>ìˆ˜ì • -&gt; <code class="language-plaintext highlighter-rouge">cardRender</code></li>
  <li><code class="language-plaintext highlighter-rouge">stack</code>ìˆ˜ì • -&gt; <code class="language-plaintext highlighter-rouge">cardRender</code></li>
  <li><code class="language-plaintext highlighter-rouge">playing</code>ìˆ˜ì • -&gt; <code class="language-plaintext highlighter-rouge">cardRender</code></li>
</ol>

<p><code class="language-plaintext highlighter-rouge">cardRender</code>ëŠ” <code class="language-plaintext highlighter-rouge">stack</code>, <code class="language-plaintext highlighter-rouge">stock</code>, <code class="language-plaintext highlighter-rouge">playing</code> ì˜ì—­ì„ ëª¨ë‘ ë‹¤ì‹œ ë Œë”í•˜ê²Œ ë©ë‹ˆë‹¤.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// app.js :: Model</span>

<span class="kd">function</span> <span class="nx">Model</span><span class="p">(){</span>
    <span class="c1">// ... init</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">generateCardSuits</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">({</span>
        <span class="nx">suits</span><span class="p">,</span>
        <span class="nx">list</span>
    <span class="p">})</span> <span class="p">{</span>
        <span class="p">[...</span><span class="nx">suits</span><span class="p">].</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">type</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">[...</span><span class="nx">list</span><span class="p">].</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">num</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="nx">cardStock</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
                    <span class="na">id</span><span class="p">:</span> <span class="nx">Model</span><span class="p">.</span><span class="nx">count</span><span class="o">++</span><span class="p">,</span>
                    <span class="na">$suit</span><span class="p">:</span> <span class="nx">type</span><span class="p">,</span>
                    <span class="na">deno</span><span class="p">:</span> <span class="nx">num</span><span class="p">,</span>
                    <span class="na">$parent</span><span class="p">:</span> <span class="nx">cardStock</span><span class="p">,</span> <span class="c1">// ++</span>
                    <span class="na">imgSuit</span><span class="p">:</span> <span class="nx">num</span><span class="o">&gt;</span><span class="mi">10</span><span class="p">?</span><span class="nx">type</span><span class="o">+</span><span class="mi">2</span><span class="p">:</span><span class="nx">type</span><span class="p">,</span> <span class="c1">// ++</span>
                    <span class="na">imgNum</span><span class="p">:</span> <span class="nx">num</span><span class="o">==</span><span class="mi">1</span><span class="p">?</span><span class="dl">'</span><span class="s1">ace</span><span class="dl">'</span><span class="p">:</span><span class="nx">num</span><span class="o">==</span><span class="mi">11</span><span class="p">?</span><span class="dl">'</span><span class="s1">jack</span><span class="dl">'</span><span class="p">:</span><span class="nx">num</span><span class="o">==</span><span class="mi">12</span><span class="p">?</span><span class="dl">'</span><span class="s1">queen</span><span class="dl">'</span><span class="p">:</span><span class="nx">num</span><span class="o">==</span><span class="mi">13</span><span class="p">?</span><span class="dl">'</span><span class="s1">king</span><span class="dl">'</span><span class="p">:</span><span class="nx">num</span><span class="p">,</span> <span class="c1">// ++</span>
                    <span class="na">shape</span><span class="p">:</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">card</span><span class="p">.</span><span class="nx">shape</span><span class="p">[</span><span class="nx">type</span><span class="p">],</span>
                    <span class="na">isBack</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                    <span class="na">isStaged</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
                    <span class="na">isSelected</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
                <span class="p">});</span>
            <span class="p">});</span>
        <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">handOutCard</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">col</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">col</span> <span class="o">&lt;</span> <span class="mi">7</span><span class="p">;</span> <span class="nx">col</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">row</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">row</span> <span class="o">&lt;=</span> <span class="nx">col</span><span class="p">;</span> <span class="nx">row</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// cardPlaying[col].push(cardStock.pop()); --</span>
                <span class="kd">const</span> <span class="nx">last</span> <span class="o">=</span> <span class="nx">cardStock</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span> <span class="c1">// ++</span>
                <span class="nx">cardPlaying</span><span class="p">[</span><span class="nx">col</span><span class="p">].</span><span class="nx">push</span><span class="p">(</span><span class="nx">last</span><span class="p">);</span> <span class="c1">// ++</span>
                <span class="nx">last</span><span class="p">.</span><span class="nx">$parent</span> <span class="o">=</span> <span class="nx">cardPlaying</span><span class="p">;</span> <span class="c1">// ++</span>
                <span class="nx">last</span><span class="p">.</span><span class="nx">isStaged</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span> <span class="c1">// ++</span>
            <span class="p">}</span>
            <span class="nx">cardPlaying</span><span class="p">[</span><span class="nx">col</span><span class="p">].</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">).</span><span class="nx">pop</span><span class="p">().</span><span class="nx">isBack</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">cardRender</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="c1">// ++</span>
        <span class="nx">views</span><span class="p">.</span><span class="nx">cardRender</span><span class="p">(</span><span class="nx">cardStock</span><span class="p">,</span> <span class="nx">cardPlaying</span><span class="p">,</span> <span class="nx">cardStack</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">cardCollect</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">elCard</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// ++</span>
        <span class="kd">const</span> <span class="nx">card</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">findCard</span><span class="p">(</span><span class="nx">elCard</span><span class="p">);</span> <span class="c1">// findCardë©”ì„œë“œë¡œ ì¹´ë“œ ì •ë³´ë¥¼ ì°¾ì•„ ë°˜í™˜í•©ë‹ˆë‹¤.</span>
        <span class="kd">let</span> <span class="nx">getCard</span><span class="p">;</span>

        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">validNextCard</span><span class="p">(</span><span class="nx">card</span><span class="p">))</span> <span class="k">return</span><span class="p">;</span>
        
        <span class="k">if</span><span class="p">(</span><span class="nx">card</span><span class="p">.</span><span class="nx">$parent</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">){</span>
            <span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">col</span> <span class="k">of</span> <span class="nx">card</span><span class="p">.</span><span class="nx">$parent</span><span class="p">){</span>
                <span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">row</span> <span class="k">of</span> <span class="nx">col</span><span class="p">){</span>
                    <span class="k">if</span><span class="p">(</span><span class="nx">row</span> <span class="o">==</span> <span class="nx">card</span><span class="p">){</span>
                        <span class="nx">getCard</span> <span class="o">=</span> <span class="nx">col</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">card</span><span class="p">.</span><span class="nx">$parent</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">card</span><span class="p">),</span> <span class="mi">1</span><span class="p">).</span><span class="nx">pop</span><span class="p">();</span>
                        <span class="k">break</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">getCard</span> <span class="o">=</span> <span class="nx">card</span><span class="p">.</span><span class="nx">$parent</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">card</span><span class="p">.</span><span class="nx">$parent</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">card</span><span class="p">),</span> <span class="mi">1</span><span class="p">).</span><span class="nx">pop</span><span class="p">();</span>
        <span class="p">}</span>
        
        <span class="nx">card</span><span class="p">.</span><span class="nx">$parent</span> <span class="o">=</span> <span class="nx">cardStack</span><span class="p">;</span>
        <span class="nx">cardStack</span><span class="p">[</span><span class="nx">parts</span><span class="p">.</span><span class="nx">card</span><span class="p">.</span><span class="nx">suits</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">card</span><span class="p">.</span><span class="nx">$suit</span><span class="p">)].</span><span class="nx">push</span><span class="p">(</span><span class="nx">getCard</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">cardRender</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="c1">// ëª¨ì¸ ì¹´ë“œ ì¤‘ ë§ˆì§€ë§‰ ì¹´ë“œ ë‹¤ìŒì˜ ì¹´ë“œì— ì í•©í•œì§€ íŒë³„</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">validNextCard</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">card</span><span class="p">){</span> <span class="c1">// ++</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">card</span><span class="p">.</span><span class="nx">deno</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">card</span><span class="p">.</span><span class="nx">deno</span> <span class="o">==</span> <span class="nx">cardStack</span><span class="p">[</span><span class="nx">parts</span><span class="p">.</span><span class="nx">card</span><span class="p">.</span><span class="nx">suits</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">card</span><span class="p">.</span><span class="nx">$suit</span><span class="p">)]?.</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)?.</span><span class="nx">pop</span><span class="p">()?.</span><span class="nx">deno</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// ì¹´ë“œë¥¼ í•œ ì¥ ë½‘ìŠµë‹ˆë‹¤.</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">cardDraw</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">elStock</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// ++</span>
        <span class="kd">const</span> <span class="nx">notStaged</span> <span class="o">=</span> <span class="nx">cardStock</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">s</span><span class="o">=&gt;!</span><span class="nx">s</span><span class="p">.</span><span class="nx">isStaged</span><span class="p">);</span>
        <span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">card</span> <span class="k">in</span> <span class="nx">notStaged</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">card</span> <span class="o">==</span> <span class="nx">notStaged</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">){</span>
                <span class="nx">notStaged</span><span class="p">[</span><span class="nx">card</span><span class="p">].</span><span class="nx">isStaged</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                <span class="nx">notStaged</span><span class="p">[</span><span class="nx">card</span><span class="p">].</span><span class="nx">isBack</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">cardRender</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">findCard</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">card</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// ++</span>
        <span class="k">return</span> <span class="p">[].</span><span class="nx">concat</span><span class="p">([...</span><span class="nx">cardStock</span><span class="p">],[].</span><span class="nx">concat</span><span class="p">(...</span><span class="nx">cardStack</span><span class="p">),[].</span><span class="nx">concat</span><span class="p">(...</span><span class="nx">cardPlaying</span><span class="p">)).</span><span class="nx">filter</span><span class="p">(</span><span class="nx">c</span><span class="o">=&gt;</span><span class="nx">c</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="nx">card</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">cardId</span><span class="p">).</span><span class="nx">pop</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="ì¹´ë“œ-ëª¨ìœ¼ê¸°-ë©”ì„œë“œ-cardcollect">ì¹´ë“œ ëª¨ìœ¼ê¸° ë©”ì„œë“œ cardCollect</h3>

<p><code class="language-plaintext highlighter-rouge">cardCollect</code>ë©”ì„œë“œëŠ” ì„ íƒí•œ ì¹´ë“œ ìš”ì†Œë¥¼ ë°ì´í„°ì—ì„œ ì°¾ì•„ ëª¨ì„ ìˆ˜ ìˆëŠ” ì¹´ë“œì¸ì§€ íŒë³„í•˜ê³  ì¹´ë“œë¥¼ ëª¨ìë‹ˆë‹¤. ì´ë•Œ <code class="language-plaintext highlighter-rouge">validNextCard</code>ë©”ì„œë“œë¡œ ì¹´ë“œ ë„˜ë²„ê°€ 1 ë˜ëŠ” ë§ˆì§€ë§‰ìœ¼ë¡œ ëª¨ì€ ì¹´ë“œë³´ë‹¤ <code class="language-plaintext highlighter-rouge">denomination(deno)</code>ì´ 1 ë†’ë‹¤ë©´ <code class="language-plaintext highlighter-rouge">true</code>ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">cardCollect</code>ì—ì„œ <code class="language-plaintext highlighter-rouge">validNextCard</code>ê°€ í†µê³¼ë˜ë©´ <code class="language-plaintext highlighter-rouge">stack</code>, <code class="language-plaintext highlighter-rouge">playing</code>ì€ 2ì°¨, <code class="language-plaintext highlighter-rouge">stock</code>ì€ 1ì°¨ ë°°ì—´ì´ê¸° ë•Œë¬¸ì— ë¶„ê¸°ë¬¸ìœ¼ë¡œ ì¹´ë“œë¥¼ ë½‘ëŠ” ë°©ì‹ì„ ë‹¬ë¦¬í•˜ê³ , ì¹´ë“œê°€ ì†í•œ ë¶€ëª¨ ë°°ì—´ì—ì„œ í•´ë‹¹ ì¹´ë“œë¥¼ ë½‘ì•„ <code class="language-plaintext highlighter-rouge">stack</code>ë°°ì—´ì— í•´ë‹¹í•˜ëŠ” <code class="language-plaintext highlighter-rouge">suit</code>ë¡œ <code class="language-plaintext highlighter-rouge">push</code>í•˜ê²Œ ë©ë‹ˆë‹¤.</p>

<p>ì´ì „ì— ë§Œë“¤ì—ˆë˜ ì†”ë¦¬í…Œì–´ì˜ ì¹´ë“œ ì˜®ê¸°ê¸° ë°©ì‹ì€ <code class="language-plaintext highlighter-rouge">temp</code>ë³€ìˆ˜ë¥¼ ë§Œë“¤ì–´ ì´ë™ì‹œì¼°ëŠ”ë° ìƒê°í•´ë³´ë‹ˆ ë³€ìˆ˜ë¥¼ ë§Œë“¤ í•„ìš”ê°€ ì—†ë‹¤ëŠ” ìƒê°ì´ ë“¤ì–´ ë³€ê²½í•˜ì˜€ìŠµë‹ˆë‹¤. ë³€ìˆ˜ë¥¼ ë§Œë“¤ì§€ ì•Šê³  ê°ì²´ì˜ ì†ì„±ì„ ì´ìš©í•´ì„œ <code class="language-plaintext highlighter-rouge">parent</code>ë¥¼ ë‘ë©´ ë” ì´ìš©ì— í­ì´ ë„“ì–´ì§„ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.</p>

<h3 id="ì¹´ë“œ-ë½‘ê¸°-ë©”ì„œë“œ-carddraw">ì¹´ë“œ ë½‘ê¸° ë©”ì„œë“œ cardDraw</h3>

<p><code class="language-plaintext highlighter-rouge">cardDraw</code>ëŠ” ì¹´ë“œì˜ <code class="language-plaintext highlighter-rouge">isStaged</code>ì†ì„±ì„ ì´ìš©í•´ êµ¬ë¶„í•©ë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">isStaged</code>ê°€ <code class="language-plaintext highlighter-rouge">true</code>ì´ë©´ ë½‘ì€ ì¹´ë“œ, ì•„ë‹ˆë©´ ì•„ì§ ë½‘ì§€ ì•Šì€ ì¹´ë“œì…ë‹ˆë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">cardDraw</code>ì˜ <code class="language-plaintext highlighter-rouge">notStaged</code>ëŠ” ë½‘ì§€ ì•Šì€ ì¹´ë“œ ì¤‘ ë§ˆì§€ë§‰ ì¹´ë“œë¥¼ ë’¤ì§‘ê³  <code class="language-plaintext highlighter-rouge">staged</code>ë¥¼ <code class="language-plaintext highlighter-rouge">true</code>ë¡œ ë³€ê²½í•˜ë©´ì„œ ì¹´ë“œë¥¼ ë½‘ëŠ” ê¸°ëŠ¥ì„ í•˜ê²Œ ë©ë‹ˆë‹¤. ì´ë ‡ê²Œ ë˜ë©´ ë’¤ì—ì„œë¶€í„° ì°¨ë¡€ë¡œ <code class="language-plaintext highlighter-rouge">staged</code>ë˜ê³  ì¹´ë“œë¥¼ ë½‘ëŠ” í˜•íƒœê°€ ë©ë‹ˆë‹¤.</p>

<p>ì´ì œ ì¹´ë“œì˜ ì •ë³´ ì¡°ì‘ì€ ì™„ë£Œë˜ì—ˆìœ¼ë‹ˆ ì¶œë ¥ ë‹¨ê³„ì…ë‹ˆë‹¤. ì½”ë“œê°€ ì´ì „ í¸ê³¼ ë‹¬ë¼ì§„ ì ì´ ìˆìœ¼ë‹ˆ í¬ìŠ¤íŒ… í•˜ë‹¨ì˜ <code class="language-plaintext highlighter-rouge">return</code>ë¶€ë¶„ì„ ì°¸ê³ í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">View</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">parts</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">options</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span> <span class="c1">// ++</span>
    <span class="kd">let</span> <span class="nx">elStock</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span> <span class="c1">// ++</span>
    <span class="kd">let</span> <span class="nx">elStack</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span> <span class="c1">// ++</span>
    <span class="kd">let</span> <span class="nx">elColumns</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span> <span class="c1">// ++</span>

    <span class="c1">// ... init, getparts</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">renderFrames</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="c1">// document.body.insertAdjacentHTML('afterbegin', parts.template.render());</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">insertAdjacentHTML</span><span class="p">(</span><span class="dl">'</span><span class="s1">afterbegin</span><span class="dl">'</span><span class="p">,</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">template</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">render</span><span class="p">());</span> <span class="c1">// ++</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">insertAdjacentHTML</span><span class="p">(</span><span class="dl">'</span><span class="s1">afterbegin</span><span class="dl">'</span><span class="p">,</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">template</span><span class="p">.</span><span class="nx">option</span><span class="p">.</span><span class="nx">render</span><span class="p">());</span> <span class="c1">// ++</span>

        <span class="nx">options</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">.title</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// ++</span>
        <span class="nx">elStock</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">.stock</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// ++</span>
        <span class="nx">elStack</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">.stack</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// ++</span>
        <span class="nx">elColumns</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">.ground .row:last-child</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// ++</span>

        <span class="nx">elStack</span><span class="p">.</span><span class="nx">insertAdjacentHTML</span><span class="p">(</span><span class="dl">'</span><span class="s1">beforeend</span><span class="dl">'</span><span class="p">,</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">template</span><span class="p">.</span><span class="nx">stack</span><span class="p">.</span><span class="nx">render</span><span class="p">());</span> <span class="c1">// ++</span>
        <span class="nx">elColumns</span><span class="p">.</span><span class="nx">insertAdjacentHTML</span><span class="p">(</span><span class="dl">'</span><span class="s1">beforeend</span><span class="dl">'</span><span class="p">,</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">template</span><span class="p">.</span><span class="nx">play</span><span class="p">.</span><span class="nx">render</span><span class="p">());</span> <span class="c1">// ++</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">cardDraw</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">cardStock</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// ++</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">clearStock</span><span class="p">(</span><span class="nx">elStock</span><span class="p">);</span>
        <span class="kd">const</span> <span class="nx">staged</span> <span class="o">=</span> <span class="nx">cardStock</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">s</span><span class="o">=&gt;</span><span class="nx">s</span><span class="p">.</span><span class="nx">isStaged</span><span class="p">);</span>
        <span class="kd">const</span> <span class="nx">notStaged</span> <span class="o">=</span> <span class="nx">cardStock</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">s</span><span class="o">=&gt;!</span><span class="nx">s</span><span class="p">.</span><span class="nx">isStaged</span><span class="p">);</span>
        <span class="nx">staged</span><span class="p">.</span><span class="nx">reverse</span><span class="p">().</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">s</span><span class="p">,</span> <span class="nx">idx</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
            <span class="nx">elStock</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">.stacking</span><span class="dl">'</span><span class="p">).</span><span class="nx">insertAdjacentHTML</span><span class="p">(</span><span class="dl">'</span><span class="s1">beforeend</span><span class="dl">'</span><span class="p">,</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">card</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">s</span><span class="p">));</span>
        <span class="p">});</span>

        <span class="p">[...</span><span class="nx">elStock</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">.stacking</span><span class="dl">'</span><span class="p">).</span><span class="nx">children</span><span class="p">].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">).</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">el</span><span class="p">,</span> <span class="nx">idx</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
            <span class="nx">el</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="p">(</span><span class="nx">idx</span><span class="o">*</span><span class="mi">30</span><span class="p">)</span><span class="o">+</span><span class="dl">'</span><span class="s1">px</span><span class="dl">'</span><span class="p">;</span>
        <span class="p">});</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">notStaged</span><span class="p">.</span><span class="nx">length</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span> <span class="nx">elStock</span><span class="p">.</span><span class="nx">firstElementChild</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="dl">'</span><span class="s1">stop</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">cardCollect</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">cardStack</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// ++</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">clearStack</span><span class="p">(</span><span class="nx">elStack</span><span class="p">);</span>
        <span class="nx">cardStack</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">stack</span><span class="o">=&gt;</span><span class="p">{</span>
            <span class="nx">stack</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">s</span><span class="p">,</span> <span class="nx">idx</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
                <span class="p">[...</span><span class="nx">elStack</span><span class="p">.</span><span class="nx">children</span><span class="p">][</span><span class="nx">parts</span><span class="p">.</span><span class="nx">card</span><span class="p">.</span><span class="nx">suits</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">$suit</span><span class="p">)].</span><span class="nx">insertAdjacentHTML</span><span class="p">(</span><span class="dl">'</span><span class="s1">beforeend</span><span class="dl">'</span><span class="p">,</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">card</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">s</span><span class="p">));</span>
            <span class="p">});</span>
        <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">cardPlaying</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">cardPlay</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// ++</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">clearPlaying</span><span class="p">(</span><span class="nx">elColumns</span><span class="p">);</span>
        <span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">col</span> <span class="k">in</span> <span class="nx">cardPlay</span><span class="p">){</span>
            <span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">row</span> <span class="k">in</span> <span class="nx">cardPlay</span><span class="p">[</span><span class="nx">col</span><span class="p">]){</span>
                <span class="p">[...</span><span class="nx">elColumns</span><span class="p">.</span><span class="nx">children</span><span class="p">][</span><span class="nx">col</span><span class="p">].</span><span class="nx">insertAdjacentHTML</span><span class="p">(</span><span class="dl">'</span><span class="s1">beforeend</span><span class="dl">'</span><span class="p">,</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">card</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">cardPlay</span><span class="p">[</span><span class="nx">col</span><span class="p">][</span><span class="nx">row</span><span class="p">]));</span>
                <span class="p">[...</span><span class="nx">elColumns</span><span class="p">.</span><span class="nx">children</span><span class="p">][</span><span class="nx">col</span><span class="p">].</span><span class="nx">lastElementChild</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="nx">row</span><span class="o">*</span><span class="mi">20</span><span class="o">+</span><span class="dl">'</span><span class="s1">px</span><span class="dl">'</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">cardRender</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">cardStock</span><span class="p">,</span> <span class="nx">cardPlay</span><span class="p">,</span> <span class="nx">cardStack</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// ++</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">cardPlaying</span><span class="p">(</span><span class="nx">cardPlay</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">cardCollect</span><span class="p">(</span><span class="nx">cardStack</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">cardDraw</span><span class="p">(</span><span class="nx">cardStock</span><span class="p">);</span> 
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">clearPlaying</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">el</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// ++</span>
        <span class="nx">el</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">template</span><span class="p">.</span><span class="nx">play</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">clearStack</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">el</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// ++</span>
        <span class="nx">el</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">template</span><span class="p">.</span><span class="nx">stack</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">clearStock</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">el</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// ++</span>
        <span class="nx">el</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">template</span><span class="p">.</span><span class="nx">stock</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ì¹´ë“œì˜ ì†ì„±ì¶”ê°€ë¡œ <code class="language-plaintext highlighter-rouge">return</code>í• ë•Œ ëª‡ê°€ì§€ ë‹¬ë¼ì§„ ì ì´ ìˆìŠµë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">renderFrames</code>ë©”ì„œë“œê°€ ê¸°ì¡´ì— ë‹¨ì¼ í…œí”Œë¦¿ì„ ì¶œë ¥í•˜ë˜ ë¶€ë¶„ì´ ì—¬ëŸ¬ ê°œë¡œ ë‚˜ë‰˜ì–´ ë Œë”ë©ë‹ˆë‹¤. ë Œë” í›„ì—ëŠ” <code class="language-plaintext highlighter-rouge">el*</code>ë³€ìˆ˜ì— ì—˜ë ˆë©˜íŠ¸ê°€ í• ë‹¹ë©ë‹ˆë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">cardDraw</code>ëŠ” <code class="language-plaintext highlighter-rouge">Model</code>ì—ì„œ <code class="language-plaintext highlighter-rouge">isStaged</code>ê°€ ë³€ê²½ëœ <code class="language-plaintext highlighter-rouge">cardStock</code>ì„ ë°›ìŠµë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">clearStock</code>ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">view</code>ë¥¼ ì´ˆê¸°í™” ì‹œí‚¤ê³  <code class="language-plaintext highlighter-rouge">staged</code>ë°°ì—´ì„ ì—­ìˆœìœ¼ë¡œ ì¶œë ¥ì‹œí‚¤ê³  ì¶œë ¥ëœ ìš”ì†Œì— <code class="language-plaintext highlighter-rouge">left</code> ìŠ¤íƒ€ì¼ ì†ì„±ì„ ì¤˜ì„œ ì¹´ë“œê°€ ê²¹ì¹˜ë©´ì„œ ì´ê²©ë˜ë„ë¡ í•©ë‹ˆë‹¤.</p>

<p>ë‚˜ì¤‘ì— ì¹´ë“œê°€ ë‹¤ ì†Œì§„ë˜ì—ˆì„ ë•Œë¥¼ ì¤€ë¹„í•´ì„œ ëª¨ë“  ì¹´ë“œê°€ <code class="language-plaintext highlighter-rouge">staged</code>ë˜ë©´ <code class="language-plaintext highlighter-rouge">stop</code>í´ë˜ìŠ¤ë¥¼ ë¶€ì—¬í•˜ë„ë¡ í•©ë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">stop</code>í´ë˜ìŠ¤ê°€ ë¶€ì—¬ë˜ë©´ <code class="language-plaintext highlighter-rouge">css</code>ë¡œ <code class="language-plaintext highlighter-rouge">pointer-events</code>ë¥¼ <code class="language-plaintext highlighter-rouge">none</code>í•˜ê±°ë‚˜ ì•„ê¹Œ ë§Œë“¤ì—ˆë˜ <code class="language-plaintext highlighter-rouge">controller</code>ì˜ì—­ì—ì„œ <code class="language-plaintext highlighter-rouge">stop</code>í´ë˜ìŠ¤ë¥¼ í•„í„°í•©ë‹ˆë‹¤. ì´ë¯¸ <code class="language-plaintext highlighter-rouge">card</code>ì™€ <code class="language-plaintext highlighter-rouge">front</code>ë§Œ ì„ ë³„í•˜ë¯€ë¡œ ë”°ë¡œ í•„í„° ì‘ì—…ì€ ì´ë ‡ê²Œ ë”°ë¼ì˜¤ì…¨ë‹¤ë©´ ì•ˆí•˜ì…”ë„ ë©ë‹ˆë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">cardCollect</code>ë„ <code class="language-plaintext highlighter-rouge">Model</code>ì—ì„œ ì²˜ë¦¬ëœ <code class="language-plaintext highlighter-rouge">cardStack</code>ì„ ë°›ìŠµë‹ˆë‹¤. ë˜‘ê°™ì´ <code class="language-plaintext highlighter-rouge">clear</code>ë©”ì„œë“œë¡œ ì´ˆê¸°í™”í•˜ê³  <code class="language-plaintext highlighter-rouge">cardStack</code>ì„ ìˆœíšŒí•´ì„œ ì»¬ëŸ¼ì„ ì–»ê³  ì»¬ëŸ¼ì„ ìˆœíšŒí•´ì„œ ì¹´ë“œì˜ <code class="language-plaintext highlighter-rouge">suit</code>ì •ë³´ë¡œ ìŠ¤íƒë˜ëŠ” ì»¬ëŸ¼ì˜ ì¸ë±ìŠ¤ë¥¼ ì°¾ì•„ <code class="language-plaintext highlighter-rouge">insert</code>í•©ë‹ˆë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">cardPlaying</code>ë©”ì„œë“œë„ <code class="language-plaintext highlighter-rouge">cardCollect</code>ì™€ ë§ˆì°¬ê°€ì§€ë¡œ ì»¬ëŸ¼ì„ ìˆœíšŒí•´ì„œ í•´ë‹¹ ì˜ì—­ì„ ë Œë”í•˜ê³  <code class="language-plaintext highlighter-rouge">cardDraw</code>ì™€ ê°™ì´ <code class="language-plaintext highlighter-rouge">top</code> ìŠ¤íƒ€ì¼ì„ ì¦ê°€ì‹œì¼œ ìœ„ì—ì„œ ì•„ë˜ë¡œ ê²¹ì¹˜ë„ë¡ í•©ë‹ˆë‹¤.</p>

<p>ì•ì„œ ë§ì”€ë“œë¦° <code class="language-plaintext highlighter-rouge">cardRender</code>ë©”ì„œë“œë¡œ ëª¨ë“  ì˜ì—­ì„ í•˜ë‚˜ì˜ ë©”ì„œë“œë¡œ ë Œë”ë§í•˜ë„ë¡ ë¬¶ìŠµë‹ˆë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">Model</code>ì˜ì—­ì—ì„œ ë°ì´í„° ë³€í™”ê°€ ìˆëŠ” ë©”ì„œë“œì—ì„œëŠ” ëª¨ë‘ <code class="language-plaintext highlighter-rouge">models.cardRender</code>ë¡œ í˜¸ì¶œí•˜ì—¬ <code class="language-plaintext highlighter-rouge">view</code>ë¥¼ ê³„ì† ì—…ë°ì´íŠ¸ í•©ë‹ˆë‹¤.</p>

<figure class="text-center">
<span class="w-inline-block">
   <img class="w-100" src="/assets/images/post/solitaire/solitaire03.png" alt="ê²°ê³¼ë¬¼" title="ê²°ê³¼ë¬¼" />
   <figcaption>í˜„ì¬ê¹Œì§€ ê²°ê³¼ë¬¼</figcaption>
</span>
</figure>

<p>ì—¬ê¸°ê¹Œì§€ ìœ„ ì´ë¯¸ì§€ì²˜ëŸ¼ aceë¶€í„° ì°¨ë¡€ë¡œ í•´ë‹¹ ìœ„ì¹˜ì— ìŠ¤íƒëœë‹¤ë©´ ì„±ê³µì…ë‹ˆë‹¤.</p>

<p>ì¹´ë“œë¥¼ ë½‘ìœ¼ë©´ í•˜ë‚˜ ì”© ë°€ë¦¬ë©´ì„œ ìµœëŒ€ 3ì¥ë§Œ ë³´ì—¬ì•¼í•©ë‹ˆë‹¤.</p>

<p>ì—¬ê¸°ê¹Œì§€ ì½ì–´ì£¼ì…¨ë‹¤ë©´ ê°ì‚¬ë“œë¦´ ë”°ë¦„ì…ë‹ˆë‹¤ğŸ˜</p>

<p>ë‹¤ìŒ í¬ìŠ¤íŒ… 3í¸ì—ì„œëŠ” ì•„ë˜ì˜ 3ê°€ì§€ë¥¼ êµ¬í˜„í•  ì˜ˆì •ì…ë‹ˆë‹¤.</p>

<ol>
  <li>ì¹´ë“œ ì´ë™ (ë¬¶ìŒ/ë‹¨ì¼)</li>
  <li>ì†”ë¦¬í…Œì–´ ê·œì¹™ ì ìš©</li>
  <li>ìë™ ì¹´ë“œ ë’¤ì§‘ê¸°</li>
</ol>

<p>ì•„ë˜ëŠ” ëª¨ë“ˆ íŒ¨í„´ì˜ <code class="language-plaintext highlighter-rouge">init</code>í•¨ìˆ˜ì˜ ë°”ë€ ë¶€ë¶„ì…ë‹ˆë‹¤. ì°¸ê³  ë°”ëë‹ˆë‹¤.</p>

<hr />

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="c1">// Controller, Model, View ...</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">const</span> <span class="nx">parts</span> <span class="o">=</span> <span class="p">{</span>
                <span class="na">card</span><span class="p">:</span> <span class="p">{</span>
                    <span class="c1">// suit, shape</span>
                    <span class="na">list</span><span class="p">:</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="mi">13</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">map</span><span class="p">((</span><span class="nx">num</span><span class="p">,</span> <span class="nx">idx</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">idx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span>
                    <span class="nx">render</span><span class="p">(</span><span class="nx">card</span><span class="p">)</span> <span class="p">{</span>
                        <span class="kd">const</span> <span class="nx">side</span> <span class="o">=</span> <span class="nx">card</span> <span class="p">?.</span><span class="nx">isBack</span> <span class="o">==</span> <span class="kc">undefined</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">empty</span><span class="dl">'</span> <span class="p">:</span> <span class="nx">card</span><span class="p">.</span><span class="nx">isBack</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">back</span><span class="dl">'</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">front</span><span class="dl">'</span><span class="p">;</span>
                        <span class="k">return</span> <span class="s2">`
                            &lt;div class="card </span><span class="p">${</span><span class="nx">side</span><span class="p">}</span><span class="s2">"
                            data-card-id="</span><span class="p">${</span><span class="nx">card</span><span class="p">?.</span><span class="nx">id</span><span class="p">??</span><span class="dl">'</span><span class="s1">-1</span><span class="dl">'</span><span class="p">}</span><span class="dl">"</span><span class="s2"> 
                            data-card-suit=</span><span class="dl">"</span><span class="nx">$</span><span class="p">{</span><span class="nx">card</span><span class="p">?.</span><span class="nx">$suit</span><span class="p">??</span><span class="dl">'</span><span class="s1">none</span><span class="dl">'</span><span class="p">}</span><span class="dl">"</span><span class="s2">
                            data-card-deno=</span><span class="dl">"</span><span class="nx">$</span><span class="p">{</span><span class="nx">card</span><span class="p">?.</span><span class="nx">deno</span><span class="p">??</span><span class="dl">'</span><span class="s1">none</span><span class="dl">'</span><span class="p">}</span><span class="dl">"</span><span class="s2">
                            style=</span><span class="dl">"</span><span class="nx">background</span><span class="o">-</span><span class="nx">image</span><span class="p">:</span> <span class="nx">url</span><span class="p">(</span><span class="dl">'</span><span class="s1">./src/img/${card.imgNum}_of_${card.imgSuit}.png</span><span class="dl">'</span><span class="p">)</span><span class="dl">"</span><span class="s2">&gt;
                            &lt;/div&gt;
                        ` // ++ img ê°€ ì¶”ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.
                    }
                },
                template: {
                    // ++ ê¸°ì¡´ templateì˜ score ë“±ì˜ ë¶€ë¶„ ë¶„ë¦¬
                    option: {
                        render(){
                            return `&lt;div class=</span><span class="dl">"</span><span class="nx">title</span><span class="dl">"</span><span class="s2"> style=</span><span class="dl">"</span><span class="nx">margin</span><span class="o">-</span><span class="nx">bottom</span><span class="p">:</span> <span class="mi">3</span><span class="nx">em</span><span class="p">;</span> <span class="nl">width</span><span class="p">:</span> <span class="mi">90</span><span class="o">%</span><span class="p">;</span><span class="dl">"</span><span class="s2">&gt;
                            &lt;div align=</span><span class="dl">"</span><span class="nx">center</span><span class="dl">"</span><span class="s2"> style=</span><span class="dl">"</span><span class="nx">margin</span><span class="o">-</span><span class="nx">bottom</span><span class="p">:</span> <span class="mi">1</span><span class="nx">em</span><span class="p">;</span> <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="p">:</span> <span class="mi">150</span><span class="o">%</span><span class="p">;</span><span class="dl">"</span><span class="s2">&gt;Solitaire&lt;/div&gt;
                            &lt;div style=</span><span class="dl">"</span><span class="nx">display</span><span class="p">:</span> <span class="nx">flex</span><span class="p">;</span> <span class="nx">justify</span><span class="o">-</span><span class="nx">content</span><span class="p">:</span> <span class="nx">space</span><span class="o">-</span><span class="nx">between</span><span class="p">;</span><span class="dl">"</span><span class="s2">&gt;
                                &lt;span&gt;
                                    &lt;span&gt;Score&lt;/span&gt;
                                    &lt;span class=</span><span class="dl">"</span><span class="nx">score</span><span class="dl">"</span><span class="s2">&gt;0&lt;/span&gt;
                                &lt;/span&gt;
                                &lt;span&gt;
                                    &lt;span&gt;Moved&lt;/span&gt;
                                    &lt;span class=</span><span class="dl">"</span><span class="nx">moved</span><span class="dl">"</span><span class="s2">&gt;0&lt;/span&gt;
                                &lt;/span&gt;
                                &lt;span&gt;
                                    &lt;span&gt;Time&lt;/span&gt;
                                    &lt;span class=</span><span class="dl">"</span><span class="nx">time</span><span class="dl">"</span><span class="s2">&gt;0&lt;/span&gt;
                                &lt;/span&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;`;
                        }
                    },
                    // ++ groundë‚´ì˜ stockë¶€ë¶„ ë¶„ë¦¬
                    stock: {
                        render(){
                            return `
                            &lt;div class=</span><span class="dl">"</span><span class="nx">card</span> <span class="nx">back</span><span class="dl">"</span><span class="s2">&gt;&lt;/div&gt;
                            &lt;div class=</span><span class="dl">"</span><span class="nx">stacking</span><span class="dl">"</span><span class="s2">&gt;
                                &lt;div class=</span><span class="dl">"</span><span class="nx">card</span><span class="dl">"</span><span class="s2">&gt;&lt;/div&gt;
                            &lt;/div&gt;
                            `;
                        }
                    },
                    // ++ groundë‚´ì˜ stackë¶€ë¶„ ë¶„ë¦¬
                    stack: {
                        render(){
                            return `
                            &lt;div class=</span><span class="dl">"</span><span class="nx">stacking</span><span class="dl">"</span><span class="s2">&gt;
                                &lt;div class=</span><span class="dl">"</span><span class="nx">card</span><span class="dl">"</span><span class="s2">&gt;&lt;/div&gt;
                            &lt;/div&gt;
                            &lt;div class=</span><span class="dl">"</span><span class="nx">stacking</span><span class="dl">"</span><span class="s2">&gt;
                                &lt;div class=</span><span class="dl">"</span><span class="nx">card</span><span class="dl">"</span><span class="s2">&gt;&lt;/div&gt;
                            &lt;/div&gt;
                            &lt;div class=</span><span class="dl">"</span><span class="nx">stacking</span><span class="dl">"</span><span class="s2">&gt;
                                &lt;div class=</span><span class="dl">"</span><span class="nx">card</span><span class="dl">"</span><span class="s2">&gt;&lt;/div&gt;
                            &lt;/div&gt;
                            &lt;div class=</span><span class="dl">"</span><span class="nx">stacking</span><span class="dl">"</span><span class="s2">&gt;
                                &lt;div class=</span><span class="dl">"</span><span class="nx">card</span><span class="dl">"</span><span class="s2">&gt;&lt;/div&gt;
                            &lt;/div&gt;
                            `;
                        }
                    },
                    // ++ groundë‚´ì˜ playë¶€ë¶„ ë¶„ë¦¬
                    play: {
                        render(){
                            const column = `&lt;div class=</span><span class="dl">"</span><span class="nx">stacking</span><span class="dl">"</span><span class="s2">&gt;
                                &lt;div class=</span><span class="dl">"</span><span class="nx">card</span><span class="dl">"</span><span class="s2">&gt;&lt;/div&gt;
                            &lt;/div&gt;`;
                            return new Array(7).fill(column).join('');
                        }
                    },
                    // ++ groundë‚´ì˜ í‹€ë¶€ë¶„ ë¶„ë¦¬
                    frame: {
                        render(){
                            return `
                            &lt;div id=</span><span class="dl">"</span><span class="nx">app</span><span class="dl">"</span><span class="s2">&gt;
                                &lt;div class=</span><span class="dl">"</span><span class="nx">ground</span><span class="dl">"</span><span class="s2">&gt;
                                    &lt;div class=</span><span class="dl">"</span><span class="nx">row</span><span class="dl">"</span><span class="s2">&gt;
                                        &lt;div class=</span><span class="dl">"</span><span class="nx">stock</span><span class="dl">"</span><span class="s2">&gt;
                                        &lt;/div&gt;
                                        &lt;div class=</span><span class="dl">"</span><span class="nx">stack</span><span class="dl">"</span><span class="s2">&gt;
                                        &lt;/div&gt;
                                    &lt;/div&gt;
                                    &lt;div class=</span><span class="dl">"</span><span class="nx">row</span><span class="dl">"</span><span class="s2">&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                            `;
                        }
                    }
                }
            }
    
            // instance, init ...
        }
    }
})().init();
</span></code></pre></div></div>

<hr />

<p>ğŸ“š í•¨ê»˜ ë³´ë©´ ì¢‹ì€ ë‚´ìš©</p>

<p><a href="/javascript-solitaire01" target="_blank">DevKimson::[JAVASCRIPT] Solitaireë¥¼ ë§Œë“¤ì–´ ë³´ì 01</a></p>

<p><a href="/javascript-solitaire03" target="_blank">DevKimson::[JAVASCRIPT] Solitaireë¥¼ ë§Œë“¤ì–´ ë³´ì 03</a></p>
:ET