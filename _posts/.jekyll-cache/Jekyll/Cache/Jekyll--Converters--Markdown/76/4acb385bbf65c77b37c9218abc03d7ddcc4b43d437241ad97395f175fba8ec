I"¾<h1 id="refererë€">refererë€</h1>

<p>Referer ìš”ì²­ í—¤ë”ëŠ” ì–´ë””ì—ì„œ ì‚¬ìš©ìê°€ ìœ ì…ë˜ì—ˆëŠ”ì§€ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">#blah</code>ë‚˜ <code class="language-plaintext highlighter-rouge">username</code>, <code class="language-plaintext highlighter-rouge">password</code>ëŠ” í¬í•¨ í•  ìˆ˜ ì—†ë‹¤ê³  í•©ë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">origin</code>, <code class="language-plaintext highlighter-rouge">path</code>, <code class="language-plaintext highlighter-rouge">queryë¬¸</code>ë“±ì´ í¬í•¨ëœë‹¤ê³  í•˜ë‹ˆ ì˜ ì‚¬ìš©í•˜ë©´ ìœ ìš©í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>

<p><a href="https://developer.mozilla.org/ko/docs/Web/HTTP/Headers/Referer" target="_blank">MDN Referer ì°¸ê³ </a></p>

<h2 id="referer-policy-ì•Œì•„ë‘ê¸°">referer Policy ì•Œì•„ë‘ê¸°</h2>

<ol>
  <li>Referrer-Policy: no-referrer</li>
  <li>Referrer-Policy: no-referrer-when-downgrade</li>
  <li>Referrer-Policy: origin</li>
  <li>Referrer-Policy: origin-when-cross-origin</li>
  <li>Referrer-Policy: same-origin</li>
  <li>Referrer-Policy: strict-origin</li>
  <li>Referrer-Policy: strict-origin-when-cross-origin</li>
  <li>Referrer-Policy: unsafe-url</li>
</ol>

<p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Referrer-Policy" target="_blank">MDN Referrer-Policy ì°¸ê³ </a></p>

<p>ìì„¸í•œ ë‚´ìš©ì€ ë‹¤ìŒì— ë³´ì¶©í•´ì„œ ì˜¬ë¦´ ì˜ˆì •ì…ë‹ˆë‹¤. ë‹¤ë§Œ ì´ ì¤‘ì—ì„œ <code class="language-plaintext highlighter-rouge">strict-origin-when-cross-origin</code>ì€ ì˜¤ëŠ˜ ê²ªì—ˆë˜ ë‚´ìš©ì„ ì•Œë ¤ë“œë¦¬ìë©´, ê°™ì€ í˜ì´ì§€ì—ì„œ <code class="language-plaintext highlighter-rouge">referer</code>ë¥¼ ë°›ì„ ë•Œ <code class="language-plaintext highlighter-rouge">null</code>ê°’ì„ ë±‰ì–´ ë‚´ëŠ” ì ì…ë‹ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ì˜ˆì œì…ë‹ˆë‹¤.</span>

<span class="c1">// annotations ...</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestController</span> <span class="o">{</span>
	<span class="c1">// ...</span>
	<span class="nd">@ModelAttribute</span><span class="o">(</span><span class="s">"referer"</span><span class="o">)</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">getReferer</span><span class="o">(</span><span class="nc">HttpSession</span> <span class="n">session</span><span class="o">){</span>
		<span class="k">return</span> <span class="n">session</span><span class="o">.</span><span class="na">getHeader</span><span class="o">(</span><span class="s">"referer"</span><span class="o">)</span>
		<span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="n">session</span><span class="o">.</span><span class="na">getHeader</span><span class="o">(</span><span class="s">"host"</span><span class="o">))[</span><span class="mi">1</span><span class="o">];</span>
	<span class="o">}</span>
	<span class="c1">// ...</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ëŒ€ì¶© ìœ„ì˜ ìƒí™©ì´ì—ˆìŠµë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">referer</code>ì„ ì°¸ì¡°í•´ì„œ ë¡œê·¸ì¸ í•˜ê³  ë‚œ í›„ ì´ì „ì— ìˆë˜ í˜ì´ì§€ë¡œ <code class="language-plaintext highlighter-rouge">redirect</code>í•˜ë ¤ëŠ”ë° ì˜ë„ì¹˜ì•Šê²Œ 500 ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>

<p>ê°™ì€ í˜ì´ì§€ì—ì„œ ìƒˆë¡œê³ ì¹¨ í•  ë•Œë§ˆë‹¤ ì—ëŸ¬ê°€ ë‚˜ì„œ <code class="language-plaintext highlighter-rouge">referer</code>ë¬¸ì œì¸ ê²ƒ ê°™ì•„ ì½˜ì†” ì°ì–´ë³´ë‹ˆ <code class="language-plaintext highlighter-rouge">null</code>ê°’ì´ ë–´ìŠµë‹ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// annotations ...</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestController</span> <span class="o">{</span>
	<span class="c1">// ...</span>
	<span class="nd">@ModelAttribute</span><span class="o">(</span><span class="s">"referer"</span><span class="o">)</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">getReferer</span><span class="o">(</span><span class="nc">HttpSession</span> <span class="n">session</span><span class="o">){</span>
		<span class="k">if</span><span class="o">(</span><span class="n">session</span><span class="o">.</span><span class="na">getHeader</span><span class="o">(</span><span class="s">"referer"</span><span class="o">)!=</span><span class="kc">null</span><span class="o">){</span>
			<span class="k">return</span> <span class="n">session</span><span class="o">.</span><span class="na">getHeader</span><span class="o">(</span><span class="s">"referer"</span><span class="o">)</span>
			<span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="n">session</span><span class="o">.</span><span class="na">getHeader</span><span class="o">(</span><span class="s">"host"</span><span class="o">))[</span><span class="mi">1</span><span class="o">];</span>
		<span class="o">}</span>
		<span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="c1">// ...</span>
<span class="o">}</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">null</code>ê°’ì„ í•œ ë²ˆ ê±¸ëŸ¬ì£¼ê³  ì“°ëŠ” ë°©ì‹ìœ¼ë¡œ ì“°ê³ ëŠ” ìˆìŠµë‹ˆë‹¤ë§Œ, ë‹¤ë¥¸ ë¶„ì˜ ë¹„ìŠ·í•œ ì½”ë“œë¼ë„ ë´ì•¼ ì–´ë–»ê²Œ ì“°ëŠ” ê²Œ ë§ëŠ”ì§€ ì•Œ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì§€ê¸ˆì€ ì´ë ‡ê²Œ ì“°ëŠ” ê±¸ë¡œâ€¦</p>

<h2 id="refererì˜-ì“°ì„">refererì˜ ì“°ì„</h2>

<p>ê´€ë ¨ ê¸€ë“¤ì„ ì½ë‹¤ë³´ë‹ˆ refererê°€ êµ‰ì¥íˆ ì¤‘ìš”í•œ ìš”ì†Œì˜€ê³ , ë³´ì•ˆê³¼ ë§ì´ ê´€ë ¨ë˜ì–´ ìˆëŠ” ê²ƒì„ ì•Œì•˜ìŠµë‹ˆë‹¤. refererì˜ ì“°ì„ì— ëŒ€í•´ì„œëŠ” ë” ê³µë¶€í•´ë³¼ ìƒê°ì…ë‹ˆë‹¤.</p>

<hr />
:ET