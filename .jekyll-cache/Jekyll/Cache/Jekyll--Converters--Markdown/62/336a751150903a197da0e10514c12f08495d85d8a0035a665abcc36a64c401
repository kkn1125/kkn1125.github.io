I"¥#<h1 id="xml-ì—†ëŠ”-í”„ë¡œì íŠ¸">xml ì—†ëŠ” í”„ë¡œì íŠ¸</h1>

<p>ê½¤ ì˜¤ë«ë™ì•ˆ ë¬µí˜€ë’€ë˜ ì£¼ì œì˜€ìŠµë‹ˆë‹¤. Spring ì±…ì„ ë³´ë©´ì„œ ìµœê·¼ web.xml(context-*.xml ë“±) íŒŒì¼ ì—†ì´ ìë°”í™” í•œë‹¤ëŠ” ì¶”ì„¸ë¼ëŠ” ë¬¸êµ¬ë¥¼ ë³´ê³  ë¬´ì‘ì • ë”°ë¼í–ˆë˜ ê¸°ì–µì´ ë‚©ë‹ˆë‹¤.<br />
ê·¸ ì˜í–¥ì— í˜„ì¬ë„ xmlíŒŒì¼ ì—†ì´ êµ¬í˜„ ì¤‘ì— ìˆìŠµë‹ˆë‹¤.</p>

<p>ì´ëŸ¬í•œ ë ˆí¼ëŸ°ìŠ¤ê°€ ì˜¤ëœì‹œê°„ ìŒ“ì¸ê²Œ ì•„ë‹ˆê¸°ë•Œë¬¸ì— ì˜¤ë¥˜ì™€ ì§ë©´í• ë•Œë§ˆë‹¤ ì™¸êµ­ ëª¨ì‚¬ì´íŠ¸ì— ë¹„ìŠ·í•œ ì˜ë…¼ì„ ì°¾ì•„ ì˜ì–´ ë²ˆì—­ì—ë§Œ ë‘ì‹œê°„ ìŸê¸°ë„ í•©ë‹ˆë‹¤.</p>

<p>ê·¸ë˜ì„œ ì €ì™€ ê°™ì€ ì´ˆë³´ì˜ ì…ì¥ì—ì„œ ë¹„ìŠ·í•œ ë¬¸ì œë¡œ ê³ ë¯¼í•˜ê³  ìˆëŠ” ë¶„ë“¤ê»˜ ì•Œë¦¬ê³ , ì œ ë‚˜ë¦„ì˜ ê¸°ë¡ì„ í•´ë†“ê³ ì í•©ë‹ˆë‹¤.</p>

<h2 id="error-page-ì²˜ë¦¬">Error Page ì²˜ë¦¬</h2>

<blockquote>
  <p><strong>ì‘ì—… í™˜ê²½</strong></p>
  <ul>
    <li>spring legacy project</li>
    <li>springframework 5.3.6</li>
    <li>jackson data bind</li>
    <li>junit</li>
    <li>spring test</li>
    <li>tiles</li>
    <li>tomcat 9.0.43</li>
  </ul>
</blockquote>

<p>ì™¸êµ­ ì‚¬ì´íŠ¸ì—ì„œ ì°¾ì€ ë‚´ìš©ì„ í† ëŒ€ë¡œ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì„ ì•Œë ¤ë“œë¦¬ê² ìŠµë‹ˆë‹¤.</p>

<p>ì•„ë˜ëŠ” í˜„ì¬ í…ŒìŠ¤íŠ¸ìš© í”„ë¡œì íŠ¸ì˜ íŒŒì¼êµ¬ì¡°ì…ë‹ˆë‹¤.</p>

<p><img src="/assets/images/post/exception/exception01.png" alt="ì‘ì—…í™˜ê²½" /></p>

<p>exception ì²˜ë¦¬ í•˜ê¸°ìœ„í•´ testí´ë”ì— íŒŒì¼ì„ ë‘ê°œ ë§Œë“­ë‹ˆë‹¤.</p>

<ol>
  <li>errorPage(ì—ëŸ¬í˜ì´ì§€ ì´ë™ ë§í¬ê°€ ìˆëŠ” í˜ì´ì§€)</li>
  <li>404 â€¦ ì²˜ë¦¬ë¡œ ëœ¨ëŠ” í˜ì´ì§€</li>
</ol>

<p>ë¬¼ë¡  web.xmlê³¼ context-*.xmlì€ txtí˜•ì‹ìœ¼ë¡œ ë°”ê¿” ë°±ì—…ì„ í•´ ë‘ê³  ìœ„ ê·¸ë¦¼ì˜ webconfig.javaê°€ web.xmlì„ ëŒ€ì‹ í•˜ê³  ìˆìŠµë‹ˆë‹¤.<br />
ì´ ë°©ì‹ì„ ê¾¸ì¤€íˆ ì“°ë‹¤ë³´ë‹ˆ ì´ê²Œ ë” ìµìˆ™í•´ì¡ŒìŠµë‹ˆë‹¤.</p>

<h3 id="exception-í˜ì´ì§€-ì²˜ë¦¬">Exception í˜ì´ì§€ ì²˜ë¦¬</h3>

<p>ì•„ë¬´ëŸ° ì²˜ë¦¬ë¥¼ í•˜ì§€ ì•Šìœ¼ë©´ í”íˆ ë³´ëŠ” ì¹œì ˆ?í•˜ê²Œ ì—ëŸ¬ë¥¼ í‘œì‹œí•˜ëŠ” í˜ì´ì§€ê°€ ë‚˜ì˜µë‹ˆë‹¤.</p>

<p><img src="/assets/images/post/exception/exception02.png" alt="ì¹œì ˆí•œ ì—ëŸ¬í˜ì´ì§€" /></p>

<p>ì›¹í˜ì´ì§€ ë³´ì•ˆìƒ ë„ˆë¬´ ì¹œì ˆí•˜ê²Œ ì •ë³´ë¥¼ ì•Œë ¤ì£¼ë©´ ìœ„í—˜í•˜ë‹ˆ ì–¼ë¥¸ ë°”ê¾¸ì–´ ë´…ì‹œë‹¤.</p>

<p>ìš°ì„  ì—ëŸ¬ ì½”ë“œê°€ ë‹´ê¸°ëŠ” JsoníŒŒì¼ì„ ë§Œë“¤ê² ìŠµë‹ˆë‹¤.
ì—ëŸ¬ì½”ë“œì™€ ë¬¸êµ¬ë¥¼ ë¯¸ë¦¬ ë§Œë“¤ì–´ ë†“ê³  ExceptionErrorë¼ëŠ” voë¥¼ ë§Œë“¤ì–´ ê´€ë¦¬í•˜ê² ìŠµë‹ˆë‹¤.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="rouge-code"><pre><span class="p">{</span><span class="w">	
	</span><span class="nl">"403"</span><span class="p">:{</span><span class="w">
		</span><span class="nl">"status"</span><span class="p">:</span><span class="s2">"403"</span><span class="p">,</span><span class="w">
		</span><span class="nl">"code"</span><span class="p">:</span><span class="s2">"Forbidden"</span><span class="p">,</span><span class="w">
		</span><span class="nl">"reason"</span><span class="p">:</span><span class="s2">"ì˜ëª»ëœ ì ‘ê·¼ì…ë‹ˆë‹¤.&lt;a href='/' class='btn btn-info'&gt;ë©”ì¸ìœ¼ë¡œ&lt;/a&gt;"</span><span class="p">,</span><span class="w">
		</span><span class="nl">"message"</span><span class="p">:</span><span class="s2">"í˜ì´ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."</span><span class="w">
	</span><span class="p">},</span><span class="w">
	</span><span class="nl">"404"</span><span class="p">:{</span><span class="w">
		</span><span class="nl">"status"</span><span class="p">:</span><span class="s2">"404"</span><span class="p">,</span><span class="w">
		</span><span class="nl">"code"</span><span class="p">:</span><span class="s2">"Not Found"</span><span class="p">,</span><span class="w">
		</span><span class="nl">"reason"</span><span class="p">:</span><span class="s2">"í˜ì´ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.&lt;a href='/' class='btn btn-info'&gt;ë©”ì¸ìœ¼ë¡œ&lt;/a&gt;"</span><span class="p">,</span><span class="w">
		</span><span class="nl">"message"</span><span class="p">:</span><span class="s2">"í˜ì´ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."</span><span class="w">
	</span><span class="p">},</span><span class="w">
	</span><span class="nl">"500"</span><span class="p">:{</span><span class="w">
		</span><span class="nl">"status"</span><span class="p">:</span><span class="s2">"500"</span><span class="p">,</span><span class="w">
		</span><span class="nl">"code"</span><span class="p">:</span><span class="s2">"Internal Server"</span><span class="p">,</span><span class="w">
		</span><span class="nl">"reason"</span><span class="p">:</span><span class="s2">"í˜ì´ì§€ë¥¼ ì²˜ë¦¬í•˜ëŠ”ë° ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì˜¤ë¥˜ê°€ ì§€ì†ëœë‹¤ë©´ ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•´ì£¼ì„¸ìš”."</span><span class="p">,</span><span class="w">
		</span><span class="nl">"message"</span><span class="p">:</span><span class="s2">""</span><span class="w">
	</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p>ê°„ë‹¨í•˜ê²Œ ì£¼ë¡œ ë°œìƒí•˜ëŠ” 3ê°€ì§€ ì½”ë“œë¥¼ ì ì–´ë‘ì—ˆìŠµë‹ˆë‹¤.<br />
ì´ì œ jsonì„ ë‚˜ì¤‘ì— ë¶ˆëŸ¬ì™€ íŒŒì‹±í•˜ê³  ê°ì²´ì— ë‹´ì•„ ì „ì†¡í•  ê²ƒì…ë‹ˆë‹¤.</p>

<p>ë‹¤ìŒì€ ì—ëŸ¬ì½”ë“œë¥¼ ë°›ëŠ” voë¥¼ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ExceptionError</span>
<span class="o">{</span>
	<span class="kd">private</span> <span class="kt">int</span> <span class="n">status</span><span class="o">;</span> <span class="c1">// 404, 500 ...</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">code</span><span class="o">;</span> <span class="c1">// Not found</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">reason</span><span class="o">;</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">message</span><span class="o">;</span>
	
	<span class="kd">public</span> <span class="nf">ExceptionError</span><span class="o">(</span><span class="kt">int</span> <span class="n">status</span><span class="o">,</span> <span class="nc">String</span> <span class="n">code</span><span class="o">,</span> <span class="nc">String</span> <span class="n">reason</span><span class="o">,</span> <span class="nc">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
		<span class="kd">super</span><span class="o">();</span>
		<span class="k">this</span><span class="o">.</span><span class="na">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">code</span> <span class="o">=</span> <span class="n">code</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">reason</span> <span class="o">=</span> <span class="n">reason</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">message</span> <span class="o">=</span> <span class="n">message</span><span class="o">;</span>
	<span class="o">}</span>

    <span class="c1">// getter,setter ...</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="rouge-code"><pre>
```java
@EnableWebMvc
@Configuration
@ComponentScan(basePackages = {"com.practicePrj.web"})
public class WebConfig extends AbstractAnnotationConfigDispatcherServletInitializer
{

    // RootConfig.class ... 
    // ServletConfig.class ...

    @Override // ì—ëŸ¬ ì²˜ë¦¬ë¥¼ ìœ„í•´ í•„ìš”í•œ ë””ìŠ¤íŒ¨ì²˜ ìƒì„±
    protected DispatcherServlet createDispatcherServlet(WebApplicationContext servletAppContext) {
        final DispatcherServlet dispatcherServlet = (DispatcherServlet) super.createDispatcherServlet(servletAppContext);
        dispatcherServlet.setThrowExceptionIfNoHandlerFound(true);
        return dispatcherServlet;
    }

}
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ì—ëŸ¬ í˜ì´ì§€ ì²˜ë¦¬í•  ì¤€ë¹„ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì œ ControllerAdvisor ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ê³µí†µ ìµì…‰ì…˜ ì²˜ë¦¬ë¥¼ êµ¬í˜„í•˜ê³  ExceptionHandlerë¥¼ ì‚¬ìš©í•´ì„œ ê° ì—ëŸ¬ì½”ë“œë³„ë¡œ ë‹¤ë¥¸ ë‚´ìš©ì„ ì¶œë ¥í•˜ë„ë¡ í•©ì‹œë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>
</pre></td></tr></tbody></table></code></pre></div></div>
:ET