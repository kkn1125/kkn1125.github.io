I"ñ:<h1 id="iterable-ì•Œì•„ë³´ê¸°">Iterable ì•Œì•„ë³´ê¸°</h1>

<h2 id="iteration-protocols">Iteration Protocols</h2>

<blockquote>
  <p>ECMAScript 2015(ES6)ì— ì¶”ê°€ë˜ì—ˆìœ¼ë©° 2ê°œì˜ protocolì´ ìˆìŠµë‹ˆë‹¤.</p>

  <p>ë¨¼ì € ì‹¬ë³¼ì— ëŒ€í•´ ì•Œì•„ë³´ë ¤í•©ë‹ˆë‹¤. ì´ì „ì— íˆ¬ë‘ë¦¬ìŠ¤íŠ¸ì— ì˜¬ë ¤ë‘ì—ˆë˜ <code class="language-plaintext highlighter-rouge">Iterable</code>ì€ <code class="language-plaintext highlighter-rouge">Object.defineProperty</code>ë¥¼ ì‚¬ìš©í•˜ë‹¤ê°€ Enumerableê³¼ í•¨ê»˜ ì„¤ëª…í•˜ë ¤ê³  ì²´í¬í•´ë‘ì—ˆëŠ”ë° ì´ì œì•¼ ì‘ì„±í•˜ê²Œ ë©ë‹ˆë‹¤.</p>
</blockquote>

<ol>
  <li>iterable protocol</li>
  <li>iterator protocol</li>
</ol>

<p>í° ì£¼ì œëŠ” Iterationì…ë‹ˆë‹¤. iterationë™ì‘ì„ ì •ì˜ë‚˜, for..ofì˜ loop, ì‚¬ìš©ì ì •ì˜ ë“±ì„ í—ˆìš©í•©ë‹ˆë‹¤. ê·¸ ì•ˆì— ì£¼ìš”í•œ ê°œë…ì¸ 2ê°œì˜ protocolì´ ìˆìŠµë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">Iterator(ë°˜ë³µì)</code>ì™€ <code class="language-plaintext highlighter-rouge">Iterable(ë°˜ë³µê°€ëŠ¥í•œ)</code>ì¸ë°ìš”.</p>

<p>ì–´ë–¤ ë‚´ìš©ì¸ì§€ ì²œì²œíˆ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.</p>

<h3 id="iterable-protocol">Iterable protocol</h3>

<p><code class="language-plaintext highlighter-rouge">iterable protocol</code>ì€ <code class="language-plaintext highlighter-rouge">javascript</code>ê°ì²´ë“¤ì´ for..of êµ¬ì¡°ì—ì„œ <code class="language-plaintext highlighter-rouge">iteration</code>ë™ì‘ì„ ì •ì˜í•˜ê±°ë‚˜ ì‚¬ìš©ì ì •ì˜í•˜ëŠ” ê²ƒì„ í—ˆìš©í•©ë‹ˆë‹¤.</p>

<p>ì¦‰, <code class="language-plaintext highlighter-rouge">iterable</code>í•œ ê°ì²´ë¼ëŠ” ê²ƒì€ <code class="language-plaintext highlighter-rouge">@@iterator</code>ë©”ì„œë“œë¥¼ êµ¬í˜„í•´ì•¼í•˜ë©°, <code class="language-plaintext highlighter-rouge">object</code> ë˜ëŠ” <code class="language-plaintext highlighter-rouge">prototype chain</code> ì˜¤ë¸Œì íŠ¸ ì¤‘ í•˜ë‚˜ê°€ <code class="language-plaintext highlighter-rouge">Symbol.iterator</code> key ì†ì„±ì„ ê°€ì ¸ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•˜ê³ , ìê¸°ìì‹ (<code class="language-plaintext highlighter-rouge">iterator</code>)ë¥¼ ë¦¬í„´í•´ì•¼í•©ë‹ˆë‹¤.</p>

<blockquote>
  <p>ì°¸ê³ ë¡œ @@iteratorëŠ” ë©”ì„œë“œì´ê¸°ë•Œë¬¸ì— í•¨ìˆ˜í˜¸ì¶œêµ¬ë¬¸ìœ¼ë¡œ ì ìŠµë‹ˆë‹¤.</p>
</blockquote>

<h4 id="ì‚¬ìš©ì˜ˆì œ">ì‚¬ìš©ì˜ˆì œ</h4>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">someWords</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">im a test</span><span class="dl">"</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">someWord</span><span class="p">[</span><span class="nb">Symbol</span><span class="p">.</span><span class="nx">iterator</span><span class="p">]);</span> <span class="c1">// function</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">someWord</span><span class="p">[</span><span class="nb">Symbol</span><span class="p">.</span><span class="nx">iterator</span><span class="p">]());</span> <span class="c1">// StringIteratorÂ {}</span>

<span class="kd">let</span> <span class="nx">iterator1</span> <span class="o">=</span> <span class="nx">someWords</span><span class="p">[</span><span class="nb">Symbol</span><span class="p">.</span><span class="nx">iterator</span><span class="p">]();</span>
<span class="c1">// iteratorë¥¼ ë³€ìˆ˜ì— ë‹´ì§€ì•Šê³  ê·¸ëŒ€ë¡œ .ì°ì–´ì„œ ì¶œë ¥í•˜ë©´ ì •ìƒì‹¤í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</span>

<span class="c1">// ì˜ëª»ëœ ì‚¬ìš© âŒ</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">someWords</span><span class="p">[</span><span class="nb">Symbol</span><span class="p">.</span><span class="nx">iterator</span><span class="p">]().</span><span class="nx">next</span><span class="p">())</span> <span class="c1">// {value: "i", done: false}</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">someWords</span><span class="p">[</span><span class="nb">Symbol</span><span class="p">.</span><span class="nx">iterator</span><span class="p">]().</span><span class="nx">next</span><span class="p">())</span> <span class="c1">// {value: "i", done: false}</span>

<span class="c1">// ì˜¬ë°”ë¥¸ ì‚¬ìš© âœ…</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">iterator1</span><span class="p">.</span><span class="nx">next</span><span class="p">())</span> <span class="c1">// {value: "i", done: false}</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">iterator1</span><span class="p">.</span><span class="nx">next</span><span class="p">())</span> <span class="c1">// {value: "m", done: false}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ìœ„ì˜ ì½”ë“œëŠ” <code class="language-plaintext highlighter-rouge">String</code>ì˜ <code class="language-plaintext highlighter-rouge">built-in</code> <code class="language-plaintext highlighter-rouge">iterable</code>ê°ì²´ì˜ ì˜ˆì‹œì…ë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">String</code>ì€ ê¸°ë³¸ì ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">iterable</code>í•©ë‹ˆë‹¤.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">test</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">kimson</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">tomson</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">tomcat</span><span class="dl">'</span><span class="p">];</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arr</span><span class="p">.</span><span class="nx">entries</span><span class="p">());</span><span class="c1">//  Array IteratorÂ {}</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arr</span><span class="p">.</span><span class="nx">entries</span><span class="p">()[</span><span class="nb">Symbol</span><span class="p">.</span><span class="nx">iterator</span><span class="p">]());</span> <span class="c1">// Array Iterator {}</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arr</span><span class="p">.</span><span class="nx">entries</span><span class="p">()</span> <span class="o">===</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">entries</span><span class="p">()[</span><span class="nb">Symbol</span><span class="p">.</span><span class="nx">iterator</span><span class="p">]())</span> <span class="c1">// true</span>

<span class="c1">// entries()ì™€ entries()[Symbol.iterator]()ëŠ” ë™ì¼í•©ë‹ˆë‹¤.</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>javascriptì—ì„œ ëª‡ëª‡ì˜ <code class="language-plaintext highlighter-rouge">iterator(ë°˜ë³µì)</code>ë“¤ì€ <code class="language-plaintext highlighter-rouge">iterable(ë°˜ë³µê°€ëŠ¥í•œ)</code>ì…ë‹ˆë‹¤.</p>

<h4 id="ë‚´ì¥-iterable">ë‚´ì¥ iterable</h4>

<p>String, Array, Map, Setì€ ë‚´ì¥ iterableì…ë‹ˆë‹¤. ì´ ê°ì²´ë“¤ì˜ prototypeì€ ëª¨ë‘ @@iterable ë©”ì„œë“œë¥¼ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">arr33</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="kd">let</span> <span class="nx">obj</span><span class="o">=</span><span class="p">{};</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">new</span> <span class="nb">Map</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="dl">"</span><span class="s2">kimson</span><span class="dl">"</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="dl">'</span><span class="s1">mota</span><span class="dl">'</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="dl">'</span><span class="s1">gero</span><span class="dl">'</span><span class="p">]]));</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">new</span> <span class="nb">Map</span><span class="p">([[</span><span class="dl">'</span><span class="s1">name</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">tom</span><span class="dl">'</span><span class="p">]]));</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">new</span> <span class="nb">Set</span><span class="p">(</span><span class="dl">"</span><span class="s2">123</span><span class="dl">"</span><span class="p">));</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">new</span> <span class="nb">Set</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]));</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">new</span> <span class="nb">Set</span><span class="p">([...</span><span class="nx">arr33</span><span class="p">]));</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">));</span>

<span class="c1">// iterableì— ì‚¬ìš©ë˜ëŠ” ë¬¸ë²•</span>
<span class="kd">let</span> <span class="nx">someWords</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">im a test</span><span class="dl">"</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">([...</span><span class="nx">someWords</span><span class="p">]);</span> <span class="c1">// (9)Â ["i", "m", " ", "a", " ", "t", "e", "s", "t"]</span>
<span class="kd">function</span> <span class="nx">f</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// ë¸Œë¼ìš°ì €ê°€ for...of ë°˜ë³µë¬¸ê³¼</span>
  <span class="c1">// for ë°˜ë³µë¬¸ ì•ˆì˜ let ë²”ìœ„ì˜ ë³€ìˆ˜ë¥¼ ì§€ì›í•´ì•¼ í•©ë‹ˆë‹¤.</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">letter</span> <span class="k">of</span> <span class="nx">arguments</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">letter</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">Map</code>ê³¼ <code class="language-plaintext highlighter-rouge">Set</code>ì€ í”„ë¡œí† íƒ€ì…ìœ¼ë¡œ Entriesê°€ ë‚´ì¥ë˜ì–´ ìˆê³ , ArrayëŠ” entries()ë©”ì„œë“œê°€ ë‚´ì¥ë˜ì–´ ìˆì–´ ëª¨ë‘ iterableì…ë‹ˆë‹¤.</p>

<h3 id="iterator-protocol">Iterator Protocol</h3>

<p>ì˜ì–´ë¡œ ë˜ì–´ ìˆì–´ì„œ ê·¸ëŸ°ì§€ êµ‰ì¥íˆ í—·ê°ˆë¦¬ëŠ”ë°ìš”. ë‚˜ì¤‘ì— í‘œë¡œ ì •ë¦¬í•´ë‘˜ ì˜ˆì •ì´ë‹ˆ í‘œë¥¼ ë³´ì‹œë©´ ì¢€ ë” í•œ ëˆˆì— ë“¤ì–´ì˜¤ì‹¤ ê²ƒì´ë¼ ìƒê°í•©ë‹ˆë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">Iterator</code>ëŠ” <code class="language-plaintext highlighter-rouge">next()</code>ë©”ì„œë“œë¥¼ ê°€ì§€ê³  ìˆê³ , <code class="language-plaintext highlighter-rouge">object</code>ë¥¼ ë°˜í™˜í•˜ë©° <code class="language-plaintext highlighter-rouge">done</code>ê³¼ <code class="language-plaintext highlighter-rouge">value</code> í”„ë¡œí¼í‹°ë¥¼ ê°€ì§‘ë‹ˆë‹¤.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">str1</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">kimson</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">str2</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">String</span><span class="p">(</span><span class="dl">'</span><span class="s1">kimson</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">str1</span> <span class="o">==</span> <span class="nx">str2</span><span class="p">)</span> <span class="c1">// true</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">str1</span> <span class="o">===</span> <span class="nx">str2</span><span class="p">)</span> <span class="c1">// false</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">str1</span><span class="p">)</span> <span class="c1">// </span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">str2</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>
:ET