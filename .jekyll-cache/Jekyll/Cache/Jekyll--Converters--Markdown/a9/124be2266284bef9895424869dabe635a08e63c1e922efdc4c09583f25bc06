I"•r<h1 id="todo-listë¥¼-ë§Œë“¤ì–´-ë³´ì">Todo Listë¥¼ ë§Œë“¤ì–´ ë³´ì</h1>

<h2 id="proxyë¥¼-í†µí•œ-ë‚´ìš©-ìë™-ì—…ë°ì´íŠ¸">Proxyë¥¼ í†µí•œ ë‚´ìš© ìë™ ì—…ë°ì´íŠ¸</h2>

<p><code class="language-plaintext highlighter-rouge">Proxy</code>ë¥¼ ì´ìš©í•´ì„œ ë³€ìˆ˜ ë³€ê²½ì„ ê°ì§€, ì¦‰, ì •í™•íˆ ë§í•´ì„œ ê°ì²´ì˜ ì†ì„± ê°’ì´ ë³€ê²½ë˜ëŠ” ê²ƒì„ ê°ì§€í•´ì„œ ìë™ìœ¼ë¡œ í™”ë©´ì„ ì—…ë°ì´íŠ¸ í•˜ëŠ” <code class="language-plaintext highlighter-rouge">Todo List</code>ë¥¼ ë§Œë“¤ë ¤ê³  í•©ë‹ˆë‹¤.</p>

<p>ìµœê·¼ì— <code class="language-plaintext highlighter-rouge">Svelte</code>ë¥¼ <code class="language-plaintext highlighter-rouge">Vue</code>ì™€ ë‹¤ë¥¸ ì°¨ì´ì ì„ ì ‘í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•´ë³´ê³  ìˆëŠ”ë°ìš”. ì˜ˆì „ì— <code class="language-plaintext highlighter-rouge">Vue</code>ê°€ ì–´ë–»ê²Œ ìë™ìœ¼ë¡œ ë³€ìˆ˜ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ”ì§€ <code class="language-plaintext highlighter-rouge">class</code>ë¥¼ ì‚¬ìš©í•´ ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ê³ , ì»´í¬ë„ŒíŠ¸ê°€ ìƒì„±ë  ë•Œ ë¡œì§ì„ ì§œ ë„£ì–´ ë³€ìˆ˜ ì—…ë°ì´íŠ¸ë¥¼ í–ˆë˜ ê¸°ì–µì´ ë‚©ë‹ˆë‹¤.</p>

<p>ìš°ì„  <code class="language-plaintext highlighter-rouge">Proxy</code>ê°€ ì†ì„± ê°’ì„ ê°ì§€í•˜ëŠ” ë°©ì‹ì€ <code class="language-plaintext highlighter-rouge">setter/getter</code>ë¡œ ê°ì§€í•˜ê³  í›„í–‰ë˜ëŠ” ë¬´ì–¸ê°€ë¥¼ ì‘ì„±í•˜ê²Œ ë˜ëŠ”ë°ìš”. ì´ëŠ” <code class="language-plaintext highlighter-rouge">Object</code>ì˜ <code class="language-plaintext highlighter-rouge">defineProperty</code>ì™€ ë¹„ìŠ·í•˜ì§€ë§Œ ëª…í™•í•œ ì°¨ì´ê°€ ìˆìŠµë‹ˆë‹¤.</p>

<h3 id="objectì˜-ì†ì„±-ê°ì§€">Objectì˜ ì†ì„± ê°ì§€</h3>

<p>ë¨¼ì € <code class="language-plaintext highlighter-rouge">Object</code>ë¥¼ ì˜ˆë¡œ ë“¤ì–´ë´…ì‹œë‹¤.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">autoValue</span> <span class="o">=</span> <span class="p">{};</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">autoValue</span><span class="p">,</span> <span class="dl">'</span><span class="s1">watch</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
   <span class="kd">set</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Value has changed !</span><span class="dl">'</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_watch</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
   <span class="p">},</span>
   <span class="kd">get</span><span class="p">(){</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">This type is </span><span class="dl">'</span> <span class="o">+</span> <span class="k">typeof</span> <span class="k">this</span><span class="p">.</span><span class="nx">_watch</span><span class="p">);</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_watch</span><span class="p">;</span>
   <span class="p">}</span>
<span class="p">});</span>

<span class="nx">autoValue</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">autoValue</span><span class="p">.</span><span class="nx">a</span><span class="p">);</span> <span class="c1">// 1</span>

<span class="nx">autoValue</span><span class="p">.</span><span class="nx">watch</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// Value has changed !</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">autoValue</span><span class="p">.</span><span class="nx">watch</span><span class="p">);</span>
<span class="c1">// This type is number</span>
<span class="c1">// 1</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ì—¬ê¸° ìˆëŠ” ì˜ˆì œë¥¼ ë³´ë©´ <code class="language-plaintext highlighter-rouge">autoValue</code>ë¼ëŠ” ê°ì²´ì— <code class="language-plaintext highlighter-rouge">watch</code>ë¼ëŠ” í”„ë¡œí¼í‹°ì— <code class="language-plaintext highlighter-rouge">setter</code>ì™€ <code class="language-plaintext highlighter-rouge">getter</code>ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">watch</code> í”„ë¡œí¼í‹°ì— ê°’ì„ ì§€ì •í•˜ë©´ &#8220;ë³€ê²½ë˜ì—ˆë‹¤&#8221;ê³  ì•Œë ¤ì£¼ê³ , ê°’ì„ ê°€ì ¸ì˜¤ë©´ ê°€ì ¸ì˜¨ ê°’ì˜ íƒ€ì…ì„ ì•Œë ¤ì£¼ë©´ì„œ ê°’ì„ ì¤ë‹ˆë‹¤.</p>

<p>ë§Œì¼ <code class="language-plaintext highlighter-rouge">autoValue</code>ë¼ëŠ” ê°ì²´ì— ìƒˆë¡œ ìƒì„±ë˜ê±°ë‚˜ í˜„ì¬ ê°€ì§€ê³  ìˆëŠ” ì†ì„±ë“¤ ì „ì²´ì— ëŒ€í•´ <code class="language-plaintext highlighter-rouge">setter</code>ì™€ <code class="language-plaintext highlighter-rouge">getter</code>ë¥¼ ê³µí†µìœ¼ë¡œ ì ìš©í•˜ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œìš”?</p>

<h3 id="proxyì˜-ì†ì„±-ê°ì§€">Proxyì˜ ì†ì„± ê°ì§€</h3>

<p><code class="language-plaintext highlighter-rouge">Proxy</code>ê°€ ë¬¼ë¡  ì´ëŸ¬í•œ ì“°ì„ìƒˆëŠ” ì•„ë‹ê±°ë¼ ìƒê°í•©ë‹ˆë‹¤. ë” í­ ë„“ì€ ì´ìœ ë¥¼ ê°€ì¡Œì„ ê²ƒì´ê³ , Proxyë¥¼ ë‹¤ë¥¸ ì˜ì—­ì— ì‚¬ìš©í•˜ë©´ ë” ë§ì€ ìœ ìš©í•œ ê¸°ëŠ¥ì„ ë§Œë“¤ ìˆ˜ ìˆê² ì£  :)</p>

<p>ê°ì„¤í•˜ê³ , <code class="language-plaintext highlighter-rouge">Proxy</code>ì—ì„œ <code class="language-plaintext highlighter-rouge">setter</code>ì™€ <code class="language-plaintext highlighter-rouge">getter</code>ë¥¼ ì§€ì •í•˜ëŠ” ë°©ë²•ì„ ë³´ê² ìŠµë‹ˆë‹¤.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">autoValue</span> <span class="o">=</span> <span class="p">{};</span>
<span class="kd">const</span> <span class="nx">autoValueHandler</span> <span class="o">=</span> <span class="p">{</span>
   <span class="kd">set</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">thisArg</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">proxy</span><span class="p">){</span>

   <span class="p">},</span>
   <span class="kd">get</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">thisArg</span><span class="p">,</span> <span class="nx">proxy</span><span class="p">){</span>
      <span class="k">return</span> <span class="nb">Reflect</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">thisArg</span><span class="p">);</span> <span class="c1">// proxyëŠ” ëºë‹ˆë‹¤.</span>
   <span class="p">}</span>
<span class="p">};</span>

<span class="nx">autoValue</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Proxy</span><span class="p">(</span><span class="nx">autoValue</span><span class="p">,</span> <span class="nx">autoValueHandler</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">autoValue</code>ë¥¼ ë®ì–´ì“°ëŠ” ì´ìœ ëŠ” íƒ€ê¹ƒ ê°ì²´ë¥¼ ì°¸ì¡°í•˜ëŠ” ì½”ë“œê°€ ë§Œì¼ ìˆë‹¤ë©´ ì—‰ë§ì´ ë  í™•ë¥ ì´ ë†’ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">setter</code>ëŠ” ì¸ìë¡œ íƒ€ê²Ÿ ë˜ëŠ” ì›ë³¸ ê°ì²´ì™€ <code class="language-plaintext highlighter-rouge">this</code>, <code class="language-plaintext highlighter-rouge">arguments</code>, <code class="language-plaintext highlighter-rouge">proxy</code>ë¥¼ ë°›ìŠµë‹ˆë‹¤. ì§€ê¸ˆì€ <code class="language-plaintext highlighter-rouge">proxy</code>ë¥¼ ì“¸ ì¼ì´ ì—†ì§€ë§Œ ì´ëŸ° ê²ƒì´ ê°™ì´ ì˜¨ë‹¤ëŠ” ê²ƒë§Œ ì•Œê³  ìˆì–´ë„ ë©ë‹ˆë‹¤.</p>

<p>ê·¸ëŸ¬ë©´ ì´ <code class="language-plaintext highlighter-rouge">Proxy</code>ë¡œ <code class="language-plaintext highlighter-rouge">Todo List</code>ë¥¼ í•˜ë‚˜ ì”© ë§Œë“¤ì–´ ë³´ê² ìŠµë‹ˆë‹¤.</p>

<blockquote>
  <p>ë°°ì—´ì„ <code class="language-plaintext highlighter-rouge">Proxy</code>ë¡œ ì‚¬ìš©í•œë‹¤ë©´ <code class="language-plaintext highlighter-rouge">setter</code>ì—ì„œ <code class="language-plaintext highlighter-rouge">return</code>ê°’ì„ ì„±ê³µí•˜ë©´ <code class="language-plaintext highlighter-rouge">true</code>, ì•„ë‹ˆë©´ <code class="language-plaintext highlighter-rouge">false</code>ë¥¼ ëª…ì‹œí•´ì•¼í•©ë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">falsy</code>í•œ ê°’ì´ ì˜¤ë©´ <code class="language-plaintext highlighter-rouge">TypeError</code>ê°€ íŠ¸ë¦¬ê±° ë©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ê°ì²´ì™€ ë‹¬ë¦¬ ë°°ì—´ì€ <code class="language-plaintext highlighter-rouge">push</code>ë¥¼ í•œ í›„ì— <code class="language-plaintext highlighter-rouge">length</code>ê°’ì„ ìë™ìœ¼ë¡œ ì§€ì •í•˜ê¸° ë•Œë¬¸ì— ë§ˆì§€ë§‰ <code class="language-plaintext highlighter-rouge">length</code>ì— ëŒ€í•´ì„œ <code class="language-plaintext highlighter-rouge">true</code>ë¥¼ ë°˜í™˜í•´ ì¤˜ì•¼í•©ë‹ˆë‹¤.</p>
</blockquote>

<h2 id="todo-list-ë§Œë“¤ê¸°">Todo List ë§Œë“¤ê¸°</h2>

<p>ë¨¼ì € <code class="language-plaintext highlighter-rouge">html</code>ì„ ê°„ë‹¨í•˜ê²Œ ì§­ë‹ˆë‹¤. ì €ëŠ” ì•„ë˜ì™€ ê°™ì´ í–ˆìŠµë‹ˆë‹¤.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"display"</span><span class="nt">&gt;</span>ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"remaining"</span><span class="nt">&gt;</span>0ê°œ ì¤‘ 0ê°œ ì™„ë£Œ êµ¬ë¬¸ ğŸ‘<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"input"</span><span class="nt">&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">Todo List</code>ì˜ ë°ì´í„°ë¥¼ ê°ì§€í•˜ëŠ” <code class="language-plaintext highlighter-rouge">Proxy</code>ë¥¼ ë§Œë“­ë‹ˆë‹¤.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
</pre></td><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">display</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#display</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">input</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#input</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">todoList</span> <span class="o">=</span> <span class="p">{};</span>

<span class="nx">todoList</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Proxy</span><span class="p">(</span><span class="nx">list</span><span class="p">,</span> <span class="p">{</span>
   <span class="kd">set</span><span class="p">(</span><span class="nx">origin</span><span class="p">,</span> <span class="nx">propName</span><span class="p">,</span> <span class="nx">arg</span><span class="p">,</span> <span class="nx">proxy</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">propName</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">todos</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
         <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">origin</span><span class="p">[</span><span class="s2">`_</span><span class="p">${</span><span class="nx">propName</span><span class="p">}</span><span class="s2">`</span><span class="p">])</span> <span class="nx">origin</span><span class="p">[</span><span class="s2">`_</span><span class="p">${</span><span class="nx">propName</span><span class="p">}</span><span class="s2">`</span><span class="p">]</span> <span class="o">=</span> <span class="p">[];</span>
         <span class="c1">// todosê°€ ì—†ìœ¼ë©´ ë°°ì—´ë¡œ ê°’ì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">arg</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">)</span> <span class="nx">origin</span><span class="p">[</span><span class="s2">`_</span><span class="p">${</span><span class="nx">propName</span><span class="p">}</span><span class="s2">`</span><span class="p">]</span> <span class="o">=</span> <span class="nx">arg</span><span class="p">;</span>
         <span class="c1">// ë°°ì—´ì´ ë“¤ì–´ì˜¤ë©´ ê°’ì„ ë°°ì—´ë¡œ ëŒ€ì²´í•©ë‹ˆë‹¤.</span>
         <span class="k">else</span> <span class="nx">origin</span><span class="p">[</span><span class="s2">`_</span><span class="p">${</span><span class="nx">propName</span><span class="p">}</span><span class="s2">`</span><span class="p">].</span><span class="nx">push</span><span class="p">(</span><span class="nx">arg</span><span class="p">);</span>
         
         <span class="nx">completionCountNotification</span><span class="p">(</span><span class="nx">origin</span><span class="p">[</span><span class="s2">`_</span><span class="p">${</span><span class="nx">propName</span><span class="p">}</span><span class="s2">`</span><span class="p">]);</span>
         <span class="nx">writeOnDisplay</span><span class="p">(</span><span class="nx">origin</span><span class="p">[</span><span class="s2">`_</span><span class="p">${</span><span class="nx">propName</span><span class="p">}</span><span class="s2">`</span><span class="p">]);</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="nx">origin</span><span class="p">[</span><span class="s2">`_</span><span class="p">${</span><span class="nx">propName</span><span class="p">}</span><span class="s2">`</span><span class="p">]</span> <span class="o">=</span> <span class="nx">arg</span><span class="p">;</span>
      <span class="c1">// todos ì™¸ì—ëŠ” ê·¸ëƒ¥ ì €ì¥</span>
   <span class="p">},</span>
   <span class="kd">get</span><span class="p">(</span><span class="nx">origin</span><span class="p">,</span> <span class="nx">propName</span><span class="p">,</span> <span class="nx">proxy</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">propName</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">todos</span><span class="dl">'</span><span class="p">)</span> <span class="k">return</span> <span class="nx">origin</span><span class="p">[</span><span class="s2">`_</span><span class="p">${</span><span class="nx">propName</span><span class="p">}</span><span class="s2">`</span><span class="p">]</span> <span class="o">||</span> <span class="p">[];</span>
      <span class="k">else</span> <span class="k">return</span> <span class="nx">origin</span><span class="p">[</span><span class="s2">`_</span><span class="p">${</span><span class="nx">propName</span><span class="p">}</span><span class="s2">`</span><span class="p">];</span>
   <span class="p">}</span>
<span class="p">});</span>

<span class="kd">function</span> <span class="nx">completionCountNotification</span><span class="p">(</span><span class="nx">target</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">remaining</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">target</span><span class="p">.</span><span class="nx">length</span><span class="p">}</span><span class="s2">ê°œ ì¤‘ </span><span class="p">${</span><span class="nx">target</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">t</span><span class="o">=&gt;</span><span class="nx">t</span><span class="p">.</span><span class="nx">done</span><span class="p">).</span><span class="nx">length</span><span class="p">}</span><span class="s2">ê°œ ì™„ë£Œ ğŸ‘`</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">writeOnDisplay</span><span class="p">(</span><span class="nx">target</span><span class="p">)</span> <span class="p">{</span>
   <span class="k">return</span> <span class="nx">display</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">target</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">t</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="o">=&gt;</span>
      <span class="s2">`&lt;li&gt;
         &lt;span class="</span><span class="p">${</span><span class="nx">t</span><span class="p">.</span><span class="nx">done</span><span class="p">?</span><span class="dl">'</span><span class="s1">check</span><span class="dl">'</span><span class="p">:</span><span class="dl">''</span><span class="p">}</span><span class="s2">"&gt;</span><span class="p">${</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">}</span><span class="s2">. </span><span class="p">${</span><span class="nx">t</span><span class="p">.</span><span class="nx">text</span><span class="o">||</span><span class="dl">''</span><span class="p">}</span><span class="s2">&lt;/span&gt;
         &lt;button </span><span class="p">${</span><span class="nx">t</span><span class="p">.</span><span class="nx">done</span><span class="p">?</span><span class="dl">'</span><span class="s1">class="checked"</span><span class="dl">'</span><span class="p">:</span><span class="dl">''</span><span class="p">}</span><span class="s2"> onclick="checkHandler(</span><span class="p">${</span><span class="nx">t</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="s2">)"&gt;Check&lt;/button&gt;
         &lt;button onclick="deleteHandler(</span><span class="p">${</span><span class="nx">t</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="s2">)"&gt;&amp;times;&lt;/button&gt;
      &lt;/li&gt;`</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">todoList</code>ë¥¼ <code class="language-plaintext highlighter-rouge">Proxy</code>ë¡œ ì‚¬ìš©í•˜ê³  ë°ì´í„°ê°€ <code class="language-plaintext highlighter-rouge">set</code> ë  ë•Œë§ˆë‹¤ <code class="language-plaintext highlighter-rouge">writeOnDisplay</code>ì™€ <code class="language-plaintext highlighter-rouge">completionCountNotification</code> í•¨ìˆ˜ê°€ í™”ë©´ì„ ì—…ë°ì´íŠ¸ í•´ì¤ë‹ˆë‹¤.</p>

<p>ì—¬ê¸°ì„œ ì•„ì§ êµ¬í˜„í•˜ì§€ ì•Šì€ ê²ƒì€ ì‘ì„±ë‚´ìš©ì„ ì—”í„°í‚¤ í–ˆì„ ë•Œ ì €ì¥ë˜ëŠ” ê²ƒ, ì²´í¬ë¥¼ ëˆ„ë¥´ë©´ ì™„ë£Œ ë˜ëŠ” ê²ƒ, xë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì‚­ì œë˜ëŠ” ê²ƒ ì…ë‹ˆë‹¤.</p>

<p>í™”ë©´ì€ ë°ì´í„°ë¥¼ <code class="language-plaintext highlighter-rouge">todos</code>ì— ì…ë ¥í•´ì£¼ê¸°ë§Œ í•˜ë©´ ìë™ìœ¼ë¡œ ë˜ê¸° ë•Œë¬¸ì— ìœ„ 3ê°€ì§€ ê¸°ëŠ¥ë§Œ ë§Œë“¤ë©´ ë©ë‹ˆë‹¤.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">writeOnDisplay</span><span class="p">(</span><span class="nx">target</span><span class="p">)</span> <span class="p">{</span>
   <span class="k">return</span> <span class="nx">display</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">target</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">t</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span><span class="o">=&gt;</span>
        <span class="s2">`&lt;li&gt;
            &lt;span class="</span><span class="p">${</span><span class="nx">t</span><span class="p">.</span><span class="nx">done</span><span class="p">?</span><span class="dl">'</span><span class="s1">check</span><span class="dl">'</span><span class="p">:</span><span class="dl">''</span><span class="p">}</span><span class="s2">"&gt;</span><span class="p">${</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="nx">t</span><span class="p">.</span><span class="nx">text</span><span class="o">||</span><span class="dl">''</span><span class="p">}</span><span class="s2">&lt;/span&gt;
            &lt;button onclick="checkHandler(</span><span class="p">${</span><span class="nx">t</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="s2">)"&gt;Check&lt;/button&gt;
            &lt;button onclick="deleteHandler(</span><span class="p">${</span><span class="nx">t</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="s2">)"&gt;&amp;times;&lt;/button&gt;
        &lt;/li&gt;`</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">checkHandler</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">todoList</span><span class="p">.</span><span class="nx">todos</span> <span class="o">=</span> <span class="nx">todoList</span><span class="p">.</span><span class="nx">todos</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">t</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="nx">id</span><span class="p">)</span> <span class="nx">t</span><span class="p">.</span><span class="nx">done</span> <span class="o">=</span> <span class="o">!</span><span class="nx">t</span><span class="p">.</span><span class="nx">done</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">t</span><span class="p">;</span>
    <span class="p">})</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">deleteHandler</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">todoList</span><span class="p">.</span><span class="nx">todos</span> <span class="o">=</span> <span class="nx">todoList</span><span class="p">.</span><span class="nx">todos</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">t</span> <span class="o">=&gt;</span> <span class="nx">t</span><span class="p">.</span><span class="nx">id</span> <span class="o">!=</span> <span class="nx">id</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">input</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">keyup</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">ev</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">ev</span><span class="p">.</span><span class="nx">key</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">Enter</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">ev</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="o">==</span><span class="dl">''</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

        <span class="nx">todoList</span><span class="p">.</span><span class="nx">todos</span> <span class="o">=</span> <span class="p">{</span>
            <span class="na">id</span><span class="p">:</span> <span class="p">[...</span><span class="nx">todoList</span><span class="p">.</span><span class="nx">todos</span><span class="p">].</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">t</span><span class="p">,</span> <span class="nx">n</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">t</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">.</span><span class="nx">id</span> <span class="p">?</span> <span class="nx">n</span><span class="p">.</span><span class="nx">id</span> <span class="p">:</span> <span class="nx">t</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
            <span class="na">text</span><span class="p">:</span> <span class="nx">ev</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span>
            <span class="na">done</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="nx">ev</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ì´ì–´ì„œ <code class="language-plaintext highlighter-rouge">writeOnDisplay</code>í•¨ìˆ˜ë¥¼ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">onclick</code>ì†ì„±ì„ ë‹¬ì•„ checkHandlerí•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ëŠ”ë° idê°’ì„ ì „ë‹¬í•˜ë„ë¡ í•©ë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">deleteHandler</code>ë„ ë§ˆì°¬ê°€ì§€ì…ë‹ˆë‹¤.</p>

<p>ê·¸ë¦¬ê³  ì²˜ìŒì— ì„¤ì •í•´ë‘” inputì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ <code class="language-plaintext highlighter-rouge">keyup</code> íƒ€ì…ìœ¼ë¡œ ì‘ì„±í•©ë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">Enter</code> ì…ë ¥ ë•ŒëŠ” <code class="language-plaintext highlighter-rouge">todoList.todos</code>ì— <code class="language-plaintext highlighter-rouge">todo</code>ì˜ ì•„ì´ë””ê°€ ê°€ì¥ ë†’ì€ ê°’ì— 1ì„ ë”í•´ ì•„ì´ë”” ê°’ì„ ë¶€ì—¬í•˜ê³ , í…ìŠ¤íŠ¸ë¥¼ ì ì–´ <code class="language-plaintext highlighter-rouge">done</code>ì„ <code class="language-plaintext highlighter-rouge">false</code>ë¡œ ì…ë ¥í•©ë‹ˆë‹¤.</p>

<p>ë§ˆì§€ë§‰ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">input</code> ê°’ì„ ì´ˆê¸°í™”í•˜ë©´ ì•„ê¹Œ ì‚¬ìš©í•œ <code class="language-plaintext highlighter-rouge">Proxy</code>ë¡œ ë°ì´í„°ê°€ ë“¤ì–´ê°€ê³ , í•­ëª©ì´ ì¶”ê°€ë˜ì–´ í™”ë©´ì´ ì—…ë°ì´íŠ¸ ë©ë‹ˆë‹¤.</p>

<p>ë°ì´í„°ë¥¼ ì €ì¥í•˜ë©´ì„œ ì“°ê³  ì‹¶ë‹¤ë©´ <code class="language-plaintext highlighter-rouge">localStorage</code>ë¥¼ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.</p>

<h2 id="ê²°ê³¼">ê²°ê³¼</h2>

<figure class="text-center">
<span class="w-inline-block">
   <img src="{{site.baseurl}}/assets/images/post/proxy/proxy01.png" alt="ê²°ê³¼" title="ê²°ê³¼" />
   <figcaption>ê²°ê³¼</figcaption>
</span>
</figure>

<h2 id="scssë¡œ-ì¡°ê¸ˆ-ê¾¸ë¯¼-í›„">Scssë¡œ ì¡°ê¸ˆ ê¾¸ë¯¼ í›„</h2>

<figure class="text-center">
<span class="w-inline-block">
   <img src="{{site.baseurl}}/assets/images/post/proxy/proxy02.png" alt="ê¾¸ë¯¼ í›„" title="ê¾¸ë¯¼ í›„" />
   <figcaption>ê¾¸ë¯¼ í›„</figcaption>
</span>
</figure>

<hr />

<p>ğŸ“š í•¨ê»˜ ë³´ë©´ ì¢‹ì€ ë‚´ìš©</p>

<p><a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Proxy">MDN Web Docs :: proxy</a></p>
:ET