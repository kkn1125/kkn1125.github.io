I"st<h1 id="django-mysqlì—°ê²°ê³¼-rest-framework">Django MySQLì—°ê²°ê³¼ Rest framework</h1>

<p>ì´ë²ˆ í¬ìŠ¤íŒ…ì€ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ê³¼ rest apië¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì— ëŒ€í•´ ê¸°ë¡í•˜ë ¤í•©ë‹ˆë‹¤.</p>

<p>dbëŠ” springì„ ë‹¤ë£° ë•Œë„ mysqlì„ ì‚¬ìš©í–ˆì—ˆê¸° ë•Œë¬¸ì— ìµìˆ™í•œ ê²ƒì„ ì„ íƒí–ˆêµ¬ìš”. springì—ì„œ ì‚¬ìš©í–ˆë˜ <code class="language-plaintext highlighter-rouge">put</code>ê³¼ <code class="language-plaintext highlighter-rouge">delete</code> methodë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ <code class="language-plaintext highlighter-rouge">rest_framework.decorate</code>ë¥¼ ì‚¬ìš©í•˜ë ¤í•©ë‹ˆë‹¤.</p>

<h2 id="ì¤€ë¹„">ì¤€ë¹„</h2>

<p>ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê³  api_viewë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ì•„ë˜ì™€ ê°™ì´ ì„¤ì¹˜í•  ê²Œ ë‘ ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nv">$ </span>pip <span class="nb">install </span>mysqlclient
<span class="nv">$ </span>pip <span class="nb">install </span>djangorestframework
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ê·¸ë¦¬ê³  <code class="language-plaintext highlighter-rouge">settings.py</code>ì— &#8220;ë‚˜ ì´ê±° ì‚¬ìš©í• ê±°ì•¼&#8221;ë¼ê³  ë“±ë¡ì„ í•´ì¤ë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="c1"># settings.py
</span><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">[</span>
  <span class="c1"># ...
</span>  <span class="s">'rest_framework'</span><span class="p">,</span>
  <span class="c1"># ...
</span><span class="p">]</span>

<span class="kn">import</span> <span class="nn">my_database</span> <span class="c1"># ì™¸ë¶€ íŒŒì¼ì„ ê°€ì ¸ì˜¬ ê²ƒì´ê¸°ì— ë¯¸ë¦¬ ì ìŠµë‹ˆë‹¤.
</span>
<span class="n">DATABASES</span> <span class="o">=</span> <span class="n">my_database</span><span class="p">.</span><span class="n">DATABASES</span> <span class="c1"># ê°€ì ¸ì˜¨ ê²ƒì„ DATABASESì— ë„£ì–´ì¤ë‹ˆë‹¤.
</span></pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="ë°ì´í„°ë² ì´ìŠ¤-ì—°ê²°í•˜ê¸°">ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°í•˜ê¸°</h2>

<p>ì´ë ‡ê²Œ ì„¸íŒ…ì´ ëë‚¬ë‹¤ë©´ ì´ì œ <code class="language-plaintext highlighter-rouge">my_database</code>ë¥¼ ì„¤ì •í•  ê²ë‹ˆë‹¤. ì´ì œë¶€í„° í¸ì˜ìƒ í”„ë¡œì íŠ¸ ìµœìƒìœ„ í´ë”ë¥¼ <code class="language-plaintext highlighter-rouge">root</code>ë¼ ì¹­í•˜ê² ìŠµë‹ˆë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">root/my_database.py</code>ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="c1"># root/my_database.py
</span>
<span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'default'</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">'ENGINE'</span><span class="p">:</span> <span class="s">'django.db.backends.mysql'</span><span class="p">,</span>
        <span class="s">'NAME'</span><span class="p">:</span> <span class="s">'py_board'</span><span class="p">,</span>
        <span class="s">'USER'</span><span class="p">:</span> <span class="s">'mysql_id'</span><span class="p">,</span>
        <span class="s">'PASSWORD'</span><span class="p">:</span> <span class="s">'mysql_password'</span><span class="p">,</span>
        <span class="s">'HOST'</span><span class="p">:</span> <span class="s">'localhost'</span><span class="p">,</span>
        <span class="s">'PORT'</span><span class="p">:</span> <span class="s">'3306'</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p>ì£¼ì˜í•  ì ì€ passwordê°€ ë…¸ì¶œë˜ëŠ” ê²ƒì€ ì¢‹ì§€ ì•Šìœ¼ë‹ˆ, .gitignoreì—ì„œ ê¼­ ë“±ë¡í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.</p>
</blockquote>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="c"># .gitignore ì˜ˆì œ</span>
my_database.py
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì´ ìŠ¤í”„ë§ê³¼ ë¹„êµí•˜ìë©´ ë§¤ìš° ì‰¬ì› ìŠµë‹ˆë‹¤. ì´ê²Œ ì—°ê²° ëì…ë‹ˆë‹¤.</p>

<p>ì´ì œ ì´ê²ƒì„ í™œìš©í•˜ë ¤ë©´ <code class="language-plaintext highlighter-rouge">django</code>ì—ì„œ ì§€ì›í•˜ëŠ” <code class="language-plaintext highlighter-rouge">query</code>ì— ëŒ€í•´ ì•Œì•„ì•¼í•©ë‹ˆë‹¤. ì´ë¶€ë¶„ì€ ì œê°€ ì—¬ê¸°ì— ì•Œë ¤ì£¼ê³  ê¸°ë¡í•œë‹¤í•´ë„ ìŠ¤ìŠ¤ë¡œê°€ í•˜ì§€ì•Šìœ¼ë©´ ì•ˆë˜ëŠ” ì˜ì—­ì´ë¼ ìƒê°í•©ë‹ˆë‹¤.</p>

<p>ìì£¼ ì“°ì´ëŠ” ê²ƒì€ <code class="language-plaintext highlighter-rouge">objects.all()</code>ê³¼ <code class="language-plaintext highlighter-rouge">objects.get()</code>ì´ë¼ëŠ” ê²ƒ ë°–ì—ëŠ” ì—†ë„¤ìš”.</p>

<h2 id="view-êµ¬í˜„í•˜ê¸°">View êµ¬í˜„í•˜ê¸°</h2>

<p>ì—¬ëŸ¬ê°€ì§€ ì°¾ë‹¤ë³´ë‹ˆ Viewë¥¼ êµ¬ì„±í•˜ëŠ” ë°©ì‹ì´ ì—„ì²­ ë§ì•˜ìŠµë‹ˆë‹¤. api_viewë¥¼ ì‚¬ìš©í•´ì„œ ìŠ¤í”„ë§ì˜ ì–´ë…¸í…Œì´ì…˜ì²˜ëŸ¼ <code class="language-plaintext highlighter-rouge">@api_view(['GET', 'POST'])</code>ì´ë ‡ê²Œ í•¨ìˆ˜ì— ë°”ë¡œ ë¶™ì—¬ ì„¤ì •í•˜ê¸°ë„ í•˜ê³ , <code class="language-plaintext highlighter-rouge">api</code>ë¥¼ ë§Œë“¤ ë•Œì— <code class="language-plaintext highlighter-rouge">APIView</code>ë¥¼ ì‚¬ìš©í•´ì„œ <code class="language-plaintext highlighter-rouge">json</code>ìœ¼ë¡œ ì¶œë ¥í•˜ëŠ” ë“±ì˜ ë°©ë²•ì´ ë§ì•˜ìŠµë‹ˆë‹¤.</p>

<p>ì €ëŠ” ê·¸ ì¤‘ì—ì„œë„ ì œê°€ ì‚¬ìš©í•˜ëŠ”ë° ê±°ë¦¬ë‚Œì—†ì´ ìµìˆ™í•œë° ìƒˆë¡œìš´ ê²ƒë“¤ë§Œ ê³¨ë¼ ì •ë¦¬í•˜ë ¤í•©ë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">api_view</code>ì™€ <code class="language-plaintext highlighter-rouge">View</code>ë¥¼ ì‚¬ìš©í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>

<h3 id="djangoviewsì˜-view-ì‚¬ìš©">django.viewsì˜ View ì‚¬ìš©</h3>

<p>Viewì˜ ì‚¬ìš©ì€ ì•„ì§ ì•Œì•„ë³¼ê²Œ ë§ì§€ë§Œ ì •ë¦¬í•´ë‘ê² ìŠµë‹ˆë‹¤. ë“¤ì–´ê°€ê¸°ì— ì•ì„œ djangoì—ì„œëŠ” <code class="language-plaintext highlighter-rouge">GET</code>ê³¼ <code class="language-plaintext highlighter-rouge">POST</code> ì™¸ì˜ ìš”ì²­ì€ <code class="language-plaintext highlighter-rouge">formdata</code>ë¡œ ì§€ì›ì´ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">postman</code>ìœ¼ë¡œ í™•ì¸í•´ë³´ë©´ <code class="language-plaintext highlighter-rouge">PUT</code>ê³¼ <code class="language-plaintext highlighter-rouge">DELETE</code>ìš”ì²­ì´ ë°›ì•„ë“¤ì—¬ì§€ê¸´ í•˜ì§€ë§Œ ì´ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ <code class="language-plaintext highlighter-rouge">ajax</code>ë¥¼ ì´ìš©í•˜ê±°ë‚˜ ìŠ¤í”„ë§ì—ì„œ ì‚¬ìš©í•˜ë˜ <code class="language-plaintext highlighter-rouge">_method</code>ë¥¼ <code class="language-plaintext highlighter-rouge">hidden</code>ìœ¼ë¡œ ë³´ë‚´ì£¼ê³  <code class="language-plaintext highlighter-rouge">views.py</code>ì—ì„œ ì¡°ì‘í•˜ë©´ ë©ë‹ˆë‹¤.</p>

<p>ì‹¤ì œ <code class="language-plaintext highlighter-rouge">PUT</code>ê³¼ <code class="language-plaintext highlighter-rouge">DELETE</code>ëŠ” ì•„ë‹ˆì§€ë§Œ ìœ ì‚¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ëŠ” ìˆìŠµë‹ˆë‹¤.</p>

<p>ë¨¼ì € <code class="language-plaintext highlighter-rouge">View</code>ë¥¼ ì‚¬ìš©í•  ë•Œë¥¼ ë³´ê² ìŠµë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
</pre></td><td class="rouge-code"><pre><span class="c1"># views.py
</span>
<span class="c1"># from django.shortcuts import redirect, render, get_object_or_404
</span><span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponse</span><span class="p">,</span> <span class="n">JsonResponse</span>
<span class="kn">from</span> <span class="nn">django.views</span> <span class="kn">import</span> <span class="n">View</span>

<span class="k">class</span> <span class="nc">PostView</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
      <span class="k">print</span><span class="p">(</span><span class="n">kwargs</span><span class="p">.</span><span class="n">num</span><span class="p">)</span> <span class="c1"># numì´ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ íŒŒë¼ë¯¸í„°ë¥¼ ë„˜ê²¼ì„ ë•Œ
</span>      <span class="n">board</span> <span class="o">=</span> <span class="n">Board</span><span class="p">.</span><span class="n">objects</span><span class="p">.</span><span class="nb">all</span><span class="p">()</span>
      <span class="n">context</span> <span class="o">=</span> <span class="p">{</span>
          <span class="s">'board'</span><span class="p">:</span> <span class="n">board</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'blog/post_list.html'</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
      <span class="c1"># return HttpResponse("get ìš”ì²­!") &lt;- ì´ê²ƒë„ ë©ë‹ˆë‹¤.
</span>      <span class="c1"># return JsonResponse({
</span>      <span class="c1">#   'dummy_name' : 'kimson',
</span>      <span class="c1">#   'dummy_age' : 30,
</span>      <span class="c1">#   'dummy_job' : 'no',
</span>      <span class="c1"># }) &lt;- jsonë°ì´í„° ë¿Œë ¤ì¤„ ë•Œ
</span>    
    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
      <span class="k">print</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
      <span class="n">context</span> <span class="o">=</span> <span class="p">{</span>
          <span class="s">'post'</span><span class="p">:</span> <span class="mi">1</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'blog/post_detail.html'</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
      <span class="c1"># return HttpResponse("post ìš”ì²­!") &lt;- ì´ê²ƒë„ ë©ë‹ˆë‹¤.
</span>  
    <span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
      <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="s">"""..."""</span><span class="p">)</span>
      <span class="c1"># return HttpResponse("put ìš”ì²­!") &lt;- ì´ê²ƒë„ ë©ë‹ˆë‹¤.
</span>
    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
      <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="s">"""..."""</span><span class="p">)</span>
      <span class="c1"># return HttpResponse("delete ìš”ì²­!") &lt;- ì´ê²ƒë„ ë©ë‹ˆë‹¤.
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">url</code> ì„¸íŒ…ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="kn">from</span> <span class="nn">django.urls</span> <span class="kn">import</span> <span class="n">path</span>

<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">views</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
  <span class="n">path</span><span class="p">(</span><span class="s">''</span><span class="p">,</span> <span class="n">views</span><span class="p">.</span><span class="n">PostView</span><span class="p">.</span><span class="n">as_view</span><span class="p">(),</span> <span class="n">name</span> <span class="o">=</span> <span class="s">'post_list'</span><span class="p">),</span>
<span class="p">]</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p>í…ŒìŠ¤íŠ¸ í•  ë•Œ <code class="language-plaintext highlighter-rouge">postman</code>ì„ ì‚¬ìš©í•˜ì‹ ë‹¤ë©´ <code class="language-plaintext highlighter-rouge">GET</code>ìš”ì²­ ì™¸ì—ëŠ” <code class="language-plaintext highlighter-rouge">csrftoken</code>ê°’ì„ ë„˜ê²¨ì¤˜ì•¼ í•©ë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">csrftoken</code>ì€ ì¿ í‚¤ì— ë³´ì‹œë©´ ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>

<p>ê³µì‹ í™ˆí˜ì´ì§€ì—ì„œ ë³¸ íŠœí† ë¦¬ì–¼ê³¼ëŠ” ì¢€ ë‹¤ë¥¸ í˜•íƒœì…ë‹ˆë‹¤. í•¨ìˆ˜ë“¤ì„ íƒ€ê³ íƒ€ê³  ì˜¬ë¼ê°€ì„œ êµ¬ì„±ëœ ë‚´ìš©ì„ ë³´ë‹ˆ ëŒ€ê°•ì€ ì´í•´ê°€ ë©ë‹ˆë‹¤.</p>

<p>ì´ë ‡ê²Œ ë³´ë‹ˆ í•˜ë‚˜ì˜ <code class="language-plaintext highlighter-rouge">path</code>ì— 4ê°€ì§€ ë©”ì„œë“œ ìš”ì²­ì„ ì²˜ë¦¬í•´ì£¼ê³  ìˆìŠµë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">api</code>ë¥¼ ë§Œë“¤ê³  <code class="language-plaintext highlighter-rouge">axios</code>ë¡œ ë‚˜ì¤‘ì— í”„ë¡ íŠ¸ì—ì„œ ë§Œì ¸ì£¼ë©´ ë  ê²ƒ ê°™ë‹¤ëŠ” ìƒê°ì´ ë“­ë‹ˆë‹¤. ì•„ì§ ìµìˆ™í•˜ì§€ ì•Šì•„ì„œ <strong>ë°©ë²•ë§Œ ì•Œê³  ë„˜ì–´ê°€ë ¤</strong>í•©ë‹ˆë‹¤.</p>

<p>ê° <code class="language-plaintext highlighter-rouge">path</code>ë³„ë¡œ <code class="language-plaintext highlighter-rouge">class</code>ë¥¼ ë§Œë“¤ê³  <code class="language-plaintext highlighter-rouge">GET</code>, <code class="language-plaintext highlighter-rouge">POST</code>, <code class="language-plaintext highlighter-rouge">PUT</code>, <code class="language-plaintext highlighter-rouge">DELETE</code>ë¥¼ ë”°ë¡œ ë§Œë“¤ì–´ ê´€ë¦¬í•˜ë©´ ì§ê´€ì ì´ë¼ ê´€ë¦¬í•  ë•Œ ìš©ì´ í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>

<h3 id="rest_frameworkdecoratesì˜-api_view-ì‚¬ìš©">rest_framework.decoratesì˜ api_view ì‚¬ìš©</h3>

<p>í˜„ì¬ ê³„ì†í•´ì„œ ì‚¬ìš©ì¤‘ì¸ <code class="language-plaintext highlighter-rouge">api_view</code>ì…ë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="rouge-code"><pre><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span><span class="p">,</span> <span class="n">redirect</span>
<span class="kn">from</span> <span class="nn">rest_framework.decorators</span> <span class="kn">import</span> <span class="n">api_view</span>

<span class="o">@</span><span class="n">api_view</span><span class="p">([</span><span class="s">'GET'</span><span class="p">,</span> <span class="s">'POST'</span><span class="p">,</span> <span class="s">'PUT'</span><span class="p">,</span> <span class="s">'DELETE'</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">post_control</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">num</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="n">method</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">request</span><span class="p">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'GET'</span><span class="p">:</span>
        <span class="n">post</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">Board</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="n">num</span><span class="p">)</span>
        
        <span class="n">context</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">'post'</span><span class="p">:</span> <span class="n">post</span>
        <span class="p">}</span>
    
        <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'blog/post_control.html'</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">request</span><span class="p">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'POST'</span> <span class="ow">and</span> <span class="n">request</span><span class="p">.</span><span class="n">POST</span><span class="p">[</span><span class="s">'_method'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'delete'</span><span class="p">:</span>
        <span class="n">board</span> <span class="o">=</span> <span class="n">Board</span><span class="p">.</span><span class="n">objects</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">num</span><span class="o">=</span><span class="n">num</span><span class="p">)</span>
        <span class="n">board</span><span class="p">.</span><span class="n">delete</span><span class="p">()</span>
        
        <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s">'post_list'</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">request</span><span class="p">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'DELETE'</span><span class="p">:</span>
      <span class="c1"># ... axios, ajaxë¡œ ìš”ì²­ë³´ë‚¼ ë•Œ ë“±ë“±
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p>í˜„ì¬ ê²Œì‹œíŒì„ ë§Œë“¤ê³  ìˆëŠ” <code class="language-plaintext highlighter-rouge">views.py</code>ì˜ ì¼ë¶€ì¸ë°ìš”. <code class="language-plaintext highlighter-rouge">request.POST</code>ì˜ <code class="language-plaintext highlighter-rouge">QueryDict</code>ì— ë‹´ê²¨ ì „ë‹¬ë˜ëŠ” <code class="language-plaintext highlighter-rouge">_method</code>ë¥¼ ë°›ì•„ ë¶„ê¸°ë¬¸ìœ¼ë¡œ ì²˜ë¦¬í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>

<p>ì´ ë°©ë²• ì™¸ì— ì•„ë˜ì˜ ë°©ë²•ë„ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="c1"># ref - í¬ìŠ¤íŒ… ìµœí•˜ë‹¨ ë§í¬ ì°¸ì¡° [Stackoverflow]
</span>
<span class="k">class</span> <span class="nc">TestView</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>
  <span class="k">def</span> <span class="nf">dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">POST</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'_method'</span><span class="p">,</span> <span class="s">''</span><span class="p">).</span><span class="n">lower</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="s">'put'</span><span class="p">:</span>
      <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">put</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="s">'delete'</span><span class="p">:</span>
      <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">delete</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">TestView</span><span class="p">,</span> <span class="bp">self</span><span class="p">).</span><span class="n">dispatch</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

  <span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"ë‚˜ëŠ” %sì…ë‹ˆë‹¤."</span> <span class="o">%</span> <span class="bp">self</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">POST</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'_method'</span><span class="p">))</span>

  <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"ë‚˜ëŠ” %sì…ë‹ˆë‹¤."</span> <span class="o">%</span> <span class="bp">self</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">POST</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'_method'</span><span class="p">))</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ì—¬ê¸°ê¹Œì§€ ì‚¬ìš©í•˜ëŠ” í˜•íƒœë§Œì„ ë´¤ëŠ”ë°ìš”. <code class="language-plaintext highlighter-rouge">class</code>ë¡œ <code class="language-plaintext highlighter-rouge">method</code>ìš”ì²­ ì²˜ë¦¬ë¥¼ í•˜ë˜, <code class="language-plaintext highlighter-rouge">api_view</code>ë¡œ ì²˜ë¦¬í•˜ë˜ ì•„ì§ê¹Œì§€ëŠ” í° ì°¨ì´ì ì„ ëŠë¼ì§€ ëª»í•˜ê² ìŠµë‹ˆë‹¤. ì‚¬ìš©í•˜ë‹¤ë³´ë©´ ë” ì¢‹ì€ ë°©ë²•ì´ ìˆì„í…Œê³  ë˜ ë°°ì›Œì„œ ì œ ê²ƒìœ¼ë¡œ ë§Œë“¤ì–´ì•¼ ê² ì§€ìš”.</p>

<h3 id="django-íŠœí† ë¦¬ì–¼ì˜-view-ì²˜ë¦¬">django íŠœí† ë¦¬ì–¼ì˜ view ì²˜ë¦¬</h3>

<p><code class="language-plaintext highlighter-rouge">url</code> ì„¸íŒ…ì€ ì²˜ìŒì— ì´ë¬ì£ .</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="c1"># blog/urls.py
</span><span class="kn">from</span> <span class="nn">django.urls</span> <span class="kn">import</span> <span class="n">path</span>

<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">views</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span><span class="n">path</span><span class="p">:</span> <span class="s">''</span><span class="p">,</span> <span class="n">views</span><span class="p">.</span><span class="n">post_list</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'post_list'</span><span class="p">},</span>
  <span class="p">{</span><span class="n">path</span><span class="p">:</span> <span class="s">'/post/&lt;int:num&gt;'</span><span class="p">,</span> <span class="n">views</span><span class="p">.</span><span class="n">post_detail</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'post_detail'</span><span class="p">},</span>
<span class="p">]</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ê¸°ì¡´ì— ì‚¬ìš©í•˜ë˜ <code class="language-plaintext highlighter-rouge">views.py</code> ë°©ì‹ì€ ì•„ë˜ì™€ ê°™ì•˜ìŠµë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="c1"># views.py
# ... ìƒëµ
</span>
<span class="k">def</span> <span class="nf">post_list</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
  <span class="k">if</span> <span class="n">request</span><span class="p">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'POST'</span><span class="p">:</span>
    <span class="c1"># ... ì €ì¥, ì‚­ì œ, ìˆ˜ì • ë“±
</span>    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'blog/post_list.html'</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="c1"># ... ì½ê¸°
</span>    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'blog/post_list.html'</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">post_detail</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="c1"># ... ì½ê¸°
</span>    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'blog/post_list.html'</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ì´ì œ ê°ê°ì˜ ì°¨ì´ì ì´ ì¡°ê¸ˆì”© ë³´ì´ê¸° ì‹œì‘í•©ë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">method</code>ì²˜ë¦¬í•˜ëŠ” ê²ƒë„ ë§ì´ ë¶€ì¡±í•˜ë‹ˆ ì°¾ì•„ë´ì•¼í•˜ê³ , íŒ¨í„´ì— ëŒ€í•´ì„œë„ ê³µë¶€ë¥¼ í•´ì•¼í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">django</code>ì—ì„œëŠ” <code class="language-plaintext highlighter-rouge">mvc</code>íŒ¨í„´ì´ ì•„ë‹Œ <code class="language-plaintext highlighter-rouge">mtv</code>ë‚˜ <code class="language-plaintext highlighter-rouge">mvvm</code>íŒ¨í„´ë„ ìˆë‹¤ê³  í•˜ë‹ˆ ë‹¤ìŒì— ë‹¤ë£¨ì–´ ë³¼ ìƒê°ì…ë‹ˆë‹¤.</p>

<hr />

<p>ğŸ“š í•¨ê»˜ ë³´ë©´ ì¢‹ì€ ë‚´ìš©</p>

<p><a href="https://stackoverflow.com/questions/36455189/put-and-delete-django">Stackoverflow :: PUT and DELETE Django</a></p>

<p><a href="https://docs.djangoproject.com/en/4.0/topics/db/queries/">Django :: Documentation</a></p>

<p><a href="https://www.django-rest-framework.org/api-guide/views/#api_view">Django REST framework :: api_view</a></p>

<p><a href="https://www.bezkoder.com/django-rest-api/">BezKoder :: Django: POST, PUT, GET, DELETE requests example | Rest Apis</a></p>

<p><a href="https://naon.me/posts/til57">naonë‹˜ :: Django Rest Framework í™œìš©í•˜ê¸° 2 - @api_view</a></p>

<p><a href="https://eunjin3786.tistory.com/133">eungdingë‹˜ :: HTTP Requestë¥¼ ë°›ì•„ì„œ ì‘ë‹µí•´ì£¼ê¸° (GET, POST, PUT, DELETE)</a></p>

<p><a href="https://parksunwoo.github.io/django/2020/12/25/api-rest-framework-view.html">Sunwoo Parkë‹˜ :: API ê·¸ë¦¬ê³  Django REST framework Viewë“¤ ë¹„êµí•˜ê¸°</a></p>

<p><a href="https://ssungkang.tistory.com/entry/DjangoCross-Site-Request-Forgery-csrf-%EA%B3%B5%EA%B2%A9%EA%B3%BC-%EB%8C%80%EC%9D%91">ssung.kë‹˜ :: Cross Site Request Forgery, csrf ê³µê²©ê³¼ ëŒ€ì‘</a></p>

<p><a href="https://woolbro.tistory.com/98">woolbroë‹˜ :: ì¥ê³  (Django)ë¥¼ ì‚¬ìš©í•œ CRUD ì˜ˆì œ ë§Œë“¤ê¸°</a></p>

<p><a href="https://velog.io/@new_wisdom/django-4-Django%EB%A1%9C-CRUD%ED%95%98%EA%B8%B0">new_wisdomë‹˜ :: #4 Djangoë¡œ CRUDí•˜ê¸°</a></p>

<p><a href="https://d-yong.tistory.com/61">d-yongë‹˜ :: ê°„ë‹¨í•œ REST API ì„œë²„ ë§Œë“¤ê¸°4 - Class Based Viewì—ì„œ POST, GET, PUT, DELETE êµ¬í˜„</a></p>

<p><a href="https://velog.io/@swhan9404/django-rest-api-%EA%B2%8C%EC%8B%9C%EA%B8%80-%EB%8C%93%EA%B8%80-%EC%8B%A4%EC%8A%B5">swhan9404ë‹˜ :: django rest api ê²Œì‹œê¸€, ëŒ“ê¸€ ì‹¤ìŠµ</a></p>
:ET