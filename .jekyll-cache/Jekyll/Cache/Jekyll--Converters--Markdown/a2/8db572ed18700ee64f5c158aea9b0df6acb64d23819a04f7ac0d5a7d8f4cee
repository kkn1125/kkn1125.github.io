I"9g<h1 id="ê¸°ì¡´-ì •ë³´ì—-ìˆ˜ì •ëœ-ì •ë³´ë¥¼-ë®ì–´ì“°ê¸°">ê¸°ì¡´ ì •ë³´ì— ìˆ˜ì •ëœ ì •ë³´ë¥¼ ë®ì–´ì“°ê¸°</h1>

<p>íšŒì›ì •ë³´ë¥¼ ìˆ˜ì •í•˜ë‹¤ë³´ë©´ ì´ˆê¸°ì—ëŠ” <code class="language-plaintext highlighter-rouge">request.POST['datatype']</code>ìœ¼ë¡œ í•˜ë‚˜ì”© ë°›ì•„ì™€ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì¡°íšŒí•´ì„œ userë¥¼ ê°€ì ¸ì˜¤ê³  í•˜ë‚˜ ì”© ë‹´ì•˜ìŠµë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">num</span><span class="p">):</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="p">.</span><span class="n">objects</span><span class="p">.</span><span class="nb">filter</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">num</span><span class="p">).</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">num</span><span class="p">)</span>

    <span class="n">nickname</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="n">POST</span><span class="p">[</span><span class="s">'nickname'</span><span class="p">]</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="n">POST</span><span class="p">[</span><span class="s">'email'</span><span class="p">]</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="n">POST</span><span class="p">[</span><span class="s">'password'</span><span class="p">]</span>
    <span class="n">profile</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="n">POST</span><span class="p">[</span><span class="s">'profile'</span><span class="p">]</span>

    <span class="n">user</span><span class="p">.</span><span class="n">nickname</span> <span class="o">=</span> <span class="n">nickname</span>
    <span class="n">user</span><span class="p">.</span><span class="n">email</span> <span class="o">=</span> <span class="n">email</span>
    <span class="n">user</span><span class="p">.</span><span class="n">password</span> <span class="o">=</span> <span class="n">password</span>
    <span class="n">user</span><span class="p">.</span><span class="n">profile</span> <span class="o">=</span> <span class="n">profile</span>

    <span class="n">user</span><span class="p">.</span><span class="n">save</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ìœ„ì˜ í˜•ì‹ì´ ê½¤ ë²ˆê±°ë¡œì› ìŠµë‹ˆë‹¤. ìŠ¤í”„ë§ì—ì„œëŠ” form dataë¥¼ ì „ì†¡í•˜ë©´ requestë¥¼ ë³´ë‚¼ ë•Œ ì•Œì•„ì„œ ê°ì²´ì— ë‹´ì•„ì¤¬ìŠµë‹ˆë‹¤. ë¶„ëª… ì¥ê³ ì—ë„ ìˆì„ ê±°ë¼ëŠ” ì˜ˆê°ì€ í‹€ë¦¬ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</p>

<h2 id="ëª¨ë¸-í¼">ëª¨ë¸ í¼</h2>

<p>modelFormì„ ì“°ë‹¤ë³´ë©´ <code class="language-plaintext highlighter-rouge">create</code>, <code class="language-plaintext highlighter-rouge">update</code>ê°€ ë‹¨ ëª‡ ì¤„ì— ëë‚©ë‹ˆë‹¤. ê·¸ë ‡ê²Œ í¸í•˜ê²Œ ì“°ë˜ ì¤‘ì— ê³ ë¯¼ì´ í•˜ë‚˜ ìƒê²¼ìŠµë‹ˆë‹¤.</p>

<h3 id="ê³µë°±ì€-ë¬´ì‹œí•˜ê³ -ì‘ì„±í•œ-ë°ì´í„°ë§Œ-ë°›ê¸°">ê³µë°±ì€ ë¬´ì‹œí•˜ê³  ì‘ì„±í•œ ë°ì´í„°ë§Œ ë°›ê¸°</h3>

<p>ê²Œì‹œê¸€ì„ ìˆ˜ì •í•  ë•ŒëŠ” ëª¨ë“  ë°ì´í„°ë¥¼ ë°›ì•„ ì—…ë°ì´íŠ¸ í¼ìœ¼ë¡œ ì—°ê²°í•˜ë©´ í•´ë‹¹ ë°ì´í„°ë“¤ì´ pkê°’ ë¹¼ê³ ëŠ” ë‹¤ ë‚˜íƒ€ë‚˜ëŠ” êµ¬ì¡°ì˜€ìŠµë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">django.utils</span> <span class="kn">import</span> <span class="n">timezone</span>
<span class="k">class</span> <span class="nc">Post</span><span class="p">(</span><span class="n">models</span><span class="p">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">num</span> <span class="o">=</span> <span class="n">models</span><span class="p">.</span><span class="n">AutoField</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="p">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">models</span><span class="p">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">author</span> <span class="o">=</span> <span class="n">models</span><span class="p">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">regdate</span> <span class="o">=</span> <span class="n">models</span><span class="p">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="s">'created'</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">timezone</span><span class="p">.</span><span class="n">now</span><span class="p">,</span> <span class="n">editable</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">updates</span> <span class="o">=</span> <span class="n">models</span><span class="p">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="s">'updated'</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">timezone</span><span class="p">.</span><span class="n">now</span><span class="p">,</span> <span class="n">editable</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ëŒ€ëµ ìœ„ì™€ ê°™ì€ ì»¬ëŸ¼ì€ ê°€ì§„ ëª¨ë¸ë¡œ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° ë§Œì¼ ë³€ê²½í•˜ì§€ ì•Šì•„ë„ ë˜ëŠ”, ì¦‰, ê¸°ì¡´ ê°’ì„ ìœ ì§€í•˜ë˜ ìƒˆë¡œìš´ ê°’ì´ ìˆìœ¼ë©´ ë®ì–´ì¨ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ë°œìƒí•˜ëŠ” ë•Œê°€ ìˆìŠµë‹ˆë‹¤.</p>

<p>ì˜ˆë¥¼ë“¤ë©´ ì´ë¯¸ì§€ê°™ì€ ê²½ìš°ì…ë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Post</span><span class="p">(</span><span class="n">models</span><span class="p">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1"># ì½”ë“œ ìƒë™
</span>    <span class="s">"""
    ì´ë¯¸ì§€ í•„ë“œ ì¶”ê°€
    """</span>
    <span class="n">cover</span> <span class="o">=</span> <span class="n">models</span><span class="p">.</span><span class="n">ImageField</span><span class="p">(</span><span class="n">upload_to</span><span class="o">=</span><span class="s">""</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="c1"># ...
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p>ì´ë ‡ê²Œ ì´ë¯¸ì§€ í•„ë“œê°€ ì¶”ê°€ëœ ê²½ìš°ì—ëŠ” <code class="language-plaintext highlighter-rouge">html input</code>íƒœê·¸ì˜ <code class="language-plaintext highlighter-rouge">file</code>íƒ€ì… íŠ¹ì„±ìƒ <code class="language-plaintext highlighter-rouge">value</code>ê°’ ì„¤ì •ì´ ì•ˆ ë©ë‹ˆë‹¤.</p>

<p>íƒœê·¸ì— <code class="language-plaintext highlighter-rouge">value</code>ë¥¼ ì§€ì •í•´ë„ <code class="language-plaintext highlighter-rouge">form</code>ë°ì´í„°ì— ë„˜ê²¨ë„ <a href="https://jkorpela.fi/forms/file.html#value" target="_blank">ë³´ì•ˆìƒ ì´ìœ </a>ë¡œ ê°’ì´ ë„˜ì–´ê°€ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>

<p>ê·¸ë¦¬ê³  <code class="language-plaintext highlighter-rouge">cover</code> í•„ë“œ ì¶”ê°€ì™€ í•¨ê»˜ ì €ëŠ” <code class="language-plaintext highlighter-rouge">forms.py</code>ì— ì‘ì„±ëœ íŒ¨ìŠ¤ì›Œë“œ í•„ë“œì™€ ì»¤ë²„ í•„ë“œì— ì†ì„±ì„ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">UserForm</span><span class="p">(</span><span class="n">ModelForm</span><span class="p">):</span>
    <span class="s">""" ì¶”ê°€ """</span>
    <span class="n">cover</span> <span class="o">=</span> <span class="n">ImageField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">FileInput</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">'type'</span><span class="p">:</span> <span class="s">'file'</span><span class="p">}))</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">PasswordInput</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">'type'</span><span class="p">:</span> <span class="s">'password'</span><span class="p">,</span> <span class="s">'autocomplete'</span><span class="p">:</span> <span class="s">'current-password'</span><span class="p">}))</span>
    <span class="s">""" ì¶”ê°€ """</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">User</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s">'profile'</span><span class="p">,</span> <span class="s">'nickname'</span><span class="p">,</span> <span class="s">'email'</span><span class="p">,</span> <span class="s">'password'</span>
            <span class="p">]</span>
        <span class="n">widgets</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">'email'</span><span class="p">:</span> <span class="n">EmailInput</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">'autocomplete'</span><span class="p">:</span> <span class="s">'username'</span><span class="p">}),</span>
        <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p>cover typeì„ ë˜ ì§€ì •í•´ ì¤€ ì´ìœ ëŠ” djangoì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ fileInputì— í˜„ì¬ì™€ ë³€ê²½ ì •ë³´ë¥¼ í•¨ê»˜ ë„ì›Œì¤ë‹ˆë‹¤. ê·¸ê²Œ ì‹«ì–´ì„œ file inputë§Œ ë‚˜íƒ€ë‚˜ê²Œ í•˜ê¸° ìœ„í•¨ì…ë‹ˆë‹¤.<br />
passwordëŠ” charfieldì´ì§€ë§Œ ì•”í˜¸í™”ë˜ì–´ ë³´ì—¬ì•¼í•˜ë‹ˆ typeì„ ë³€ê²½í•œ ê²ƒ ì…ë‹ˆë‹¤.</p>
</blockquote>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre></td><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">.models</span> <span class="kn">from</span> <span class="nn">User</span>
<span class="kn">import</span> <span class="p">.</span><span class="n">forms</span> <span class="kn">from</span> <span class="nn">UserForm</span>
<span class="kn">import</span> <span class="n">rest_framework</span><span class="p">.</span><span class="n">decorators</span> <span class="k">from</span> <span class="n">api_view</span>

<span class="o">@</span><span class="n">api_view</span><span class="p">([</span><span class="s">'GET'</span><span class="p">,</span> <span class="s">'POST'</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">num</span><span class="p">):</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="p">.</span><span class="n">objects</span><span class="p">.</span><span class="nb">filter</span><span class="p">(</span><span class="n">num</span><span class="o">=</span><span class="n">num</span><span class="p">).</span><span class="n">get</span><span class="p">(</span><span class="n">num</span><span class="o">=</span><span class="n">num</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">request</span><span class="p">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'GET'</span><span class="p">:</span>

        <span class="n">context</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">'path_type'</span><span class="p">:</span> <span class="n">path_type</span><span class="p">(</span><span class="n">request</span><span class="p">),</span>
            <span class="s">'userForm'</span><span class="p">:</span> <span class="n">UserForm</span><span class="p">(</span><span class="n">instance</span><span class="o">=</span><span class="n">user</span><span class="p">),</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'scheduler/signup.html'</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="n">userForm</span> <span class="o">=</span> <span class="n">UserForm</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="n">POST</span> <span class="ow">or</span> <span class="bp">None</span><span class="p">,</span>
                            <span class="n">request</span><span class="p">.</span><span class="n">FILES</span> <span class="ow">or</span> <span class="bp">None</span><span class="p">,</span>
                            <span class="n">instance</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">userForm</span><span class="p">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">uf</span> <span class="o">=</span> <span class="n">userForm</span><span class="p">.</span><span class="n">save</span><span class="p">(</span><span class="n">commit</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
            <span class="n">request</span><span class="p">.</span><span class="n">session</span><span class="p">[</span><span class="s">'sign'</span><span class="p">]</span> <span class="o">=</span> <span class="n">uf</span><span class="p">.</span><span class="n">pk</span>
            <span class="n">uf</span><span class="p">.</span><span class="n">save</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s">'account:update'</span><span class="p">,</span> <span class="n">user</span><span class="p">.</span><span class="n">pk</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ìœ„ ì½”ë“œì²˜ëŸ¼ <code class="language-plaintext highlighter-rouge">UserForm</code>ì— <code class="language-plaintext highlighter-rouge">instance</code>ì™€ <code class="language-plaintext highlighter-rouge">request</code>ë¥¼ ë„£ì–´ì¤¬ìŠµë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">cover</code>ë¼ëŠ” <code class="language-plaintext highlighter-rouge">field</code>ë„ ì¶”ê°€ë¥¼ í–ˆêµ¬ìš”. ì´ëŒ€ë¡œ <code class="language-plaintext highlighter-rouge">form</code>ì„ ì‘ì„±í•˜ê³  <code class="language-plaintext highlighter-rouge">post</code>ìš”ì²­í•˜ê²Œ ë˜ë©´ ë°ì´í„°ê°€ ë³€ê²½/ì €ì¥ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">is_valid</code>ì—ì„œ <code class="language-plaintext highlighter-rouge">Falsy</code>í•œ ê°’ì„ ë°›ì•„ <code class="language-plaintext highlighter-rouge">save</code>ë˜ì§€ ì•Šê²Œ ë©ë‹ˆë‹¤.</p>

<p>ì´ìœ ëŠ” <code class="language-plaintext highlighter-rouge">request.FILES['profile']</code>ì´ ë¹ˆ ê°’ì´ê³ , ë¹„ë°€ë²ˆí˜¸ëŠ” <code class="language-plaintext highlighter-rouge">password</code>íƒ€ì…ìœ¼ë¡œ ë³€ê²½í•˜ë©´ instanceì— ìœ ì € ì •ë³´ë¥¼ ë„£ê³  formì„ ì¶œë ¥í•´ë„ <code class="language-plaintext highlighter-rouge">value</code>ì— íšŒì› ë¹„ë°€ë²ˆí˜¸ê°€ ë“¤ì–´ê°€ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>

<p>ì´ë ‡ê²Œ ë¹ˆ ê°’ì´ ë°œìƒí•˜ë©´ <code class="language-plaintext highlighter-rouge">is_valid</code>ì—ì„œ ë§‰íˆê²Œ ë˜ëŠ”ë° ì°¾ì•„ë³´ë‹ˆ ê°„ë‹¨í•˜ê²Œ í•´ê²°í•  ìˆ˜ ìˆëŠ” ë¬¸ì œì˜€ìŠµë‹ˆë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">forms.py</code>ì— ìˆë˜ <code class="language-plaintext highlighter-rouge">password</code>ì™€ <code class="language-plaintext highlighter-rouge">cover</code>ì— <code class="language-plaintext highlighter-rouge">requied</code>ë¥¼ <code class="language-plaintext highlighter-rouge">False</code>ë¡œ ë³€ê²½í•´ì¤ë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="c1"># forms.py
</span><span class="k">class</span> <span class="nc">UserForm</span><span class="p">(</span><span class="n">ModelForm</span><span class="p">):</span>
    <span class="n">cover</span> <span class="o">=</span> <span class="n">ImageField</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">widget</span><span class="o">=</span><span class="n">FileInput</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">'type'</span><span class="p">:</span> <span class="s">'file'</span><span class="p">}))</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">widget</span><span class="o">=</span><span class="n">PasswordInput</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">'type'</span><span class="p">:</span> <span class="s">'password'</span><span class="p">,</span> <span class="s">'autocomplete'</span><span class="p">:</span> <span class="s">'current-password'</span><span class="p">}))</span>

    <span class="c1"># Meta ...
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p>ì´ì œ <code class="language-plaintext highlighter-rouge">cover</code>ëŠ” í•„ìˆ˜ë¡œ ë°›ëŠ” í•­ëª©ì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ì´ë¯¸ì§€ íŒŒì¼ì„ ìƒˆë¡œ ì—…ë¡œë“œ í•˜ì§€ ì•Šì•„ë„, ë¹ˆê°’ìœ¼ë¡œ form <code class="language-plaintext highlighter-rouge">data</code>ê°€ ì „ì†¡ë˜ì–´ì ¸ë„ ê¸°ì¡´ì˜ ê°’ ê·¸ëŒ€ë¡œ ìœ ì§€ ë©ë‹ˆë‹¤.</p>

<p>í•˜ì§€ë§Œ <code class="language-plaintext highlighter-rouge">password</code>ëŠ” ì•„ë‹™ë‹ˆë‹¤. ë¬´ì—‡ ë•Œë¬¸ì¸ì§€ ìì„¸íˆ ëª¨ë¦…ë‹ˆë‹¤. <span class="text-danger fw-bold">ì–´ë””ê¹Œì§€ë‚˜ ì¶”ì¸¡ì…ë‹ˆë‹¤ë§Œ</span>, <code class="language-plaintext highlighter-rouge">type</code>ì— <code class="language-plaintext highlighter-rouge">password</code>ê°€ ì„¤ì •ë˜ë©´ì„œ <code class="language-plaintext highlighter-rouge">value</code>ì— ê°’ì´ ë“¤ì–´ê°€ì§€ ì•ŠëŠ” ì ì´ ë¬¸ì œë¼ ìƒê°ë©ë‹ˆë‹¤.</p>

<p>ì¦‰, ì• ì´ˆì— <code class="language-plaintext highlighter-rouge">password type</code>ì˜ <code class="language-plaintext highlighter-rouge">input</code>ì€ ë³´ì•ˆìƒ <code class="language-plaintext highlighter-rouge">value</code>ì— ê°’ì´ ë“¤ì–´ê°€ì§€ ì•Šìœ¼ë‹ˆ <code class="language-plaintext highlighter-rouge">form data</code>ê°€ <code class="language-plaintext highlighter-rouge">POST</code>ë¡œ ì „ì†¡ëœë‹¤ë©´, ì¼ë°˜ì ìœ¼ë¡œ íŒ¨ìŠ¤ì›Œë“œëŠ” ë¡œê·¸ì¸ì— ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— í•„ìˆ˜ í•­ëª©ìœ¼ë¡œ ë³´ê³  ê°€ì ¸ì™€ ì ìš©í•˜ëŠ” ê²ƒìœ¼ë¡œ ìƒê°ë©ë‹ˆë‹¤. ìì„¸í•œ ì›ë¦¬ëŠ” ì°¾ì•„ì„œ í¬ìŠ¤íŒ… ë‚´ìš©ì„ ìˆ˜ì •í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. ì–´ë””ê¹Œì§€ë‚˜ ì œ ìƒê°ì…ë‹ˆë‹¤.</p>

<p>ê·¸ë˜ì„œ coverëŠ” requiredë¥¼ Falseë¡œ ì„¤ì •í•˜ë©´ í•´ê²°ë©ë‹ˆë‹¤. passwordëŠ” is_validí•˜ê¸° ì „ì— Userëª¨ë¸ì—ì„œ pkê°’ìœ¼ë¡œ ê°€ì ¸ì˜¨ ë°ì´í„°ì˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë³€ìˆ˜ì— ë‹´ì•„ë‘ê³  ì…ë ¥ëœ ë¹„ë°€ë²ˆí˜¸ê°€ ë¹ˆ ê°’ì¼ ë•Œ ì €ì¥í•´ë‘ì—ˆë˜ ë³€ìˆ˜ë¥¼ ëŒ€ì‹  ì €ì¥ì‹œí‚¤ëŠ” ë°©ì‹ìœ¼ë¡œ í•˜ë©´ ë©ë‹ˆë‹¤.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td><td class="rouge-code"><pre><span class="c1"># ìƒëµ
</span>
<span class="o">@</span><span class="n">api_view</span><span class="p">([</span><span class="s">'GET'</span><span class="p">,</span> <span class="s">'POST'</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="c1"># ìƒëµ
</span>    <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="p">.</span><span class="n">objects</span><span class="p">.</span><span class="nb">filter</span><span class="p">(</span><span class="n">num</span><span class="o">=</span><span class="n">num</span><span class="p">).</span><span class="n">get</span><span class="p">(</span><span class="n">num</span><span class="o">=</span><span class="n">num</span><span class="p">)</span>
    <span class="n">origin_password</span> <span class="o">=</span> <span class="n">user</span><span class="p">.</span><span class="n">password</span>         <span class="c1"># +
</span>    
    <span class="k">if</span> <span class="n">request</span><span class="p">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'GET'</span><span class="p">:</span>
        <span class="c1"># ìƒëµ
</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># ìƒëµ
</span>
        <span class="k">if</span> <span class="n">userForm</span><span class="p">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">uf</span> <span class="o">=</span> <span class="n">userForm</span><span class="p">.</span><span class="n">save</span><span class="p">(</span><span class="n">commit</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">uf</span><span class="p">.</span><span class="n">password</span><span class="p">:</span>             <span class="c1"># +
</span>                <span class="n">uf</span><span class="p">.</span><span class="n">password</span> <span class="o">=</span> <span class="n">origin_pass</span>   <span class="c1"># +
</span>
            <span class="c1"># ìƒëµ
</span>
            <span class="n">uf</span><span class="p">.</span><span class="n">save</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s">'account:update'</span><span class="p">,</span> <span class="n">user</span><span class="p">.</span><span class="n">pk</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ì°¾ì•„ë³´ë©´ ë¶„ëª…íˆ ê°„ê²°í•˜ê³  í¸ë¦¬í•œ ë°©ë²•ì´ ìˆì„ ê²ƒì´ë¼ ìƒê°í•©ë‹ˆë‹¤. í¬ìŠ¤íŒ…ì— í¬í•¨ëœ ì¶”ì¸¡ì„± ë‚´ìš©ì€ ì¶”í›„ì— ì•Œê²Œë˜ë©´ ì •ì •í•´ì„œ ë‹¤ì‹œ ê²Œì¬í•  ì˜ˆì •ì…ë‹ˆë‹¤.</p>

<hr />

<p>ğŸ“š í•¨ê»˜ ë³´ë©´ ì¢‹ì€ ë‚´ìš©</p>

<p><a href="https://tothefullest08.github.io/django/2019/06/19/Django24_accounts4_update_delete_password/" target="_blank">í•´ë¦¬ë‹˜ :: Django 24 - ìœ ì € ì •ë³´ ìˆ˜ì • &amp; ì‚­ì œ</a></p>

<p><a href="https://programmers-sosin.tistory.com/entry/Django-Validator-%EC%9E%A5%EA%B3%A0-%EC%9C%A0%ED%9A%A8%EC%84%B1-%EA%B2%80%EC%A6%9D-Form%EC%97%90%EC%84%9C-%EC%9C%A0%ED%9A%A8%EC%84%B1-%EA%B2%80%EC%A6%9D%ED%95%98%EA%B8%B0" target="_blank">sosinë‹˜ :: Django Validator / ì¥ê³  ìœ íš¨ì„± ê²€ì¦ / Formì—ì„œ ìœ íš¨ì„± ê²€ì¦í•˜ê¸°</a></p>

<p><a href="https://gosmcom.tistory.com/143" target="_blank">ë°˜ì›_SemiCircleë‹˜ :: django - ë¡œê·¸ì¸ ì²˜ë¦¬ (ì„¸ì…˜ ì´ìš©)</a></p>

<p><a href="https://stackoverflow.com/questions/37475302/show-initial-value-for-filefield-in-django-template" target="_blank">Stackoverflow :: django - Show initial value for FileField in django-template</a></p>
:ET