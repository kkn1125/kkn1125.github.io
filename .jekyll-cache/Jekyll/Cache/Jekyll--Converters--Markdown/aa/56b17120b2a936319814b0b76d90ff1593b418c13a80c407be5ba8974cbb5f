I"Ë<h1 id="webassemblyë€">WebAssemblyë€</h1>

<p>ì›¹ ì–´ì…ˆë¸”ë¦¬ëŠ” ìµœì‹  ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ìƒˆë¡œìš´ ìœ í˜•ì˜ ì½”ë“œì…ë‹ˆë‹¤. Cë‚˜ C++, Rust, Javaì™€ ê°™ì€ ì–¸ì–´ë¥¼ ì›¹ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤ê³  í•©ë‹ˆë‹¤. ì•„ì§ ê³µë¶€ì¤‘ì¸ ì˜ì—­ì´ë¼ <a href="https://developer.mozilla.org/ko/docs/WebAssembly" target="_blank">MDN ì›¹ì–´ì…ˆë¸”ë¦¬</a>ë¥¼ ì°¸ê³ í•˜ì‹œë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì¶”ê°€ë¡œ ì°¸ê³ í•œ ì‚¬ì´íŠ¸ëŠ” ë§¨ í•˜ë‹¨ì— ë§í¬ë¥¼ ë‚¨ê¸°ê² ìŠµë‹ˆë‹¤.</p>

<p>ì›¹ì–´ì…ˆë¸”ë¦¬ë¥¼ ì–´ì œ ë§‰ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ìœ íŠœë¸Œì˜ ì‹ ê¸°í•œ ì•Œê³ ë¦¬ì¦˜ ë•ì— <code class="language-plaintext highlighter-rouge">ì½”ë”©ì• í”Œ</code>ë‹˜ì˜ ì˜ìƒì„ ë³´ê³  ì¡°ê¸ˆì´ë‚˜ë§ˆ ë¨¸ë¦¬ì†ì— ë‚¨ê²Œ ë˜ì—ˆëŠ”ë°ìš”.</p>

<p>ì„œë²„ ì—†ì´ êµ¬ë™ì„ ì‹œí‚¬ ìˆ˜ ìˆë‹¤ëŠ” ë§ˆë²•ê°™ì€ ì´ì•¼ê¸°ì¸ì§€ ë‹¨ìˆœíˆ ë¹ ë¥´ê²Œ ëŒë¦´ ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ê²ƒì¸ì§€ëŠ” ì˜ ëª¨ë¥´ê² ìŠµë‹ˆë‹¤.</p>

<p>ì£¼ë¡œ ì“°ëŠ” ì–¸ì–´ì¸ Javaë¥¼ webassemblyë¡œ ë³€í™˜í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” JWebAssemblyë¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë°›ì•„ í…ŒìŠ¤íŠ¸í•œ ê²ƒì„ ê¸°ë¡í•˜ê³ ì í•©ë‹ˆë‹¤.</p>

<h2 id="jwebassembly-ì‚¬ìš©">JWebAssembly ì‚¬ìš©</h2>

<blockquote>
  <p>ì‹¤í–‰í™˜ê²½<br />
java openjdk 11.0.12<br />
JWebAssembly-api v0.3<br />
JWebAssembly Compiler v0.3<br />
eclipse java</p>
</blockquote>

<p>ìŠ¤í”„ë§ Testë„ ì‘ë™ ë©ë‹ˆë‹¤.</p>

<p>WebAssemblyë¡œ ë³€í™˜í•  ëŒ€ìƒ í´ë˜ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="c1">// Add.java</span>
<span class="kn">import</span> <span class="nn">de.inetsoftware.jwebassembly.api.annotation.Export</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Add</span> <span class="o">{</span>
	<span class="nd">@Export</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">add</span><span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="nd">@Export</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">minus</span><span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">a</span><span class="o">-</span><span class="n">b</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>@Exportë¼ëŠ” ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ë³€í™˜ì‹œí‚¬ í•¨ìˆ˜ë“¤ì„ ë‚´ë³´ëƒ…ë‹ˆë‹¤. Exportê°€ ë¹ ì§„ í•¨ìˆ˜ëŠ” ì œì™¸ë©ë‹ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="c1">// testWasm.java</span>
<span class="kn">import</span> <span class="nn">java.io.File</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">de.inetsoftware.jwebassembly.JWebAssembly</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">testWasm</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">JWebAssembly</span> <span class="n">wasm</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JWebAssembly</span><span class="o">();</span>
		<span class="n">wasm</span><span class="o">.</span><span class="na">addFile</span><span class="o">(</span><span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="s">"bin/testwasm/Add.class"</span><span class="o">));</span>
		<span class="nc">String</span> <span class="n">text</span> <span class="o">=</span> <span class="n">wasm</span><span class="o">.</span><span class="na">compileToText</span><span class="o">();</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="s">"bin/testwasm/Add.class"</span><span class="o">).</span><span class="na">canRead</span><span class="o">());</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">text</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>JWebAssemblyì„ í•˜ë‚˜ ìƒì„±í•˜ê³  addFileë©”ì„œë“œë¡œ ë³€í™˜ëŒ€ìƒ íŒŒì¼ì„ ì¸ìë¡œ ì¤ë‹ˆë‹¤. ì´ë•Œ Add.classì¸ ì ì„ ë³´ì…”ì•¼í•©ë‹ˆë‹¤. ê³„ì† javaë¡œ í•´ì„œ í•œì°¸ì„â€¦</p>

<p>classíŒŒì¼ì€ javaì—ì„œëŠ” binì— ë“¤ì–´ìˆê³ , springì´ë‚˜ jspëŠ” target/classesì— ë“¤ì–´ìˆìŠµë‹ˆë‹¤.</p>

<p>canReadë¡œ í™•ì¸í•´ë³´ê³  <code class="language-plaintext highlighter-rouge">compileToText</code>ë¡œ ë³€í™˜ ë‚´ìš©ì„ ë°›ì•„ ì¶œë ¥í•´ì„œ  ì•„ë˜ì™€ ê°™ì´ ë‚˜ì˜¤ë©´ ì„±ê³µì…ë‹ˆë‹¤.</p>

<p><img src="/assets/images/post/wasm/wasm01.png" alt="wasm" /></p>

<p>ì´í›„ë¡œ ì–´ë–»ê²Œ ì‚¬ìš©í•˜ê³  í•˜ëŠ”ì§€ëŠ” ë” ê³µë¶€í•´ì„œ ê¸°ë¡ì— ë‚¨ê¸°ë ¤í•©ë‹ˆë‹¤.</p>

<hr />

<blockquote>
  <p>ì°¸ê³ ì‚¬ì´íŠ¸</p>
</blockquote>

<p><a href="https://speakerdeck.com/dalexandrov/webassembly-from-the-java-perspective?slide=108" target="_blank">WebAssembly from the Java Perspective</a></p>
:ET