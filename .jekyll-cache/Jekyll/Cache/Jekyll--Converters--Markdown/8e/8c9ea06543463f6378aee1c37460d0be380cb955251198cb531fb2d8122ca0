I"„<h1 id="ë°ì´í„°ë² ì´ìŠ¤ë¥¼-ì‚¬ìš©í•´ë³´ì">ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•´ë³´ì</h1>

<p><code class="language-plaintext highlighter-rouge">ToDo List</code>ì—ì„œ ê°€ì¥ ë¬µí˜€ë‘ì—ˆë˜ ì£¼ì œì¸ë°ìš”. ì•ˆ ë  ê²ƒ ê°™ìœ¼ë©´ì„œë„ ë  ê²ƒ ê°™ì•„ì„œ íì§€ë¶€ì§€í•˜ê³ ë§Œ ìˆì—ˆìŠµë‹ˆë‹¤.</p>

<p>íŒŒì´ì¬ìœ¼ë¡œ ì½”ë”©í…ŒìŠ¤íŠ¸ ì¤€ë¹„ë§Œ í•˜ë‹¤ê°€ <code class="language-plaintext highlighter-rouge">JS</code>ì™€ <code class="language-plaintext highlighter-rouge">Spring</code>ì„ ìŠì–´ë²„ë¦¬ì§€ëŠ” ì•Šì„ê¹Œ í•´ì„œ ê·¸ëŸ° í•‘ê³„ë¡œ í…ŒìŠ¤íŠ¸ í•´ë´¤ìŠµë‹ˆë‹¤.</p>

<p>ì •ì ì›¹ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì´ìš©í•˜ìë‹ˆ javaë‚˜ nodejsë“±ì„ ì¨ì•¼í•˜ëŠ”ë° nodejsëŠ” ê·¸ì € ì¡°ê¸ˆ ì¨ë´¤ê³ , javaë¥¼ êµ¬ë™í•˜ìë‹ˆ github í˜ì´ì§€ë¥¼ springìœ¼ë¡œ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì€ ëª¨ë¥´ê² ê³  í•´ì„œ ì¡°ê¸ˆì˜ ê¼¼ìˆ˜ë¥¼ ìƒê°í•´ë´¤ìŠµë‹ˆë‹¤.</p>

<blockquote>
  <p>í•„ìš”í•œ ì¤€ë¹„ë¬¼</p>
  <ol>
    <li>heroku app</li>
    <li>jquery ( AJAX )</li>
    <li>MySQL</li>
    <li>Spring Boot (Springì´ë‚˜ JSPë„ ê°€ëŠ¥í•˜ë‹¤ ìƒê°ë©ë‹ˆë‹¤.)</li>
  </ol>
</blockquote>

<blockquote>
  <p>Used</p>
  <ol>
    <li>spring-boot-starter-* 2.5.4</li>
    <li>spring-boot-configuration-processor 2.5.4</li>
    <li>tomcat-embed0jasper[privided] 9.0.52</li>
    <li>mybatis-spring-boot-starter 2.2.0</li>
    <li>mysql-connector-java 8.0.26</li>
    <li>lombok 1.18.20</li>
  </ol>
</blockquote>

<h2 id="ì™¸ë¶€-ë°ì´í„°ë² ì´ìŠ¤-ì‚¬ìš©-êµ¬í˜„">ì™¸ë¶€ ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ìš© êµ¬í˜„</h2>

<p>ìš°ì„  ìƒê°ì€ ì´ë¬ìŠµë‹ˆë‹¤.</p>

<ol>
  <li>í—¤ë¡œì¿  ì•±ì„ í•˜ë‚˜ ìƒì„±í•œë‹¤.</li>
  <li>ì™¸ë¶€ ì €ì¥ì†Œë¥¼ í•˜ë‚˜ ë§Œë“ ë‹¤. (JawsDBë¥¼ ì±„íƒí–ˆìŠµë‹ˆë‹¤.)</li>
  <li><code class="language-plaintext highlighter-rouge">restful</code> í•˜ê²Œ ë§Œë“¤ì–´ <code class="language-plaintext highlighter-rouge">JSON</code>ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ëŠ”ë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">table</code>ì„ ë§Œë“œëŠ” <code class="language-plaintext highlighter-rouge">query</code>ë„ ë§Œë“ ë‹¤. (<code class="language-plaintext highlighter-rouge">table</code>ì„ ì •ì  ì›¹ìƒì—ì„œ <code class="language-plaintext highlighter-rouge">form</code>ìœ¼ë¡œ ë§Œë“¤ê³  ì§€ìš°ëŠ” ê²ƒ)</li>
</ol>

<p>ê·¸ë˜ì„œ ì €ëŠ” í…ŒìŠ¤íŠ¸ìš©ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">heroku app</code>ì„ ì±„íƒí–ˆìŠµë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">spring</code>ìœ¼ë¡œ ì„œë²„ êµ¬í˜„ì´ ì‰½ê¸°ë„ í•˜ê³  ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë¬´ë£Œë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ add onì„ ì§€ì›í•´ì£¼ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p>

<blockquote>
  <p>herokuì—ì„œ dbë¥¼ ì‚¬ìš©í•  ë•Œ clearDBëŠ” utf8ì´ ì§€ì›ì´ ì•ˆë˜ì–´ì„œ jawsDBë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.</p>
</blockquote>

<h3 id="í—¤ë¡œì¿ -ì•±-ìƒì„±">í—¤ë¡œì¿  ì•± ìƒì„±</h3>

<p><img src="/assets/images/post/database/db02.png" alt="í—¤ë¡œì¿ " /></p>

<p>ë¨¼ì € í—¤ë¡œì¿  ì•± í•˜ë‚˜ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  Spring Bootë¡œ í”„ë¡œì íŠ¸ í•˜ë‚˜ë¥¼ ë§Œë“­ë‹ˆë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">add-on</code>ì„ <code class="language-plaintext highlighter-rouge">jawsDB</code>ë¡œ ì¶”ê°€ì‹œí‚¤ê³  ì €ì¥ì†Œ <code class="language-plaintext highlighter-rouge">url</code>ê³¼ <code class="language-plaintext highlighter-rouge">username</code>, <code class="language-plaintext highlighter-rouge">password</code>, <code class="language-plaintext highlighter-rouge">dbname</code>ì„ <code class="language-plaintext highlighter-rouge">spring boot</code>ì˜ <code class="language-plaintext highlighter-rouge">properties</code>ì— ì¶”ê°€í•  ê²ƒì´ê¸° ë•Œë¬¸ì— ì•Œì•„ë‘¬ì•¼í•©ë‹ˆë‹¤.</p>

<p>ìœ„ ì´ë¯¸ì§€ì˜ <code class="language-plaintext highlighter-rouge">jawsDB MySQL</code>ì„ í´ë¦­í•˜ë©´ ë³¸ì¸ì˜ <code class="language-plaintext highlighter-rouge">db</code>ì •ë³´ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<h3 id="spring-boot-prj-ì„¤ì •">Spring boot prj ì„¤ì •</h3>

<p>í”„ë¡œì íŠ¸ëŠ” <code class="language-plaintext highlighter-rouge">RestController</code> í•˜ë‚˜ëŠ” ì‚¬ìš©í•´ë³¼ ê²ƒì´ë¯€ë¡œ ë”±íˆ <code class="language-plaintext highlighter-rouge">view</code>ë‹¨ì˜ íŒŒì¼ë“¤ì€ í•„ìš” ì—†ìŠµë‹ˆë‹¤.</p>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="c"># mysql settings
</span><span class="py">spring.datasource.driver-class-name</span><span class="p">=</span><span class="s">com.mysql.cj.jdbc.Driver</span>
<span class="py">spring.datasource.url</span><span class="p">=</span><span class="s">jdbc:mysql://{hostName}:3306/{databaseName}?useUnicode=yes&amp;characterEncoding=UTF-8&amp;maxActive=20&amp;allowMultiQueries=true&amp;serverTimezone=Asia/Seoul</span>
<span class="py">spring.datasource.username</span><span class="p">=</span> <span class="s">{Id}</span>
<span class="py">spring.datasource.password</span><span class="p">=</span> <span class="s">{Password}</span>

<span class="py">mybatis.type-aliases-package</span><span class="p">=</span><span class="s">com.repotest.web.entity</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>í”„ë¡œí¼í‹°íŒŒì¼ì€ ìœ„ì™€ ê°™ì´ ì„¤ì •í–ˆìŠµë‹ˆë‹¤. ì½§ìˆ˜ì—¼ ê´„í˜¸(â€œ{â€œ, â€œ}â€) ëŠ” ë¹¼ê³  ì…ë ¥í•˜ì‹œë©´ ë©ë‹ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="rouge-code"><pre><span class="c1">// ServletConfig.java</span>

<span class="nd">@Configuration</span>
<span class="nd">@EnableWebMvc</span>
<span class="nd">@ComponentScan</span><span class="o">(</span><span class="n">basePackages</span> <span class="o">=</span> <span class="o">{</span> <span class="s">"com.repotest.web"</span> <span class="o">})</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ServletConfig</span> <span class="kd">implements</span> <span class="nc">WebMvcConfigurer</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addCorsMappings</span><span class="o">(</span><span class="nc">CorsRegistry</span> <span class="n">registry</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">registry</span><span class="o">.</span><span class="na">addMapping</span><span class="o">(</span><span class="s">"/**"</span><span class="o">).</span><span class="na">allowedOrigins</span><span class="o">(</span><span class="s">"localhost:8080/"</span><span class="o">,</span> <span class="s">"your herokuapp baseurl"</span><span class="o">).</span><span class="na">allowedMethods</span><span class="o">(</span>
            <span class="c1">// "GET","POST","PUT","DELETE"</span>
            <span class="nc">HttpMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">.</span><span class="na">name</span><span class="o">(),</span> <span class="nc">HttpMethod</span><span class="o">.</span><span class="na">HEAD</span><span class="o">.</span><span class="na">name</span><span class="o">(),</span> <span class="nc">HttpMethod</span><span class="o">.</span><span class="na">POST</span><span class="o">.</span><span class="na">name</span><span class="o">(),</span> <span class="nc">HttpMethod</span><span class="o">.</span><span class="na">PUT</span><span class="o">.</span><span class="na">name</span><span class="o">(),</span>
            <span class="nc">HttpMethod</span><span class="o">.</span><span class="na">DELETE</span><span class="o">.</span><span class="na">name</span><span class="o">());</span>
    <span class="o">}</span>
    
	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">addResourceHandlers</span><span class="o">(</span><span class="nc">ResourceHandlerRegistry</span> <span class="n">registry</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">registry</span><span class="o">.</span><span class="na">addResourceHandler</span><span class="o">(</span><span class="s">"/resources/**"</span><span class="o">)</span> <span class="c1">// ë§¤í•‘ URI ì„¤ì •</span>
				<span class="o">.</span><span class="na">addResourceLocations</span><span class="o">(</span><span class="s">"/resources/"</span><span class="o">);</span> <span class="c1">// ì •ì  ë¦¬ì†ŒìŠ¤ ìœ„ì¹˜ ì„¤ì •</span>
	<span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">servletconfig.java</code>ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">cors</code>ë§¤í•‘ê³¼ <code class="language-plaintext highlighter-rouge">resources</code> ê²½ë¡œë¥¼ ì¡ì•„ì¤ë‹ˆë‹¤.</p>

<p>resources ë§¤í•‘ì€ êµ³ì´ í•„ìš” ì—†ë‹¤ê³  ìƒê°ë˜ì§€ë§Œ ë‚˜ì¤‘ì— <code class="language-plaintext highlighter-rouge">js</code>ë“±ì„ ì—°ê²°í•´ì„œ ë°ì´í„°ë¥¼ ì¤‘ê°„ì—ì„œ ê°€ê³µí•  ë•Œ í•„ìš”í•  ê²ƒ ê°™ì•„ ì‘ì„± í•´ë‘ì—ˆìŠµë‹ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
</pre></td><td class="rouge-code"><pre><span class="c1">// WebConfig.java</span>

<span class="nd">@Configuration</span>
<span class="nd">@EnableWebMvc</span>
<span class="nd">@ComponentScan</span><span class="o">(</span><span class="n">basePackages</span> <span class="o">=</span> <span class="o">{</span> <span class="s">"com.repotest.web"</span> <span class="o">})</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WebConfig</span> <span class="kd">extends</span> <span class="nc">AbstractAnnotationConfigDispatcherServletInitializer</span><span class="o">{</span>
	<span class="nd">@Override</span>
	<span class="kd">protected</span> <span class="nc">Class</span><span class="o">&lt;?&gt;[]</span> <span class="n">getRootConfigClasses</span><span class="o">()</span>
	<span class="o">{</span>
		<span class="k">return</span> <span class="k">new</span> <span class="nc">Class</span><span class="o">[]</span> <span class="o">{};</span>
	<span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">protected</span> <span class="nc">Class</span><span class="o">&lt;?&gt;[]</span> <span class="n">getServletConfigClasses</span><span class="o">()</span>
	<span class="o">{</span>
		<span class="k">return</span> <span class="k">new</span> <span class="nc">Class</span><span class="o">[]</span> <span class="o">{</span><span class="nc">ServletConfig</span><span class="o">.</span><span class="na">class</span><span class="o">};</span>
	<span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">protected</span> <span class="nc">String</span><span class="o">[]</span> <span class="nf">getServletMappings</span><span class="o">()</span>
	<span class="o">{</span>
		<span class="k">return</span> <span class="k">new</span> <span class="nc">String</span><span class="o">[]</span> <span class="o">{</span><span class="s">"/"</span><span class="o">};</span>
	<span class="o">}</span>
	
	<span class="nd">@Override</span>
	<span class="kd">protected</span> <span class="nc">Filter</span><span class="o">[]</span> <span class="nf">getServletFilters</span><span class="o">()</span> <span class="o">{</span>
		<span class="nc">HiddenHttpMethodFilter</span> <span class="n">httpMethodFilter</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HiddenHttpMethodFilter</span><span class="o">();</span>
	    <span class="nc">CharacterEncodingFilter</span> <span class="n">encodingFilter</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CharacterEncodingFilter</span><span class="o">();</span>
	    <span class="n">encodingFilter</span><span class="o">.</span><span class="na">setEncoding</span><span class="o">(</span><span class="s">"UTF-8"</span><span class="o">);</span>
	    <span class="n">encodingFilter</span><span class="o">.</span><span class="na">setForceEncoding</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
	    <span class="k">return</span> <span class="k">new</span> <span class="nc">Filter</span><span class="o">[]</span> <span class="o">{</span> <span class="n">httpMethodFilter</span><span class="o">,</span> <span class="n">encodingFilter</span> <span class="o">};</span>
	<span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>í•„í„°ë„ í•˜ë‚˜ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤. ê°€ë” í•œê¸€ì´ ê¹¨ì§€ëŠ” ê²ƒì„ ê²½í—˜í•˜ê³  ë‚œ í›„ë¡œëŠ” ëª¨ë“  í”„ë¡œì íŠ¸ì— ì¶”ê°€í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="c1">// MemberMapper.java</span>

<span class="nd">@Mapper</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MemberMapper</span> <span class="o">{</span>
	<span class="nd">@Select</span><span class="o">(</span><span class="s">"SELECT * FROM member"</span><span class="o">)</span>
	<span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="nf">getList</span><span class="o">();</span>
	<span class="nd">@Select</span><span class="o">(</span><span class="s">"select * from member where concat(id,name,age,gender) like '%#{word}%'"</span><span class="o">)</span>
	<span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="nf">getListByWord</span><span class="o">(</span><span class="nc">String</span> <span class="n">word</span><span class="o">);</span>
	<span class="nd">@Insert</span><span class="o">(</span><span class="s">"INSERT INTO member(name, age, gender) VALUES(#{name}, #{age}, #{gender})"</span><span class="o">)</span>
	<span class="kt">void</span> <span class="nf">addMember</span><span class="o">(</span><span class="nc">Member</span> <span class="n">member</span><span class="o">);</span>
	<span class="nd">@Update</span><span class="o">(</span><span class="s">"UPDATE member SET name=#{name}, age=#{age}, gender=#{gender}"</span><span class="o">)</span>
	<span class="kt">void</span> <span class="nf">editMember</span><span class="o">(</span><span class="nc">Member</span> <span class="n">member</span><span class="o">);</span>
	<span class="nd">@Delete</span><span class="o">(</span><span class="s">"DELETE FROM member WHERE id=#{id}"</span><span class="o">)</span>
	<span class="kt">void</span> <span class="nf">removeMember</span><span class="o">(</span><span class="kt">int</span> <span class="n">id</span><span class="o">);</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">mybatis mapper</code>ëŠ” ìµœì†Œí•œìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">CRUD</code>ë§Œ í…ŒìŠ¤íŠ¸í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
</pre></td><td class="rouge-code"><pre><span class="c1">// HomeController.java</span>

<span class="nd">@RestController</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/"</span><span class="o">)</span>
<span class="nd">@CrossOrigin</span><span class="o">(</span><span class="n">origins</span> <span class="o">=</span> <span class="s">"*"</span><span class="o">,</span> <span class="n">allowedHeaders</span> <span class="o">=</span> <span class="s">"*"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HomeController</span> <span class="o">{</span>
	
	<span class="nd">@Autowired</span>
	<span class="nc">MemberServiceImpl</span> <span class="n">service</span><span class="o">;</span>
	
	<span class="nd">@GetMapping</span><span class="o">(</span><span class="s">""</span><span class="o">)</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">home</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="s">"hello world"</span><span class="o">;</span>
	<span class="o">}</span>
	
	<span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"member"</span><span class="o">)</span>
	<span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="nf">memberlist</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">service</span><span class="o">.</span><span class="na">getList</span><span class="o">();</span>
	<span class="o">}</span>
	
	<span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"member/{word}"</span><span class="o">)</span>
	<span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="nf">memberadd</span><span class="o">(</span><span class="nd">@PathVariable</span><span class="o">(</span><span class="s">"word"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">word</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">service</span><span class="o">.</span><span class="na">getListByWord</span><span class="o">(</span><span class="n">word</span><span class="o">);</span>
	<span class="o">}</span>
	
	<span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"member"</span><span class="o">)</span>
	<span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="nf">memberadd</span><span class="o">(</span><span class="nc">Member</span> <span class="n">member</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">service</span><span class="o">.</span><span class="na">addMember</span><span class="o">(</span><span class="n">member</span><span class="o">);</span>
		<span class="k">return</span> <span class="n">service</span><span class="o">.</span><span class="na">getList</span><span class="o">();</span>
	<span class="o">}</span>
	
	<span class="nd">@PutMapping</span><span class="o">(</span><span class="s">"member/{id}"</span><span class="o">)</span>
	<span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="nf">memberedit</span><span class="o">(</span><span class="nc">Member</span> <span class="n">member</span><span class="o">,</span> <span class="nd">@PathVariable</span><span class="o">(</span><span class="s">"id"</span><span class="o">)</span> <span class="kt">int</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">member</span><span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
		<span class="n">service</span><span class="o">.</span><span class="na">editMember</span><span class="o">(</span><span class="n">member</span><span class="o">);</span>
		<span class="k">return</span> <span class="n">service</span><span class="o">.</span><span class="na">getList</span><span class="o">();</span>
	<span class="o">}</span>
	
	<span class="nd">@DeleteMapping</span><span class="o">(</span><span class="s">"member/{id}"</span><span class="o">)</span>
	<span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="nf">memberremove</span><span class="o">(</span><span class="nd">@PathVariable</span><span class="o">(</span><span class="s">"id"</span><span class="o">)</span> <span class="kt">int</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">service</span><span class="o">.</span><span class="na">removeMember</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
		<span class="k">return</span> <span class="n">service</span><span class="o">.</span><span class="na">getList</span><span class="o">();</span>
	<span class="o">}</span>

<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>serviceì™€ entityë¶€ë¶„ì€ ìƒëµí•˜ê² ìŠµë‹ˆë‹¤. ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” RestControllerë¥¼ ì‚¬ìš©í•˜ì—¬ ë‚˜ì¤‘ì— ì •ì ì›¹ì—ì„œ JSONìœ¼ë¡œ ë°›ì„ ì¤€ë¹„ë¥¼ í•©ë‹ˆë‹¤.</p>

<p><img src="/assets/images/post/database/db03.png" alt="ìŠ¤í”„ë§" /></p>

<p>ê·¸ëŸ¬ê³ ë‚˜ì„œ ìŠ¤í”„ë§ ë¶€íŠ¸ë¥¼ ì‹¤í–‰í•˜ê³  í™•ì¸í•´ë´…ë‹ˆë‹¤. ìœ„ì™€ ê°™ì´ ë‚˜ì˜¤ë©´ ì„±ê³µì…ë‹ˆë‹¤.</p>

<h3 id="ë°ì´í„°ë² ì´ìŠ¤-ì„œë²„-í…ŒìŠ¤íŠ¸">ë°ì´í„°ë² ì´ìŠ¤ ì„œë²„ í…ŒìŠ¤íŠ¸</h3>

<p>í—¤ë¡œì¿ ì— spring boot í”„ë¡œì íŠ¸ë¥¼ ë°°í¬í•©ë‹ˆë‹¤.</p>

<p>ë°°í¬ ë°©ë²•ì„ ë‚¨ê²¨ë‘ê² ìŠµë‹ˆë‹¤. ì´í´ë¦½ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê³  ìˆì–´ ì´í´ë¦½ìŠ¤ ê¸°ì¤€ìœ¼ë¡œ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.</p>

<blockquote>
  <p>pom.xmlì— versioníƒœê·¸ ë°‘ packagingíƒœê·¸ê°€ warë¼ë©´ jarë¡œ ë°”ê¾¸ì–´ ì¤ë‹ˆë‹¤.</p>
</blockquote>

<p>ì´í´ë¦½ìŠ¤ì—ì„œ <code class="language-plaintext highlighter-rouge">run as &gt; maven build &gt; Goals</code>ì— packageë¼ê³  ì ìŠµë‹ˆë‹¤.
<code class="language-plaintext highlighter-rouge">profiles</code>ì— pom.xmlì€ ë¹Œë“œ í–ˆì„ë•Œ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ì„œ ë¹Œë“œ ì‹¤íŒ¨í•œë‹¤ë©´ <code class="language-plaintext highlighter-rouge">profiles</code>ë€ì„ ë¹„ìš°ê³  ë‹¤ì‹œ ë¹Œë“œí•©ë‹ˆë‹¤.</p>

<p>ì´í›„ <code class="language-plaintext highlighter-rouge">cmd</code>ë‚˜ <code class="language-plaintext highlighter-rouge">bash</code>ë¥¼ ì—´ì–´ <code class="language-plaintext highlighter-rouge">heroku</code>ì— ë°°í¬í•©ë‹ˆë‹¤. ì´ ë•Œ <code class="language-plaintext highlighter-rouge">build</code>ëœ íŒŒì¼ì€ í•´ë‹¹ í”„ë¡œì íŠ¸ <code class="language-plaintext highlighter-rouge">target</code>í´ë”ì— ìœ„ì¹˜í•˜ë©°, í”„ë¡œì íŠ¸ íŒŒì¼ì˜ ìœ„ì¹˜ì—ì„œ <code class="language-plaintext highlighter-rouge">bash</code>ë¥¼ ì—½ë‹ˆë‹¤.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>git init
heroku git:remote <span class="nt">-a</span> appname
git add <span class="nb">.</span>
git commit <span class="nt">-am</span> <span class="s2">"make it better"</span>
git push heroku master
</pre></td></tr></tbody></table></code></pre></div></div>

<p>í”„ë¡œì íŠ¸ê°€ í—¤ë¡œì¿  gitì— ì—…ë¡œë“œ ë˜ê³  ì•Œì•„ì„œ javaë¥¼ ì¸ì‹í•©ë‹ˆë‹¤.</p>

<p>ì™„ë£Œê°€ ë˜ë©´ https://appname.herokuapp.comìœ¼ë¡œ ì ‘ì†í•´ì„œ í™•ì¸í•©ë‹ˆë‹¤.</p>

<p><img src="/assets/images/post/database/db03.png" alt="ìŠ¤í”„ë§" /></p>

<p>ìœ„ì™€ ê°™ì´ ì´í´ë¦½ìŠ¤ì—ì„œ ë¡œì»¬í˜¸ìŠ¤íŠ¸ë¡œ ì ‘ì†í–ˆì„ ë•Œì™€ ê°™ë‹¤ë©´ ì„±ê³µì…ë‹ˆë‹¤. ê·¸ë¦¬ê³  <code class="language-plaintext highlighter-rouge">member</code>ê²½ë¡œë¥¼ í…ŒìŠ¤íŠ¸ í•´ë´…ë‹ˆë‹¤.</p>

<p><img src="/assets/images/post/database/db04.png" alt="ìŠ¤í”„ë§" /></p>

<p>ì˜ ëœ¹ë‹ˆë‹¤. ì´ì œ ì €ì¥ì†Œë¡œ ì“¸ ì„œë²„ë¥¼ ë§Œë“¤ì—ˆìœ¼ë‹ˆ ë³¸ì¸ì˜ ê¹ƒí—ˆë¸Œ í˜ì´ì§€ë‚˜ http ì„œë²„ë¥¼ í•˜ë‚˜ ì—½ë‹ˆë‹¤.</p>

<h3 id="ë°ì´í„°ë² ì´ìŠ¤ë¡œ-ì‚¬ìš©í•˜ê¸°">ë°ì´í„°ë² ì´ìŠ¤ë¡œ ì‚¬ìš©í•˜ê¸°</h3>

<p>ëª¨ë“  ì¤€ë¹„ê°€ ëë‚¬ìŠµë‹ˆë‹¤. ì €ëŠ” http serverë¥¼ ì—´ì–´ í…ŒìŠ¤íŠ¸ë¥¼ í–ˆëŠ”ë°ìš”. ì˜ ë°›ì•„ì˜¤ê³  ë¿Œë ¤ì§€ëŠ”ì§€ ë³´ê² ìŠµë‹ˆë‹¤.</p>

<p>ì €ëŠ” ì¹´ë“œí˜•ì‹ìœ¼ë¡œ ì¶œë ¥í•˜ê³  ì‹¶ì–´ì„œ ë¶€íŠ¸ìŠ¤íŠ¸ë©ì„ ì¼ìŠµë‹ˆë‹¤. í¸ì˜ì— ë§ê²Œ ì‚¬ìš©í•˜ì‹œë©´ ë©ë‹ˆë‹¤. ajaxë¡œ ê°€ì ¸ì˜¤ê¸° ë•Œë¬¸ì— jqueryë‚˜ xhrì„ ì‚¬ìš©í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
	<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"X-UA-Compatible"</span> <span class="na">content=</span><span class="s">"IE=edge"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1.0"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
	<span class="nt">&lt;title&gt;</span>Document<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
	<span class="nt">&lt;h1&gt;</span>ì™¸ë¶€ ì €ì¥ì†Œ í…ŒìŠ¤íŠ¸<span class="nt">&lt;/h1&gt;</span>

	<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"result"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">getList</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
    <span class="nx">data</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span>
	<span class="kd">let</span> <span class="nx">reg</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">regdate</span><span class="p">);</span>
	<span class="kd">let</span> <span class="nx">regs</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">reg</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">()}</span><span class="s2">-</span><span class="p">${</span><span class="nx">reg</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()}</span><span class="s2">-</span><span class="p">${</span><span class="nx">reg</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()}</span><span class="s2"> </span><span class="p">${</span><span class="nx">reg</span><span class="p">.</span><span class="nx">getHours</span><span class="p">()}</span><span class="s2">:</span><span class="p">${</span><span class="nx">reg</span><span class="p">.</span><span class="nx">getMinutes</span><span class="p">()}</span><span class="s2">:</span><span class="p">${</span><span class="nx">reg</span><span class="p">.</span><span class="nx">getSeconds</span><span class="p">()}</span><span class="s2">`</span><span class="p">;</span>
	<span class="kd">let</span> <span class="nx">update</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">updates</span><span class="p">);</span>
	<span class="kd">let</span> <span class="nx">updates</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">update</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">()}</span><span class="s2">-</span><span class="p">${</span><span class="nx">update</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()}</span><span class="s2">-</span><span class="p">${</span><span class="nx">update</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()}</span><span class="s2"> </span><span class="p">${</span><span class="nx">update</span><span class="p">.</span><span class="nx">getHours</span><span class="p">()}</span><span class="s2">:</span><span class="p">${</span><span class="nx">update</span><span class="p">.</span><span class="nx">getMinutes</span><span class="p">()}</span><span class="s2">:</span><span class="p">${</span><span class="nx">update</span><span class="p">.</span><span class="nx">getSeconds</span><span class="p">()}</span><span class="s2">`</span><span class="p">;</span>
	<span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">result</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">+=</span> <span class="s2">`
		&lt;div class="container"&gt;
			&lt;div class="p-3 border rounded-3 mb-3"&gt;
				&lt;div&gt;&lt;span class="badge bg-info"&gt;</span><span class="p">${</span><span class="nx">x</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="s2">&lt;/span&gt;&lt;span&gt;</span><span class="p">${</span><span class="nx">x</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2">&lt;/span&gt;&lt;/div&gt;
				&lt;div class="badge bg-primary"&gt;ë‚˜ì´ </span><span class="p">${</span><span class="nx">x</span><span class="p">.</span><span class="nx">age</span><span class="p">}</span><span class="s2">&lt;/div&gt;
				&lt;div class="badge bg-primary"&gt;ì„±ë³„ </span><span class="p">${</span><span class="nx">x</span><span class="p">.</span><span class="nx">gender</span><span class="o">==</span><span class="mi">1</span><span class="p">?</span><span class="dl">'</span><span class="s1">ë‚¨</span><span class="dl">'</span><span class="p">:</span><span class="nx">x</span><span class="p">.</span><span class="nx">gender</span><span class="o">==</span><span class="mi">2</span><span class="p">?</span><span class="dl">'</span><span class="s1">ì—¬</span><span class="dl">'</span><span class="p">:</span><span class="dl">''</span><span class="p">}</span><span class="s2">&lt;/div&gt;
				&lt;div&gt;&lt;span class="badge bg-success"&gt;regdate&lt;/span&gt; &lt;span class="badge bg-secondary"&gt;</span><span class="p">${</span><span class="nx">regs</span><span class="p">}</span><span class="s2">&lt;/span&gt;&lt;/div&gt;
				&lt;div&gt;&lt;span class="badge bg-success"&gt;update&lt;/span&gt; &lt;span class="badge bg-secondary"&gt;</span><span class="p">${</span><span class="nx">updates</span><span class="p">}</span><span class="s2">&lt;/span&gt;&lt;/div&gt;
			&lt;/div&gt;
		&lt;/div&gt;
	`</span><span class="p">;</span>
<span class="p">}</span>

<span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">load</span><span class="dl">'</span><span class="p">,()</span><span class="o">=&gt;</span><span class="p">{</span>

    <span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">https://yourappname.herokuapp.com/</span><span class="dl">'</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">tmp</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">url</span><span class="p">}</span><span class="s2">/member`</span><span class="p">,</span>
        <span class="na">method</span><span class="p">:</span><span class="dl">'</span><span class="s1">get</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">success</span><span class="p">:(</span><span class="nx">data</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
            <span class="nx">getList</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="na">error</span><span class="p">:(</span><span class="nx">xhr</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span> 
    <span class="p">});</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>
:ET